(self.webpackChunkpimcore_quill_bundle=self.webpackChunkpimcore_quill_bundle||[]).push([["145"],{9404:function(e,t,r){var i;self,e.exports=function(e){var t={386:function(e){function t(e,d,p,f,g){if(e===d)return e?[[0,e]]:[];if(null!=p){var m=function(e,t,r){var i="number"==typeof r?{index:r,length:0}:r.oldRange,l="number"==typeof r?null:r.newRange,n=e.length,s=t.length;if(0===i.length&&(null===l||0===l.length)){var o=i.index,a=e.slice(0,o),c=e.slice(o),h=l?l.index:null,u=o+s-n;if((null===h||h===u)&&!(u<0||u>s)){var d=t.slice(0,u);if((f=t.slice(u))===c){var p=Math.min(o,u);if((m=a.slice(0,p))===(y=d.slice(0,p)))return b(m,a.slice(p),d.slice(p),c)}}if(null===h||h===o){var f=(d=t.slice(0,o),t.slice(o));if(d===a){var g=Math.min(n-o,s-o);if((v=c.slice(c.length-g))===(w=f.slice(f.length-g)))return b(a,c.slice(0,c.length-g),f.slice(0,f.length-g),v)}}}if(i.length>0&&l&&0===l.length){var m=e.slice(0,i.index),v=e.slice(i.index+i.length);if(!(s<(p=m.length)+(g=v.length))){var y=t.slice(0,p),w=t.slice(s-g);if(m===y&&v===w)return b(m,e.slice(p,n-g),t.slice(p,s-g),v)}}return null}(e,d,p);if(m)return m}var v=i(e,d),y=e.substring(0,v);v=n(e=e.substring(v),d=d.substring(v));var w=e.substring(e.length-v),x=function(e,l){if(!e)return[[1,l]];if(!l)return[[-1,e]];var s,o=e.length>l.length?e:l,a=e.length>l.length?l:e,c=o.indexOf(a);if(-1!==c)return s=[[1,o.substring(0,c)],[0,a],[1,o.substring(c+a.length)]],e.length>l.length&&(s[0][0]=s[2][0]=-1),s;if(1===a.length)return[[-1,e],[1,l]];var h=function(e,t){var r=e.length>t.length?e:t,l=e.length>t.length?t:e;if(r.length<4||2*l.length<r.length)return null;function s(e,t,r){for(var l,s,o,a,c=e.substring(r,r+Math.floor(e.length/4)),h=-1,u="";-1!==(h=t.indexOf(c,h+1));){var d=i(e.substring(r),t.substring(h)),p=n(e.substring(0,r),t.substring(0,h));u.length<p+d&&(u=t.substring(h-p,h)+t.substring(h,h+d),l=e.substring(0,r-p),s=e.substring(r+d),o=t.substring(0,h-p),a=t.substring(h+d))}return 2*u.length>=e.length?[l,s,o,a,u]:null}var o,a,c,h,u,d=s(r,l,Math.ceil(r.length/4)),p=s(r,l,Math.ceil(r.length/2));return d||p?(o=p?d&&d[4].length>p[4].length?d:p:d,e.length>t.length?(a=o[0],c=o[1],h=o[2],u=o[3]):(h=o[0],u=o[1],a=o[2],c=o[3]),[a,c,h,u,o[4]]):null}(e,l);if(h){var u=h[0],d=h[1],p=h[2],f=h[3],g=h[4],b=t(u,p),m=t(d,f);return b.concat([[0,g]],m)}return function(e,t){for(var i=e.length,l=t.length,n=Math.ceil((i+l)/2),s=2*n,o=Array(s),a=Array(s),c=0;c<s;c++)o[c]=-1,a[c]=-1;o[n+1]=0,a[n+1]=0;for(var h=i-l,u=h%2!=0,d=0,p=0,f=0,g=0,b=0;b<n;b++){for(var m=-b+d;m<=b-p;m+=2){for(var v=n+m,y=(x=m===-b||m!==b&&o[v-1]<o[v+1]?o[v+1]:o[v-1]+1)-m;x<i&&y<l&&e.charAt(x)===t.charAt(y);)x++,y++;if(o[v]=x,x>i)p+=2;else if(y>l)d+=2;else if(u&&(C=n+h-m)>=0&&C<s&&-1!==a[C]&&x>=(k=i-a[C]))return r(e,t,x,y)}for(var w=-b+f;w<=b-g;w+=2){for(var x,k,C=n+w,_=(k=w===-b||w!==b&&a[C-1]<a[C+1]?a[C+1]:a[C-1]+1)-w;k<i&&_<l&&e.charAt(i-k-1)===t.charAt(l-_-1);)k++,_++;if(a[C]=k,k>i)g+=2;else if(_>l)f+=2;else if(!u&&(v=n+h-w)>=0&&v<s&&-1!==o[v]&&(y=n+(x=o[v])-v,x>=(k=i-k)))return r(e,t,x,y)}}return[[-1,e],[1,t]]}(e,l)}(e=e.substring(0,e.length-v),d=d.substring(0,d.length-v));return y&&x.unshift([0,y]),w&&x.push([0,w]),u(x,g),f&&function(e){for(var t=!1,r=[],i=0,d=null,p=0,f=0,g=0,b=0,m=0;p<e.length;)0==e[p][0]?(r[i++]=p,f=b,g=m,b=0,m=0,d=e[p][1]):(1==e[p][0]?b+=e[p][1].length:m+=e[p][1].length,d&&d.length<=Math.max(f,g)&&d.length<=Math.max(b,m)&&(e.splice(r[i-1],0,[-1,d]),e[r[i-1]+1][0]=1,i--,p=--i>0?r[i-1]:-1,f=0,g=0,b=0,m=0,d=null,t=!0)),p++;for(t&&u(e),function(e){function t(e,t){if(!e||!t)return 6;var r=e.charAt(e.length-1),i=t.charAt(0),l=r.match(s),n=i.match(s),u=l&&r.match(o),d=n&&i.match(o),p=u&&r.match(a),f=d&&i.match(a),g=p&&e.match(c),b=f&&t.match(h);return g||b?5:p||f?4:l&&!u&&d?3:u||d?2:l||n?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var i=e[r-1][1],l=e[r][1],u=e[r+1][1],d=n(i,l);if(d){var p=l.substring(l.length-d);i=i.substring(0,i.length-d),l=p+l.substring(0,l.length-d),u=p+u}for(var f=i,g=l,b=u,m=t(i,l)+t(l,u);l.charAt(0)===u.charAt(0);){i+=l.charAt(0),l=l.substring(1)+u.charAt(0),u=u.substring(1);var v=t(i,l)+t(l,u);v>=m&&(m=v,f=i,g=l,b=u)}e[r-1][1]!=f&&(f?e[r-1][1]=f:(e.splice(r-1,1),r--),e[r][1]=g,b?e[r+1][1]=b:(e.splice(r+1,1),r--))}r++}}(e),p=1;p<e.length;){if(-1==e[p-1][0]&&1==e[p][0]){var v=e[p-1][1],y=e[p][1],w=l(v,y),x=l(y,v);w>=x?(w>=v.length/2||w>=y.length/2)&&(e.splice(p,0,[0,y.substring(0,w)]),e[p-1][1]=v.substring(0,v.length-w),e[p+1][1]=y.substring(w),p++):(x>=v.length/2||x>=y.length/2)&&(e.splice(p,0,[0,v.substring(0,x)]),e[p-1][0]=1,e[p-1][1]=y.substring(0,y.length-x),e[p+1][0]=-1,e[p+1][1]=v.substring(x),p++),p++}p++}}(x),x}function r(e,r,i,l){var n=e.substring(0,i),s=r.substring(0,l),o=e.substring(i),a=r.substring(l),c=t(n,s),h=t(o,a);return c.concat(h)}function i(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var r=0,i=Math.min(e.length,t.length),l=i,n=0;r<l;)e.substring(n,l)==t.substring(n,l)?n=r=l:i=l,l=Math.floor((i-r)/2+r);return d(e.charCodeAt(l-1))&&l--,l}function l(e,t){var r=e.length,i=t.length;if(0==r||0==i)return 0;r>i?e=e.substring(r-i):r<i&&(t=t.substring(0,r));var l=Math.min(r,i);if(e==t)return l;for(var n=0,s=1;;){var o=e.substring(l-s),a=t.indexOf(o);if(-1==a)return n;s+=a,0!=a&&e.substring(l-s)!=t.substring(0,s)||(n=s,s++)}}function n(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var r=0,i=Math.min(e.length,t.length),l=i,n=0;r<l;)e.substring(e.length-l,e.length-n)==t.substring(t.length-l,t.length-n)?n=r=l:i=l,l=Math.floor((i-r)/2+r);return p(e.charCodeAt(e.length-l))&&l--,l}var s=/[^a-zA-Z0-9]/,o=/\s/,a=/[\r\n]/,c=/\n\r?\n$/,h=/^\r?\n\r?\n/;function u(e,t){e.push([0,""]);for(var r,l=0,s=0,o=0,a="",c="";l<e.length;)if(l<e.length-1&&!e[l][1])e.splice(l,1);else switch(e[l][0]){case 1:o++,c+=e[l][1],l++;break;case -1:s++,a+=e[l][1],l++;break;case 0:var h=l-o-s-1;if(t){if(h>=0&&g(e[h][1])){var d=e[h][1].slice(-1);if(e[h][1]=e[h][1].slice(0,-1),a=d+a,c=d+c,!e[h][1]){e.splice(h,1),l--;var p=h-1;e[p]&&1===e[p][0]&&(o++,c=e[p][1]+c,p--),e[p]&&-1===e[p][0]&&(s++,a=e[p][1]+a,p--),h=p}}f(e[l][1])&&(d=e[l][1].charAt(0),e[l][1]=e[l][1].slice(1),a+=d,c+=d)}if(l<e.length-1&&!e[l][1]){e.splice(l,1);break}if(a.length>0||c.length>0){a.length>0&&c.length>0&&(0!==(r=i(c,a))&&(h>=0?e[h][1]+=c.substring(0,r):(e.splice(0,0,[0,c.substring(0,r)]),l++),c=c.substring(r),a=a.substring(r)),0!==(r=n(c,a))&&(e[l][1]=c.substring(c.length-r)+e[l][1],c=c.substring(0,c.length-r),a=a.substring(0,a.length-r)));var b=o+s;0===a.length&&0===c.length?(e.splice(l-b,b),l-=b):0===a.length?(e.splice(l-b,b,[1,c]),l=l-b+1):0===c.length?(e.splice(l-b,b,[-1,a]),l=l-b+1):(e.splice(l-b,b,[-1,a],[1,c]),l=l-b+2)}0!==l&&0===e[l-1][0]?(e[l-1][1]+=e[l][1],e.splice(l,1)):l++,o=0,s=0,a="",c=""}""===e[e.length-1][1]&&e.pop();var m=!1;for(l=1;l<e.length-1;)0===e[l-1][0]&&0===e[l+1][0]&&(e[l][1].substring(e[l][1].length-e[l-1][1].length)===e[l-1][1]?(e[l][1]=e[l-1][1]+e[l][1].substring(0,e[l][1].length-e[l-1][1].length),e[l+1][1]=e[l-1][1]+e[l+1][1],e.splice(l-1,1),m=!0):e[l][1].substring(0,e[l+1][1].length)==e[l+1][1]&&(e[l-1][1]+=e[l+1][1],e[l][1]=e[l][1].substring(e[l+1][1].length)+e[l+1][1],e.splice(l+1,1),m=!0)),l++;m&&u(e,t)}function d(e){return e>=55296&&e<=56319}function p(e){return e>=56320&&e<=57343}function f(e){return p(e.charCodeAt(0))}function g(e){return d(e.charCodeAt(e.length-1))}function b(e,t,r,i){return g(e)||f(i)?null:function(e){for(var t=[],r=0;r<e.length;r++)e[r][1].length>0&&t.push(e[r]);return t}([[0,e],[-1,t],[1,r],[0,i]])}function m(e,r,i,l){return t(e,r,i,l,!0)}m.INSERT=1,m.DELETE=-1,m.EQUAL=0,e.exports=m},861:function(e,t,r){e=r.nmd(e);var i="__lodash_hash_undefined__",l="[object Arguments]",n="[object Boolean]",s="[object Date]",o="[object Function]",a="[object GeneratorFunction]",c="[object Map]",h="[object Number]",u="[object Object]",d="[object Promise]",p="[object RegExp]",f="[object Set]",g="[object String]",b="[object Symbol]",m="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",k="[object Int8Array]",C="[object Int16Array]",_="[object Int32Array]",T="[object Uint8Array]",N="[object Uint8ClampedArray]",A="[object Uint16Array]",L="[object Uint32Array]",S=/\w*$/,E=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,M={};M[l]=M["[object Array]"]=M[v]=M[y]=M[n]=M[s]=M[w]=M[x]=M[k]=M[C]=M[_]=M[c]=M[h]=M[u]=M[p]=M[f]=M[g]=M[b]=M[T]=M[N]=M[A]=M[L]=!0,M["[object Error]"]=M[o]=M[m]=!1;var q="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,B="object"==typeof self&&self&&self.Object===Object&&self,O=q||B||Function("return this")(),R=t&&!t.nodeType&&t,P=R&&e&&!e.nodeType&&e,I=P&&P.exports===R;function D(e,t){return e.set(t[0],t[1]),e}function z(e,t){return e.add(t),e}function H(e,t,r,i){var l=-1,n=e?e.length:0;for(i&&n&&(r=e[++l]);++l<n;)r=t(r,e[l],l,e);return r}function F(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function U(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function V(e,t){return function(r){return e(t(r))}}function W(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var $,G=Array.prototype,K=Function.prototype,Y=Object.prototype,Z=O["__core-js_shared__"],X=($=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"",J=K.toString,Q=Y.hasOwnProperty,ee=Y.toString,et=RegExp("^"+J.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=I?O.Buffer:void 0,ei=O.Symbol,el=O.Uint8Array,en=V(Object.getPrototypeOf,Object),es=Object.create,eo=Y.propertyIsEnumerable,ea=G.splice,ec=Object.getOwnPropertySymbols,eh=er?er.isBuffer:void 0,eu=V(Object.keys,Object),ed=eB(O,"DataView"),ep=eB(O,"Map"),ef=eB(O,"Promise"),eg=eB(O,"Set"),eb=eB(O,"WeakMap"),em=eB(Object,"create"),ev=eI(ed),ey=eI(ep),ew=eI(ef),ex=eI(eg),ek=eI(eb),eC=ei?ei.prototype:void 0,e_=eC?eC.valueOf:void 0;function eT(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eN(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eA(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eL(e){this.__data__=new eN(e)}function eS(e,t,r){var i=e[t];Q.call(e,t)&&eD(i,r)&&(void 0!==r||t in e)||(e[t]=r)}function eE(e,t){for(var r=e.length;r--;)if(eD(e[r][0],t))return r;return -1}function ej(e){var t=new e.constructor(e.byteLength);return new el(t).set(new el(e)),t}function eM(e,t,r,i){r||(r={});for(var l=-1,n=t.length;++l<n;){var s=t[l],o=i?i(r[s],e[s],s,r,e):void 0;eS(r,s,void 0===o?e[s]:o)}return r}function eq(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function eB(e,t){var r,i=null==e?void 0:e[t];return!(!eV(r=i)||X&&X in r)&&(eU(r)||F(r)?et:E).test(eI(r))?i:void 0}eT.prototype.clear=function(){this.__data__=em?em(null):{}},eT.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},eT.prototype.get=function(e){var t=this.__data__;if(em){var r=t[e];return r===i?void 0:r}return Q.call(t,e)?t[e]:void 0},eT.prototype.has=function(e){var t=this.__data__;return em?void 0!==t[e]:Q.call(t,e)},eT.prototype.set=function(e,t){return this.__data__[e]=em&&void 0===t?i:t,this},eN.prototype.clear=function(){this.__data__=[]},eN.prototype.delete=function(e){var t=this.__data__,r=eE(t,e);return!(r<0||(r==t.length-1?t.pop():ea.call(t,r,1),0))},eN.prototype.get=function(e){var t=this.__data__,r=eE(t,e);return r<0?void 0:t[r][1]},eN.prototype.has=function(e){return eE(this.__data__,e)>-1},eN.prototype.set=function(e,t){var r=this.__data__,i=eE(r,e);return i<0?r.push([e,t]):r[i][1]=t,this},eA.prototype.clear=function(){this.__data__={hash:new eT,map:new(ep||eN),string:new eT}},eA.prototype.delete=function(e){return eq(this,e).delete(e)},eA.prototype.get=function(e){return eq(this,e).get(e)},eA.prototype.has=function(e){return eq(this,e).has(e)},eA.prototype.set=function(e,t){return eq(this,e).set(e,t),this},eL.prototype.clear=function(){this.__data__=new eN},eL.prototype.delete=function(e){return this.__data__.delete(e)},eL.prototype.get=function(e){return this.__data__.get(e)},eL.prototype.has=function(e){return this.__data__.has(e)},eL.prototype.set=function(e,t){var r=this.__data__;if(r instanceof eN){var i=r.__data__;if(!ep||i.length<199)return i.push([e,t]),this;r=this.__data__=new eA(i)}return r.set(e,t),this};var eO=ec?V(ec,Object):function(){return[]},eR=function(e){return ee.call(e)};function eP(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Y)}function eI(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eD(e,t){return e===t||e!=e&&t!=t}(ed&&eR(new ed(new ArrayBuffer(1)))!=y||ep&&eR(new ep)!=c||ef&&eR(ef.resolve())!=d||eg&&eR(new eg)!=f||eb&&eR(new eb)!=m)&&(eR=function(e){var t=ee.call(e),r=t==u?e.constructor:void 0,i=r?eI(r):void 0;if(i)switch(i){case ev:return y;case ey:return c;case ew:return d;case ex:return f;case ek:return m}return t});var ez=Array.isArray;function eH(e){var t;return null!=e&&"number"==typeof(t=e.length)&&t>-1&&t%1==0&&t<=0x1fffffffffffff&&!eU(e)}var eF=eh||function(){return!1};function eU(e){var t=eV(e)?ee.call(e):"";return t==o||t==a}function eV(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function eW(e){return eH(e)?function(e,t){var r,i=ez(e)||e&&"object"==typeof e&&eH(e)&&Q.call(e,"callee")&&(!eo.call(e,"callee")||ee.call(e)==l)?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],n=i.length,s=!!n;for(var o in e)!Q.call(e,o)||s&&("length"==o||(r=null==(r=n)?0x1fffffffffffff:r)&&("number"==typeof o||j.test(o))&&o>-1&&o%1==0&&o<r)||i.push(o);return i}(e):function(e){if(!eP(e))return eu(e);var t=[];for(var r in Object(e))Q.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return function e(t,r,i,d,m,E,j){if(d&&(q=E?d(t,m,E,j):d(t)),void 0!==q)return q;if(!eV(t))return t;var q,B=ez(t);if(B){if(O=t.length,R=t.constructor(O),O&&"string"==typeof t[0]&&Q.call(t,"index")&&(R.index=t.index,R.input=t.input),q=R,!r){var O,R,P=q,I=-1,V=t.length;for(P||(P=Array(V));++I<V;)P[I]=t[I];return P}}else{var $,G,K,Y,Z=eR(t),X=Z==o||Z==a;if(eF(t)){if(r)return t.slice();var J=new t.constructor(t.length);return t.copy(J),J}if(Z==u||Z==l||X&&!E){if(F(t))return E?t:{};if(q="function"!=typeof($=X?{}:t).constructor||eP($)?{}:eV(G=en($))?es(G):{},!r)return Y=(K=q)&&eM(t,eW(t),K),eM(t,eO(t),Y)}else{if(!M[Z])return E?t:{};q=function(e,t,r,i){var l,o,a,u=e.constructor;switch(t){case v:return ej(e);case n:case s:return new u(+e);case y:return l=i?ej(e.buffer):e.buffer,new e.constructor(l,e.byteOffset,e.byteLength);case w:case x:case k:case C:case _:case T:case N:case A:case L:return o=i?ej(e.buffer):e.buffer,new e.constructor(o,e.byteOffset,e.length);case c:return H(i?r(U(e),!0):U(e),D,new e.constructor);case h:case g:return new u(e);case p:return(a=new e.constructor(e.source,S.exec(e))).lastIndex=e.lastIndex,a;case f:return H(i?r(W(e),!0):W(e),z,new e.constructor);case b:return e_?Object(e_.call(e)):{}}}(t,Z,e,r)}}j||(j=new eL);var ee=j.get(t);if(ee)return ee;if(j.set(t,q),!B)var et,er=i?(et=eW(t),ez(t)?et:function(e,t){for(var r=-1,i=t.length,l=e.length;++r<i;)e[l+r]=t[r];return e}(et,eO(t))):eW(t);return function(e,t){for(var r=-1,i=e?e.length:0;++r<i&&!1!==t(e[r],r););}(er||t,function(l,n){er&&(l=t[n=l]),eS(q,n,e(l,r,i,d,n,t,j))}),q}(e,!0,!0)}},842:function(e,t,r){e=r.nmd(e);var i="__lodash_hash_undefined__",l="[object Arguments]",n="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",c="[object Function]",h="[object Map]",u="[object Number]",d="[object Object]",p="[object Promise]",f="[object RegExp]",g="[object Set]",b="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",w=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,k={};k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k[l]=k[n]=k[v]=k[s]=k[y]=k[o]=k[a]=k[c]=k[h]=k[u]=k[d]=k[f]=k[g]=k[b]=k[m]=!1;var C="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,_="object"==typeof self&&self&&self.Object===Object&&self,T=C||_||Function("return this")(),N=t&&!t.nodeType&&t,A=N&&e&&!e.nodeType&&e,L=A&&A.exports===N,S=L&&C.process,E=function(){try{return S&&S.binding&&S.binding("util")}catch(e){}}(),j=E&&E.isTypedArray;function M(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function q(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var B,O,R,P=Array.prototype,I=Function.prototype,D=Object.prototype,z=T["__core-js_shared__"],H=I.toString,F=D.hasOwnProperty,U=(B=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",V=D.toString,W=RegExp("^"+H.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=L?T.Buffer:void 0,G=T.Symbol,K=T.Uint8Array,Y=D.propertyIsEnumerable,Z=P.splice,X=G?G.toStringTag:void 0,J=Object.getOwnPropertySymbols,Q=$?$.isBuffer:void 0,ee=(O=Object.keys,R=Object,function(e){return O(R(e))}),et=eT(T,"DataView"),er=eT(T,"Map"),ei=eT(T,"Promise"),el=eT(T,"Set"),en=eT(T,"WeakMap"),es=eT(Object,"create"),eo=eL(et),ea=eL(er),ec=eL(ei),eh=eL(el),eu=eL(en),ed=G?G.prototype:void 0,ep=ed?ed.valueOf:void 0;function ef(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eb(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function em(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new eb;++t<r;)this.add(e[t])}function ev(e){var t=this.__data__=new eg(e);this.size=t.size}function ey(e,t){for(var r=e.length;r--;)if(eS(e[r][0],t))return r;return -1}function ew(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?function(e){var t=F.call(e,X),r=e[X];try{e[X]=void 0;var i=!0}catch(e){}var l=V.call(e);return i&&(t?e[X]=r:delete e[X]),l}(e):V.call(e)}function ex(e){return eR(e)&&ew(e)==l}function ek(e,t,r,i,l,n){var s=1&r,o=e.length,a=t.length;if(o!=a&&!(s&&a>o))return!1;var c=n.get(e);if(c&&n.get(t))return c==t;var h=-1,u=!0,d=2&r?new em:void 0;for(n.set(e,t),n.set(t,e);++h<o;){var p=e[h],f=t[h];if(i)var g=s?i(f,p,h,t,e,n):i(p,f,h,e,t,n);if(void 0!==g){if(g)continue;u=!1;break}if(d){if(!function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}(t,function(e,t){if(!d.has(t)&&(p===e||l(p,e,r,i,n)))return d.push(t)})){u=!1;break}}else if(p!==f&&!l(p,f,r,i,n)){u=!1;break}}return n.delete(e),n.delete(t),u}function eC(e){var t;return t=eI(e),ej(e)?t:function(e,t){for(var r=-1,i=t.length,l=e.length;++r<i;)e[l+r]=t[r];return e}(t,eN(e))}function e_(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function eT(e,t){var r=null==e?void 0:e[t];return!(!eO(r)||U&&U in r)&&(eq(r)?W:w).test(eL(r))?r:void 0}ef.prototype.clear=function(){this.__data__=es?es(null):{},this.size=0},ef.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},ef.prototype.get=function(e){var t=this.__data__;if(es){var r=t[e];return r===i?void 0:r}return F.call(t,e)?t[e]:void 0},ef.prototype.has=function(e){var t=this.__data__;return es?void 0!==t[e]:F.call(t,e)},ef.prototype.set=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=es&&void 0===t?i:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,r=ey(t,e);return!(r<0||(r==t.length-1?t.pop():Z.call(t,r,1),--this.size,0))},eg.prototype.get=function(e){var t=this.__data__,r=ey(t,e);return r<0?void 0:t[r][1]},eg.prototype.has=function(e){return ey(this.__data__,e)>-1},eg.prototype.set=function(e,t){var r=this.__data__,i=ey(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},eb.prototype.clear=function(){this.size=0,this.__data__={hash:new ef,map:new(er||eg),string:new ef}},eb.prototype.delete=function(e){var t=e_(this,e).delete(e);return this.size-=!!t,t},eb.prototype.get=function(e){return e_(this,e).get(e)},eb.prototype.has=function(e){return e_(this,e).has(e)},eb.prototype.set=function(e,t){var r=e_(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this},em.prototype.add=em.prototype.push=function(e){return this.__data__.set(e,i),this},em.prototype.has=function(e){return this.__data__.has(e)},ev.prototype.clear=function(){this.__data__=new eg,this.size=0},ev.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ev.prototype.get=function(e){return this.__data__.get(e)},ev.prototype.has=function(e){return this.__data__.has(e)},ev.prototype.set=function(e,t){var r=this.__data__;if(r instanceof eg){var i=r.__data__;if(!er||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new eb(i)}return r.set(e,t),this.size=r.size,this};var eN=J?function(e){return null==e?[]:function(t,r){for(var i=-1,l=null==t?0:t.length,n=0,s=[];++i<l;){var o=t[i];Y.call(e,o)&&(s[n++]=o)}return s}(J(e=Object(e)))}:function(){return[]},eA=ew;function eL(e){if(null!=e){try{return H.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eS(e,t){return e===t||e!=e&&t!=t}(et&&eA(new et(new ArrayBuffer(1)))!=y||er&&eA(new er)!=h||ei&&eA(ei.resolve())!=p||el&&eA(new el)!=g||en&&eA(new en)!=m)&&(eA=function(e){var t=ew(e),r=t==d?e.constructor:void 0,i=r?eL(r):"";if(i)switch(i){case eo:return y;case ea:return h;case ec:return p;case eh:return g;case eu:return m}return t});var eE=ex(function(){return arguments}())?ex:function(e){return eR(e)&&F.call(e,"callee")&&!Y.call(e,"callee")},ej=Array.isArray,eM=Q||function(){return!1};function eq(e){if(!eO(e))return!1;var t=ew(e);return t==c||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eB(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function eO(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eR(e){return null!=e&&"object"==typeof e}var eP=j?function(e){return j(e)}:function(e){return eR(e)&&eB(e.length)&&!!k[ew(e)]};function eI(e){return null!=e&&eB(e.length)&&!eq(e)?function(e,t){var r,i=ej(e),l=!i&&eE(e),n=!i&&!l&&eM(e),s=!i&&!l&&!n&&eP(e),o=i||l||n||s,a=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],c=a.length;for(var h in e)!F.call(e,h)||o&&("length"==h||n&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||(r=null==(r=c)?0x1fffffffffffff:r)&&("number"==typeof h||x.test(h))&&h>-1&&h%1==0&&h<r)||a.push(h);return a}(e):function(e){if(t=e&&e.constructor,e!==("function"==typeof t&&t.prototype||D))return ee(e);var t,r=[];for(var i in Object(e))F.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}e.exports=function(e,t){return function e(t,r,i,c,p){return t===r||(null!=t&&null!=r&&(eR(t)||eR(r))?function(e,t,r,i,c,p){var m=ej(e),w=ej(t),x=m?n:eA(e),k=w?n:eA(t),C=(x=x==l?d:x)==d,_=(k=k==l?d:k)==d,T=x==k;if(T&&eM(e)){if(!eM(t))return!1;m=!0,C=!1}if(T&&!C)return p||(p=new ev),m||eP(e)?ek(e,t,r,i,c,p):function(e,t,r,i,l,n,c){switch(r){case y:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case v:return!(e.byteLength!=t.byteLength||!n(new K(e),new K(t)));case s:case o:case u:return eS(+e,+t);case a:return e.name==t.name&&e.message==t.message;case f:case b:return e==t+"";case h:var d=M;case g:var p=1&i;if(d||(d=q),e.size!=t.size&&!p)break;var m=c.get(e);if(m)return m==t;i|=2,c.set(e,t);var w=ek(d(e),d(t),i,l,n,c);return c.delete(e),w;case"[object Symbol]":if(ep)return ep.call(e)==ep.call(t)}return!1}(e,t,x,r,i,c,p);if(!(1&r)){var N=C&&F.call(e,"__wrapped__"),A=_&&F.call(t,"__wrapped__");if(N||A){var L=N?e.value():e,S=A?t.value():t;return p||(p=new ev),c(L,S,r,i,p)}}return!!T&&(p||(p=new ev),function(e,t,r,i,l,n){var s=1&r,o=eC(e),a=o.length;if(a!=eC(t).length&&!s)return!1;for(var c=a;c--;){var h=o[c];if(!(s?h in t:F.call(t,h)))return!1}var u=n.get(e);if(u&&n.get(t))return u==t;var d=!0;n.set(e,t),n.set(t,e);for(var p=s;++c<a;){var f=e[h=o[c]],g=t[h];if(i)var b=s?i(g,f,h,t,e,n):i(f,g,h,e,t,n);if(!(void 0===b?f===g||l(f,g,r,i,n):b)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var m=e.constructor,v=t.constructor;m==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v||(d=!1)}return n.delete(e),n.delete(t),d}(e,t,r,i,c,p))}(t,r,i,c,e,p):t!=t&&r!=r)}(e,t)}},930:function(e,t,r){e=r.nmd(e);var i="__lodash_hash_undefined__",l="[object Arguments]",n="[object Function]",s="[object Object]",o=/^\[object .+?Constructor\]$/,a=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[l]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c[n]=c["[object Map]"]=c["[object Number]"]=c[s]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var h,u,d,p="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,f="object"==typeof self&&self&&self.Object===Object&&self,g=p||f||Function("return this")(),b=t&&!t.nodeType&&t,m=b&&e&&!e.nodeType&&e,v=m&&m.exports===b,y=v&&p.process,w=function(){try{return m&&m.require&&m.require("util").types||y&&y.binding&&y.binding("util")}catch(e){}}(),x=w&&w.isTypedArray,k=Array.prototype,C=Function.prototype,_=Object.prototype,T=g["__core-js_shared__"],N=C.toString,A=_.hasOwnProperty,L=(h=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",S=_.toString,E=N.call(Object),j=RegExp("^"+N.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=v?g.Buffer:void 0,q=g.Symbol,B=g.Uint8Array,O=(M&&M.allocUnsafe,u=Object.getPrototypeOf,d=Object,function(e){return u(d(e))}),R=Object.create,P=_.propertyIsEnumerable,I=k.splice,D=q?q.toStringTag:void 0,z=function(){try{var e=ei(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),H=M?M.isBuffer:void 0,F=Math.max,U=Date.now,V=ei(g,"Map"),W=ei(Object,"create"),$=function(){function e(){}return function(t){if(!eg(t))return{};if(R)return R(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function G(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function K(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Z(e){var t=this.__data__=new K(e);this.size=t.size}function X(e,t,r){(void 0===r||ea(e[t],r))&&(void 0!==r||t in e)||Q(e,t,r)}function J(e,t){for(var r=e.length;r--;)if(ea(e[r][0],t))return r;return -1}function Q(e,t,r){"__proto__"==t&&z?z(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ee(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":D&&D in Object(e)?function(e){var t=A.call(e,D),r=e[D];try{e[D]=void 0;var i=!0}catch(e){}var l=S.call(e);return i&&(t?e[D]=r:delete e[D]),l}(e):S.call(e)}function et(e){return eb(e)&&ee(e)==l}function er(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function ei(e,t){var r=null==e?void 0:e[t];return!(!eg(r)||L&&L in r)&&(ep(r)?j:o).test(function(e){if(null!=e){try{return N.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(r))?r:void 0}function el(e,t){var r=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==r||"symbol"!=r&&a.test(e))&&e>-1&&e%1==0&&e<t}function en(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_)}function es(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}G.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},G.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t},G.prototype.get=function(e){var t=this.__data__;if(W){var r=t[e];return r===i?void 0:r}return A.call(t,e)?t[e]:void 0},G.prototype.has=function(e){var t=this.__data__;return W?void 0!==t[e]:A.call(t,e)},G.prototype.set=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=W&&void 0===t?i:t,this},K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(e){var t=this.__data__,r=J(t,e);return!(r<0||(r==t.length-1?t.pop():I.call(t,r,1),--this.size,0))},K.prototype.get=function(e){var t=this.__data__,r=J(t,e);return r<0?void 0:t[r][1]},K.prototype.has=function(e){return J(this.__data__,e)>-1},K.prototype.set=function(e,t){var r=this.__data__,i=J(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(V||K),string:new G}},Y.prototype.delete=function(e){var t=er(this,e).delete(e);return this.size-=!!t,t},Y.prototype.get=function(e){return er(this,e).get(e)},Y.prototype.has=function(e){return er(this,e).has(e)},Y.prototype.set=function(e,t){var r=er(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this},Z.prototype.clear=function(){this.__data__=new K,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var r=this.__data__;if(r instanceof K){var i=r.__data__;if(!V||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Y(i)}return r.set(e,t),this.size=r.size,this};var eo=(ey=z?function(e,t){return z(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:eS,ew=0,ex=0,function(){var e=U(),t=16-(e-ex);if(ex=e,t>0){if(++ew>=800)return arguments[0]}else ew=0;return ey.apply(void 0,arguments)});function ea(e,t){return e===t||e!=e&&t!=t}var ec=et(function(){return arguments}())?et:function(e){return eb(e)&&A.call(e,"callee")&&!P.call(e,"callee")},eh=Array.isArray;function eu(e){return null!=e&&ef(e.length)&&!ep(e)}var ed=H||function(){return!1};function ep(e){if(!eg(e))return!1;var t=ee(e);return t==n||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ef(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}function eg(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eb(e){return null!=e&&"object"==typeof e}var em=x?function(e){return x(e)}:function(e){return eb(e)&&ef(e.length)&&!!c[ee(e)]};function ev(e){return eu(e)?function(e,t){var r=eh(e),i=!r&&ec(e),l=!r&&!i&&ed(e),n=!r&&!i&&!l&&em(e),s=r||i||l||n,o=s?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],a=o.length;for(var c in e)!t&&!A.call(e,c)||s&&("length"==c||l&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||el(c,a))||o.push(c);return o}(e,!0):function(e){if(!eg(e)){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var i=en(e),l=[];for(var n in e)("constructor"!=n||!i&&A.call(e,n))&&l.push(n);return l}(e)}var ey,ew,ex,ek,eC,e_,eT,eN,eA,eL=(eA=function(e,t,r){!function e(t,r,i,l,n){t!==r&&function(e,t,r){for(var i=-1,l=Object(e),n=r(e),s=n.length;s--;){var o=n[++i];if(!1===t(l[o],o,l))break}}(r,function(o,a){if(n||(n=new Z),eg(o))!function(e,t,r,i,l,n,o){var a=es(e,r),c=es(t,r),h=o.get(c);if(h)X(e,r,h);else{var u,d,p=n?n(a,c,r+"",e,t,o):void 0,f=void 0===p;if(f){var g=eh(c),b=!g&&ed(c),m=!g&&!b&&em(c);p=c,g||b||m?eh(a)?p=a:eb(a)&&eu(a)?p=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(a):b?(f=!1,p=c.slice()):m?(f=!1,new B(d=new(u=c.buffer).constructor(u.byteLength)).set(new B(u)),p=new c.constructor(d,c.byteOffset,c.length)):p=[]:function(e){if(!eb(e)||ee(e)!=s)return!1;var t=O(e);if(null===t)return!0;var r=A.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&N.call(r)==E}(c)||ec(c)?(p=a,ec(a)?p=function(e,t,r,i){var l=!r;r||(r={});for(var n=-1,s=t.length;++n<s;){var o=t[n],a=void 0;void 0===a&&(a=e[o]),l?Q(r,o,a):function(e,t,r){var i=e[t];A.call(e,t)&&ea(i,r)&&(void 0!==r||t in e)||Q(e,t,r)}(r,o,a)}return r}(a,ev(a)):eg(a)&&!ep(a)||(p="function"!=typeof c.constructor||en(c)?{}:$(O(c)))):f=!1}f&&(o.set(c,p),l(p,c,i,n,o),o.delete(c)),X(e,r,p)}}(t,r,a,i,e,l,n);else{var c=l?l(es(t,a),o,a+"",t,r,n):void 0;void 0===c&&(c=o),X(t,a,c)}},ev)}(e,t,r)},eo((e_=ek=function(e,t){var r=-1,i=t.length,l=i>1?t[i-1]:void 0,n=i>2?t[2]:void 0;for(l=eA.length>3&&"function"==typeof l?(i--,l):void 0,n&&function(e,t,r){if(!eg(r))return!1;var i=typeof t;return!!("number"==i?eu(r)&&el(t,r.length):"string"==i&&t in r)&&ea(r[t],e)}(t[0],t[1],n)&&(l=i<3?void 0:l,i=1),e=Object(e);++r<i;){var s=t[r];s&&eA(e,s,r)}return e},eT=eC,eN=eS,eT=F(void 0===eT?e_.length-1:eT,0),function(){for(var e=arguments,t=-1,r=F(e.length-eT,0),i=Array(r);++t<r;)i[t]=e[eT+t];t=-1;for(var l=Array(eT+1);++t<eT;)l[t]=e[t];return l[eT]=eN(i),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e_,this,l)}),ek+""));function eS(e){return e}e.exports=eL},382:function(e,t,r){"use strict";var i,l;Object.defineProperty(t,"__esModule",{value:!0});let n=r(861),s=r(842);(l=i||(i={})).compose=function(e={},t={},r=!1){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});let i=n(t);for(let l in r||(i=Object.keys(i).reduce((e,t)=>(null!=i[t]&&(e[t]=i[t]),e),{})),e)void 0!==e[l]&&void 0===t[l]&&(i[l]=e[l]);return Object.keys(i).length>0?i:void 0},l.diff=function(e={},t={}){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});let r=Object.keys(e).concat(Object.keys(t)).reduce((r,i)=>(s(e[i],t[i])||(r[i]=void 0===t[i]?null:t[i]),r),{});return Object.keys(r).length>0?r:void 0},l.invert=function(e={},t={}){e=e||{};let r=Object.keys(t).reduce((r,i)=>(t[i]!==e[i]&&void 0!==e[i]&&(r[i]=t[i]),r),{});return Object.keys(e).reduce((r,i)=>(e[i]!==t[i]&&void 0===t[i]&&(r[i]=null),r),r)},l.transform=function(e,t,r=!1){if("object"!=typeof e)return t;if("object"!=typeof t)return;if(!r)return t;let i=Object.keys(t).reduce((r,i)=>(void 0===e[i]&&(r[i]=t[i]),r),{});return Object.keys(i).length>0?i:void 0},t.default=i},32:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;let i=r(386),l=r(861),n=r(842),s=r(382);t.AttributeMap=s.default;let o=r(427);t.Op=o.default;let a=r(505);t.OpIterator=a.default;let c=(e,t)=>{if("object"!=typeof e||null===e)throw Error("cannot retain a "+typeof e);if("object"!=typeof t||null===t)throw Error("cannot retain a "+typeof t);let r=Object.keys(e)[0];if(!r||r!==Object.keys(t)[0])throw Error(`embed types not matched: ${r} != ${Object.keys(t)[0]}`);return[r,e[r],t[r]]};class h{constructor(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let t=this.handlers[e];if(!t)throw Error(`no handlers for embed type "${e}"`);return t}insert(e,t){let r={};return"string"==typeof e&&0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if("number"==typeof e&&e<=0)return this;let r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)}push(e){let t=this.ops.length,r=this.ops[t-1];if(e=l(e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(n(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&"number"==typeof e.retain&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let t=[],r=[];return this.forEach(i=>{(e(i)?t:r).push(i)}),[t,r]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce((e,t)=>t.insert?e+o.default.length(t):t.delete?e-t.delete:e,0)}length(){return this.reduce((e,t)=>e+o.default.length(t),0)}slice(e=0,t=1/0){let r=[],i=new a.default(this.ops),l=0;for(;l<t&&i.hasNext();){let n;l<e?n=i.next(e-l):(n=i.next(t-l),r.push(n)),l+=o.default.length(n)}return new h(r)}compose(e){let t=new a.default(this.ops),r=new a.default(e.ops),i=[],l=r.peek();if(null!=l&&"number"==typeof l.retain&&null==l.attributes){let e=l.retain;for(;"insert"===t.peekType()&&t.peekLength()<=e;)e-=t.peekLength(),i.push(t.next());l.retain-e>0&&r.next(l.retain-e)}let o=new h(i);for(;t.hasNext()||r.hasNext();)if("insert"===r.peekType())o.push(r.next());else if("delete"===t.peekType())o.push(t.next());else{let e=Math.min(t.peekLength(),r.peekLength()),i=t.next(e),l=r.next(e);if(l.retain){let a={};if("number"==typeof i.retain)a.retain="number"==typeof l.retain?e:l.retain;else if("number"==typeof l.retain)null==i.retain?a.insert=i.insert:a.retain=i.retain;else{let e=null==i.retain?"insert":"retain",[t,r,n]=c(i[e],l.retain),s=h.getHandler(t);a[e]={[t]:s.compose(r,n,"retain"===e)}}let u=s.default.compose(i.attributes,l.attributes,"number"==typeof i.retain);if(u&&(a.attributes=u),o.push(a),!r.hasNext()&&n(o.ops[o.ops.length-1],a)){let e=new h(t.rest());return o.concat(e).chop()}}else"number"==typeof l.delete&&("number"==typeof i.retain||"object"==typeof i.retain&&null!==i.retain)&&o.push(l)}return o.chop()}concat(e){let t=new h(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t}diff(e,t){if(this.ops===e.ops)return new h;let r=[this,e].map(t=>t.map(r=>{if(null!=r.insert)return"string"==typeof r.insert?r.insert:"\0";throw Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")),l=new h,o=i(r[0],r[1],t,!0),c=new a.default(this.ops),u=new a.default(e.ops);return o.forEach(e=>{let t=e[1].length;for(;t>0;){let r=0;switch(e[0]){case i.INSERT:r=Math.min(u.peekLength(),t),l.push(u.next(r));break;case i.DELETE:r=Math.min(t,c.peekLength()),c.next(r),l.delete(r);break;case i.EQUAL:r=Math.min(c.peekLength(),u.peekLength(),t);let o=c.next(r),a=u.next(r);n(o.insert,a.insert)?l.retain(r,s.default.diff(o.attributes,a.attributes)):l.push(a).delete(r)}t-=r}}),l.chop()}eachLine(e,t="\n"){let r=new a.default(this.ops),i=new h,l=0;for(;r.hasNext();){if("insert"!==r.peekType())return;let n=r.peek(),s=o.default.length(n)-r.peekLength(),a="string"==typeof n.insert?n.insert.indexOf(t,s)-s:-1;if(a<0)i.push(r.next());else if(a>0)i.push(r.next(a));else{if(!1===e(i,r.next(1).attributes||{},l))return;l+=1,i=new h}}i.length()>0&&e(i,{},l)}invert(e){let t=new h;return this.reduce((r,i)=>{if(i.insert)t.delete(o.default.length(i));else{if("number"==typeof i.retain&&null==i.attributes)return t.retain(i.retain),r+i.retain;if(i.delete||"number"==typeof i.retain){let l=i.delete||i.retain;return e.slice(r,r+l).forEach(e=>{i.delete?t.push(e):i.retain&&i.attributes&&t.retain(o.default.length(e),s.default.invert(i.attributes,e.attributes))}),r+l}if("object"==typeof i.retain&&null!==i.retain){let l=e.slice(r,r+1),n=new a.default(l.ops).next(),[o,u,d]=c(i.retain,n.insert),p=h.getHandler(o);return t.retain({[o]:p.invert(u,d)},s.default.invert(i.attributes,n.attributes)),r+1}}return r},0),t.chop()}transform(e,t=!1){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);let r=new a.default(this.ops),i=new a.default(e.ops),l=new h;for(;r.hasNext()||i.hasNext();)if("insert"===r.peekType()&&(t||"insert"!==i.peekType()))l.retain(o.default.length(r.next()));else if("insert"===i.peekType())l.push(i.next());else{let e=Math.min(r.peekLength(),i.peekLength()),n=r.next(e),o=i.next(e);if(n.delete)continue;if(o.delete)l.push(o);else{let r=n.retain,i=o.retain,a="object"==typeof i&&null!==i?i:e;if("object"==typeof r&&null!==r&&"object"==typeof i&&null!==i){let e=Object.keys(r)[0];if(e===Object.keys(i)[0]){let l=h.getHandler(e);l&&(a={[e]:l.transform(r[e],i[e],t)})}}l.retain(a,s.default.transform(n.attributes,o.attributes,t))}}return l.chop()}transformPosition(e,t=!1){t=!!t;let r=new a.default(this.ops),i=0;for(;r.hasNext()&&i<=e;){let l=r.peekLength(),n=r.peekType();r.next(),"delete"!==n?("insert"===n&&(i<e||!t)&&(e+=l),i+=l):e-=Math.min(l,e-i)}return e}}h.Op=o.default,h.OpIterator=a.default,h.AttributeMap=s.default,h.handlers={},t.default=h,e.exports=h,e.exports.default=h},427:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),(r||(r={})).length=function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"object"==typeof e.retain&&null!==e.retain?1:"string"==typeof e.insert?e.insert.length:1},t.default=r},505:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(427);t.default=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let t=this.ops[this.index];if(t){let r=this.offset,l=i.default.length(t);if(e>=l-r?(e=l-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};{let i={};return t.attributes&&(i.attributes=t.attributes),"number"==typeof t.retain?i.retain=e:"object"==typeof t.retain&&null!==t.retain?i.retain=t.retain:"string"==typeof t.insert?i.insert=t.insert.substr(r,e):i.insert=t.insert,i}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?i.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?"number"==typeof e.delete?"delete":"number"==typeof e.retain||"object"==typeof e.retain&&null!==e.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{let e=this.offset,t=this.index,r=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(i)}}return[]}}},912:function(t){"use strict";t.exports=e}},r={};function i(e){var l=r[e];if(void 0!==l)return l.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return t[e](n,n.exports,i),n.loaded=!0,n.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var l={};return function(){"use strict";let e;i.d(l,{default:function(){return rx}});var t,r=i(912),n=i.n(r),s=i(32),o=i.n(s),a='<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36 19H12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M36 39H12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',c='<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M34 19H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M34 39H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',h='<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 19H14" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 39H14" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>';let u=["data-row","width","height","colspan","rowspan","style"],d={"border-style":"none","border-color":"","border-width":"","background-color":"",width:"",height:"",padding:"","text-align":"left","vertical-align":"middle"},p=["border-style","border-color","border-width","background-color","width","height","padding","text-align","vertical-align"],f=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","currentcolor","currentcolor","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],g=["border-style","border-color","border-width","background-color","width","height","align"],b=n().import("formats/list"),m=n().import("blots/container"),v=["colspan","rowspan"];class y extends m{static create(e){let t=super.create();for(let t of v)"1"==e[t]&&delete e[t];for(let r of Object.keys(e))"data-row"===r?t.setAttribute(r,e[r]):"cellId"===r?t.setAttribute("data-cell",e[r]):t.setAttribute(`data-${r}`,e[r]);return t}format(e,t){return this.wrap(e,t)}static formats(e){let t=u.reduce((t,r)=>{let i=r.includes("data")?r:`data-${r}`;return e.hasAttribute(i)&&(t[r]=e.getAttribute(i)),t},{});for(let r of(t.cellId=e.getAttribute("data-cell"),v))t[r]||(t[r]="1");return t}formats(){let e=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:e}}}y.blotName="table-list-container",y.className="table-list-container",y.tagName="OL";class w extends b{format(e,t,r){let i=this.formats()[this.statics.blotName];if("list"===e){let[e,l]=this.getCellFormats(this.parent);if(!t||t===i)return this.setReplace(r,e),this.replaceWith(W.blotName,l);if(t!==i)return this.replaceWith(this.statics.blotName,t)}else if(e===y.blotName){"string"==typeof t&&(t={cellId:t});let[r,i]=this.getCorrectCellFormats(t);this.wrap($.blotName,r),this.wrap(e,Object.assign(Object.assign({},r),{cellId:i}))}else{if("header"===e){let[e,i]=this.getCellFormats(this.parent);return this.setReplace(r,e),this.replaceWith("table-header",{cellId:i,value:t})}if(e===$.blotName){let r=this.getListContainer(this.parent);if(!r)return;let i=r.formats()[r.statics.blotName];this.wrap(e,t),this.wrap(y.blotName,Object.assign(Object.assign({},i),t))}else if(e!==this.statics.blotName||t)super.format(e,t);else{let[,e]=this.getCellFormats(this.parent);this.replaceWith(W.blotName,e)}}}getCellFormats(e){return A(B(e))}getCorrectCellFormats(e){let t=B(this.parent);if(t){let[r,i]=A(t),l=Object.assign(Object.assign({},r),e),n=l.cellId||i;return delete l.cellId,[l,n]}{let t=e.cellId,r=Object.assign({},e);return delete r.cellId,[r,t]}}getListContainer(e){for(;e;){if(e.statics.blotName===y.blotName)return e;e=e.parent}return null}static register(){n().register(y)}setReplace(e,t){e?this.parent.replaceWith($.blotName,t):this.wrap($.blotName,t)}}w.blotName="table-list",w.className="table-list",n().register({"formats/table-list":w},!0),y.allowedChildren=[w],w.requiredContainer=y;let x=n().import("formats/header");class k extends x{static create(e){let{cellId:t,value:r}=e,i=super.create(r);return i.setAttribute("data-cell",t),i}format(e,t,r){if("header"===e){let e=this.statics.formats(this.domNode).value,r=this.domNode.getAttribute("data-cell");e!=t&&t?super.format("table-header",{cellId:r,value:t}):this.replaceWith(W.blotName,r)}else{if("list"===e){let[e,i]=this.getCellFormats(this.parent);return r?this.wrap(y.blotName,Object.assign(Object.assign({},e),{cellId:i})):this.wrap($.blotName,e),this.replaceWith("table-list",t)}if(e===$.blotName)return this.wrap(e,t);if(e!==this.statics.blotName||t)super.format(e,t);else{let e=this.domNode.getAttribute("data-cell");this.replaceWith(W.blotName,e)}}}static formats(e){return{cellId:e.getAttribute("data-cell"),value:this.tagName.indexOf(e.tagName)+1}}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e}getCellFormats(e){return A(B(e))}}function C(e){if("string"!=typeof e||!e)return e;let t=e.slice(-2),r=e.slice(0,-2);return`${Math.round(parseFloat(r))}${t}`}function _(e){let t=document.createElement("div");return t.innerText=e,t.classList.add("ql-table-tooltip","ql-hidden"),t}function T(e){return e.replace(/mso.*?;/g,"")}function N(e){let[t]=e.descendant(W),[r]=e.descendant(y),[i]=e.descendant(k);return t||r||i}function A(e){let t=$.formats(e.domNode),r=N(e);if(r)return[t,L(r.formats()[r.statics.blotName])];{let e=t["data-row"].split("-")[1];return[t,`cell-${e}`]}}function L(e){return e instanceof Object?e.cellId:e}k.blotName="table-header",k.className="ql-table-header",n().register({"formats/table-header":k},!0);function S(e,t){return{left:Math.min(e.left,t.left),right:Math.max(e.right,t.right),top:Math.min(e.top,t.top),bottom:Math.max(e.bottom,t.bottom)}}function E(e,t,r){let i=n().find(t).descendants(Z),l=0;return i.reduce((t,i)=>{let{left:n,width:s}=q(i.domNode,r);return(l=l||n)+2>=e.left&&l-2+s<=e.right&&t.push(i.domNode),l+=s,t},[])}function j(e,t,r,i){return n().find(t).descendants($).reduce((t,l)=>{let{left:n,top:s,width:o,height:a}=q(l.domNode,r);switch(i){case"column":(n+2>=e.left&&n-2+o<=e.right||n+2<e.right&&e.right<n-2+o||e.left>n+2&&e.left<n-2+o)&&t.push(l.domNode);break;case"row":break;default:n+2>=e.left&&n-2+o<=e.right&&s+2>=e.top&&s-2+a<=e.bottom&&t.push(l.domNode)}return t},[])}function M(e){return e.replace(/data-[a-z]+="[^"]*"/g,"").replace(/class="[^"]*"/g,e=>e.replace("ql-cell-selected","").replace("ql-cell-focused","").replace("ql-table-block","")).replace(/class="\s*"/g,"")}function q(e,t){let r=e.getBoundingClientRect(),i=t.getBoundingClientRect(),l=r.left-i.left-t.scrollLeft,n=r.top-i.top-t.scrollTop,s=r.width,o=r.height;return{left:l,top:n,width:s,height:o,right:l+s,bottom:n+o}}function B(e){for(;e;){if(e.statics.blotName===$.blotName)return e;e=e.parent}return null}function O(e,t){let r=getComputedStyle(e),i=e.style;return t.reduce((e,t)=>{var l;return e[t]=(l=i.getPropertyValue(t)||r.getPropertyValue(t)).startsWith("rgba(")?function(e){let t=Math.round(+(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""))[0]),r=Math.round(+e[1]),i=Math.round(+e[2]),l=Math.round(255*e[3]).toString(16).toUpperCase().padStart(2,"0");return"#"+(0x1000000+(t<<16)+(r<<8)+i).toString(16).slice(1)+l}(l):l.startsWith("rgb(")?`#${(l=l.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(e=>`00${parseInt(e,10).toString(16)}`.slice(-2)).join("")}`:l,e},{})}function R(e){return!e||!!/^#([A-Fa-f0-9]{3,6})$/.test(e)||!!/^rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)$/.test(e)||function(e){for(let t of f)if(t===e)return!0;return!1}(e)}function P(e){if(!e)return!0;let t=e.slice(-2);return"px"===t||"em"===t||!/[a-z]/.test(t)&&!isNaN(parseFloat(t))}function I(e,t){for(let r in t)e.setAttribute(r,t[r])}function D(e,t){let r=e.style;if(r)for(let e in t)r.setProperty(e,t[e]);else e.setAttribute("style",t.toString())}function z(e,t,r){let i=n().find(e);if(!i)return;let l=i.colgroup(),s=i.temporary();if(l){let e=0;for(let t of l.domNode.querySelectorAll("col"))e+=~~t.getAttribute("width");D(s.domNode,{width:`${e}px`})}else D(s.domNode,{width:~~(t.width+r)+"px"})}let H=n().import("blots/block"),F=n().import("blots/container"),U=["border","cellspacing","style","data-class"],V=["width"];class W extends H{static create(e){let t=super.create();return e?t.setAttribute("data-cell",e):t.setAttribute("data-cell",Q()),t}format(e,t){let r=this.formats()[this.statics.blotName];if(e===$.blotName&&t)return this.wrap(G.blotName),this.wrap(e,t);if(e===J.blotName)this.wrap(e,t);else{if("header"===e)return this.replaceWith("table-header",{cellId:r,value:t});if("table-header"===e&&t)return this.wrapTableCell(this.parent),this.replaceWith(e,t);if("list"===e||"table-list"===e&&t){let e=this.getCellFormats(this.parent);return this.wrap(y.blotName,Object.assign(Object.assign({},e),{cellId:r})),this.replaceWith("table-list",t)}super.format(e,t)}}formats(){let e=this.attributes.values(),t=this.domNode.getAttribute("data-cell");return null!=t&&(e[this.statics.blotName]=t),e}getCellFormats(e){let t=B(e);if(!t)return{};let[r]=A(t);return r}wrapTableCell(e){let t=B(e);if(!t)return;let[r]=A(t);this.wrap($.blotName,r)}}W.blotName="table-cell-block",W.className="ql-table-block",W.tagName="P";class $ extends F{checkMerge(){if(super.checkMerge()&&null!=this.next.children.head&&this.next.children.head.formats){let e=this.children.head.formats()[this.children.head.statics.blotName],t=this.children.tail.formats()[this.children.tail.statics.blotName],r=this.next.children.head.formats()[this.next.children.head.statics.blotName],i=this.next.children.tail.formats()[this.next.children.tail.statics.blotName],l=L(e),n=L(t),s=L(r),o=L(i);return l===n&&l===s&&l===o}return!1}static create(e){let t=super.create();for(let r of Object.keys(e))e[r]&&t.setAttribute(r,e[r]);return t}static formats(e){let t=this.getEmptyRowspan(e),r=u.reduce((r,i)=>(e.hasAttribute(i)&&(r[i]="rowspan"===i&&t?""+(~~e.getAttribute(i)-t):T(e.getAttribute(i))),r),{});return this.hasColgroup(e)&&(delete r.width,r.style&&(r.style=r.style.replace(/width.*?;/g,""))),r}formats(){let e=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:e}}static getEmptyRowspan(e){let t=e.parentElement.nextElementSibling,r=0;for(;t&&"TR"===t.tagName&&!t.innerHTML.replace(/\s/g,"");)r++,t=t.nextElementSibling;return r}static hasColgroup(e){for(;e&&"TBODY"!==e.tagName;)e=e.parentElement;for(;e;){if("COLGROUP"===e.tagName)return!0;e=e.previousElementSibling}return!1}html(){return this.domNode.outerHTML.replace(/<(ol)[^>]*><li[^>]* data-list="bullet">(?:.*?)<\/li><\/(ol)>/gi,(e,t,r)=>e.replace(t,"ul").replace(r,"ul"))}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}setChildrenId(e){this.children.forEach(t=>{t.domNode.setAttribute("data-cell",e)})}table(){let e=this.parent;for(;null!=e&&"table-container"!==e.statics.blotName;)e=e.parent;return e}optimize(e){super.optimize(e),this.children.forEach(e=>{if(null!=e.next&&L(e.formats()[e.statics.blotName])!==L(e.next.formats()[e.next.statics.blotName])){let t=this.splitAfter(e);t&&t.optimize(),this.prev&&this.prev.optimize()}})}}$.blotName="table-cell",$.tagName="TD";class G extends F{checkMerge(){if(super.checkMerge()&&null!=this.next.children.head&&this.next.children.head.formats){let e=this.children.head.formats()[this.children.head.statics.blotName],t=this.children.tail.formats()[this.children.tail.statics.blotName],r=this.next.children.head.formats()[this.next.children.head.statics.blotName],i=this.next.children.tail.formats()[this.next.children.tail.statics.blotName];return e["data-row"]===t["data-row"]&&e["data-row"]===r["data-row"]&&e["data-row"]===i["data-row"]}return!1}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}}G.blotName="table-row",G.tagName="TR";class K extends F{}K.blotName="table-body",K.tagName="TBODY";class Y extends H{static create(e){let t=super.create(),r=Object.keys(e),i=J.defaultClassName;for(let l of r)"data-class"!==l||~e[l].indexOf(i)?t.setAttribute(l,e[l]):t.setAttribute(l,`${i} ${e[l]}`);return t}static formats(e){return U.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}formats(){let e=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:e}}optimize(...e){if(this.statics.requiredContainer&&this.parent instanceof this.statics.requiredContainer){let e=this.formats()[this.statics.blotName];for(let t of U)e[t]?"data-class"===t?this.parent.domNode.setAttribute("class",e[t]):this.parent.domNode.setAttribute(t,e[t]):this.parent.domNode.removeAttribute(t)}super.optimize(...e)}}Y.blotName="table-temporary",Y.className="ql-table-temporary",Y.tagName="temporary";class Z extends H{static create(e){let t=super.create();for(let r of Object.keys(e))t.setAttribute(r,e[r]);return t}static formats(e){return V.reduce((t,r)=>(e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t),{})}formats(){let e=this.statics.formats(this.domNode,this.scroll);return{[this.statics.blotName]:e}}html(){return this.domNode.outerHTML}}Z.blotName="table-col",Z.tagName="COL";class X extends F{}X.blotName="table-colgroup",X.tagName="COLGROUP";class J extends F{colgroup(){let[e]=this.descendant(X);return e||this.findChild("table-colgroup")}deleteColumn(e,t,r,i=[]){let l=this.tbody(),s=this.descendants($);if(null!=l&&null!=l.children.head)if(t.length===s.length)r();else{for(let[t,r]of e)this.setCellColspan(n().find(t),r);for(let e of[...t,...i])1===e.parentElement.children.length&&this.setCellRowspan(e.parentElement.previousElementSibling),e.remove()}}deleteRow(e,t){let r=this.tbody();if(null!=r&&null!=r.children.head)if(e.length===r.children.length)t();else{let t=new WeakMap,i=[],l=[],n=this.getMaxColumns(r.children.head.children);for(let r of e){let i=this.getCorrectRow(r,n);i&&i.children.forEach(r=>{var i;let n=~~r.domNode.getAttribute("rowspan")||1;if(n>1){let s=r.statics.blotName,[o]=A(r);if(e.includes(r.parent)){let e=null==(i=r.parent)?void 0:i.next;if(t.has(r)){let{rowspan:i}=t.get(r);t.set(r,{next:e,rowspan:i-1})}else t.set(r,{next:e,rowspan:n-1}),l.push(r)}else r.replaceWith(s,Object.assign(Object.assign({},o),{rowspan:n-1}))}})}for(let e of l){let[r]=A(e),{right:l,width:n}=e.domNode.getBoundingClientRect(),{next:s,rowspan:o}=t.get(e);this.setColumnCells(s,i,{position:l,width:n},r,o,e)}for(let[e,t,r,l]of i){let i=this.scroll.create($.blotName,t);l.moveChildren(i);let n=Q();i.setChildrenId(n),e.insertBefore(i,r),l.remove()}for(let t of e)t.remove()}}deleteTable(){this.remove()}findChild(e){let t=this.children.head;for(;t;){if(t.statics.blotName===e)return t;t=t.next}return null}getCopyTable(){return this.domNode.outerHTML.replace(/<temporary[^>]*>(.*?)<\/temporary>/gi,"").replace(/<td[^>]*>(.*?)<\/td>/gi,e=>M(e))}getCorrectRow(e,t){let r=!1;for(;e&&!r;){if(t===this.getMaxColumns(e.children))return r=!0,e;e=e.prev}return e}getInsertRow(e,t,r){let i=this.tbody();if(null==i||null==i.children.head)return;let l=ee(),n=this.scroll.create(G.blotName),s=this.getMaxColumns(i.children.head.children);return this.getMaxColumns(e.children)===s?e.children.forEach(e=>{let t=~~e.domNode.getAttribute("colspan")||1;this.insertTableCell(t,{height:"24","data-row":l},n)}):this.getCorrectRow(e.prev,s).children.forEach(e=>{let i={height:"24","data-row":l},s=~~e.domNode.getAttribute("colspan")||1,o=~~e.domNode.getAttribute("rowspan")||1;if(o>1)if(r>0&&!t)this.insertTableCell(s,i,n);else{let[t]=A(e);e.replaceWith(e.statics.blotName,Object.assign(Object.assign({},t),{rowspan:o+1}))}else this.insertTableCell(s,i,n)}),n}getMaxColumns(e){return e.reduce((e,t)=>e+(~~t.domNode.getAttribute("colspan")||1),0)}insertColumn(e,t,r,i){let l=this.colgroup(),n=this.tbody();if(null==n||null==n.children.head)return;let s=[],o=[],a=n.children.head;for(;a;){if(t&&i>0){let e=a.children.tail.domNode.getAttribute("data-row");s.push([a,e,null,null])}else this.setColumnCells(a,s,{position:e,width:r});a=a.next}if(l)if(t)o.push([l,null]);else{let t=0,r=0,i=l.children.head;for(;i;){let{left:n,width:s}=i.domNode.getBoundingClientRect();if(r=(t=t||n)+s,2>=Math.abs(t-e)){o.push([l,i]);break}if(2>=Math.abs(r-e)&&!i.next){o.push([l,null]);break}t+=s,i=i.next}}for(let[e,t,r]of s)e?this.insertColumnCell(e,t,r):this.setCellColspan(r,1);for(let[e,t]of o)this.insertCol(e,t)}insertCol(e,t){let r=this.scroll.create(Z.blotName,{width:"72"});e.insertBefore(r,t)}insertColumnCell(e,t,r){let i=this.colgroup()?{"data-row":t}:{"data-row":t,width:"72"},l=this.scroll.create($.blotName,i),n=this.scroll.create(W.blotName,Q());if(l.appendChild(n),!e){let t=this.tbody();e=this.scroll.create(G.blotName),t.insertBefore(e,null)}return e.insertBefore(l,r),n.optimize(),l}insertRow(e,t){let r=this.tbody();if(null==r||null==r.children.head)return;let i=r.children.at(e),l=i||r.children.at(e-1),n=this.getInsertRow(l,i,t);r.insertBefore(n,i)}insertTableCell(e,t,r){e>1?Object.assign(t,{colspan:e}):delete t.colspan;let i=this.scroll.create($.blotName,t),l=this.scroll.create(W.blotName,Q());i.appendChild(l),r.appendChild(i),l.optimize()}optimize(e){super.optimize(e);let t=this.descendants(Y);if(this.setClassName(t),t.length>1)for(let e of(t.shift(),t))e.remove()}setCellColspan(e,t){let r=e.statics.blotName,i=e.formats()[r],l=(~~i.colspan||1)+t;l>1?Object.assign(i,{colspan:l}):delete i.colspan,e.replaceWith(r,i)}setCellRowspan(e){for(;e;){let t=e.querySelectorAll("td[rowspan]");if(t.length){for(let e of t){let t=n().find(e),r=t.statics.blotName,i=t.formats()[r],l=(~~i.rowspan||1)-1,s=N(t);l>1?Object.assign(i,{rowspan:l}):delete i.rowspan,s.format(r,i)}break}e=e.previousElementSibling}}setClassName(e){let t=this.statics.defaultClassName,r=e[0],i=this.domNode.getAttribute("class"),l=(e,r)=>{let i=e.domNode.getAttribute("data-class");i!==r&&null!=r&&e.domNode.setAttribute("data-class",(e=>{let r=(e||"").split(/\s+/);return r.find(e=>e===t)||r.unshift(t),r.join(" ").trim()})(r)),r||i||e.domNode.setAttribute("data-class",t)};if(r)l(r,i);else{let e=this.prev;if(!e)return;let[t]=e.descendant($),[r]=e.descendant(Y);!t&&r&&l(r,i)}}setColumnCells(e,t,r,i,l,n){if(!e)return;let{position:s,width:o}=r,a=e.children.head;for(;a;){let{left:r,right:c}=a.domNode.getBoundingClientRect(),h=a.domNode.getAttribute("data-row");"object"==typeof i&&Object.assign(i,{rowspan:l,"data-row":h});let u=i||h;if(2>=Math.abs(r-s)){t.push([e,u,a,n]);break}if(2>=Math.abs(c-s)&&!a.next){t.push([e,u,null,n]);break}if(2>=Math.abs(r-s-o)){t.push([e,u,a,n]);break}if(s>r&&s<c){t.push([null,u,a,n]);break}a=a.next}}tbody(){let[e]=this.descendant(K);return e||this.findChild("table-body")}temporary(){let[e]=this.descendant(Y);return e}}function Q(){return`cell-${Math.random().toString(36).slice(2,6)}`}function ee(){return`row-${Math.random().toString(36).slice(2,6)}`}J.blotName="table-container",J.defaultClassName="ql-table-better",J.tagName="TABLE",J.allowedChildren=[K,Y,X],K.requiredContainer=J,Y.requiredContainer=J,X.requiredContainer=J,K.allowedChildren=[G],G.requiredContainer=K,X.allowedChildren=[Z],Z.requiredContainer=X,G.allowedChildren=[$],$.requiredContainer=G,$.allowedChildren=[W,k,y],W.requiredContainer=$,k.requiredContainer=$,y.requiredContainer=$;var et=i(930),er=i.n(et);let ei=["border","cellspacing","style","class"];function el(e,t,r){return"object"==typeof t?Object.keys(t).reduce((e,r)=>el(e,r,t[r]),e):e.reduce((e,i)=>i.attributes&&i.attributes[t]?e.push(i):e.insert(i.insert,er()({},{[t]:r},i.attributes)),new(o()))}function en(e,t){let r=Array.from(("TABLE"===e.parentNode.tagName?e.parentNode:e.parentNode.parentNode).querySelectorAll("tr")).indexOf(e)+1;return e.innerHTML.replace(/\s/g,"")?el(t,"table-cell",r):new(o())}function es(e,t){var r;let i=Array.from(("TABLE"===e.parentNode.parentNode.tagName?e.parentNode.parentNode:e.parentNode.parentNode.parentNode).querySelectorAll("tr")),l=e.tagName,n=Array.from(e.parentNode.querySelectorAll(l)),s=e.getAttribute("data-row")||i.indexOf(e.parentNode)+1,o=(null==(r=null==e?void 0:e.firstElementChild)?void 0:r.getAttribute("data-cell"))||n.indexOf(e)+1;return t.length()||t.insert("\n",{"table-cell":{"data-row":s}}),t.ops.forEach(e=>{e.attributes&&e.attributes["table-cell"]&&(e.attributes["table-cell"]=Object.assign(Object.assign({},e.attributes["table-cell"]),{"data-row":s}))}),el(function(e,t,r){let i=$.formats(e);return"TH"===e.tagName?(t.ops.forEach(e=>{"string"!=typeof e.insert||e.insert.endsWith("\n")||(e.insert+="\n")}),el(t,"table-cell",Object.assign(Object.assign({},i),{"data-row":r}))):t}(e,t,s),"table-cell-block",o)}function eo(e,t){let r=~~e.getAttribute("span")||1,i=e.getAttribute("width"),l=new(o());for(;r>1;)l.insert("\n",{"table-col":{width:i}}),r--;return l.concat(t)}function ea(e,t){let r=ei.reduce((t,r)=>(e.hasAttribute(r)&&("class"===r?t["data-class"]=e.getAttribute(r):t[r]=T(e.getAttribute(r))),t),{});return(new(o())).insert("\n",{"table-temporary":r}).concat(t)}var ec={col:"Column",insColL:"Insert column left",insColR:"Insert column right",delCol:"Delete column",row:"Row",insRowAbv:"Insert row above",insRowBlw:"Insert row below",delRow:"Delete row",mCells:"Merge cells",sCell:"Split cell",tblProps:"Table properties",cellProps:"Cell properties",insParaOTbl:"Insert paragraph outside the table",insB4:"Insert before",insAft:"Insert after",copyTable:"Copy table",delTable:"Delete table",border:"Border",color:"Color",width:"Width",background:"Background",dims:"Dimensions",height:"Height",padding:"Padding",tblCellTxtAlm:"Table cell text alignment",alCellTxtL:"Align cell text to the left",alCellTxtC:"Align cell text to the center",alCellTxtR:"Align cell text to the right",jusfCellTxt:"Justify cell text",alCellTxtT:"Align cell text to the top",alCellTxtM:"Align cell text to the middle",alCellTxtB:"Align cell text to the bottom",dimsAlm:"Dimensions and alignment",alTblL:"Align table to the left",tblC:"Center table",alTblR:"Align table to the right",save:"Save",cancel:"Cancel",colorMsg:'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".',dimsMsg:'The value is invalid. Try "10px" or "2em" or simply "2".',colorPicker:"Color picker",removeColor:"Remove color",black:"Black",dimGrey:"Dim grey",grey:"Grey",lightGrey:"Light grey",white:"White",red:"Red",orange:"Orange",yellow:"Yellow",lightGreen:"Light green",green:"Green",aquamarine:"Aquamarine",turquoise:"Turquoise",lightBlue:"Light blue",blue:"Blue",purple:"Purple"},eh={col:"列",insColL:"向左插入列",insColR:"向右插入列",delCol:"删除列",row:"行",insRowAbv:"在上面插入行",insRowBlw:"在下面插入行",delRow:"删除行",mCells:"合并单元格",sCell:"拆分单元格",tblProps:"表格属性",cellProps:"单元格属性",insParaOTbl:"在表格外插入段落",insB4:"在表格前面插入",insAft:"在表格后面插入",copyTable:"复制表格",delTable:"删除表格",border:"边框",color:"颜色",width:"宽度",background:"背景",dims:"尺寸",height:"高度",padding:"内边距",tblCellTxtAlm:"单元格文本对齐方式",alCellTxtL:"左对齐",alCellTxtC:"水平居中对齐",alCellTxtR:"右对齐",jusfCellTxt:"两边对齐",alCellTxtT:"顶端对齐",alCellTxtM:"垂直居中对齐",alCellTxtB:"底部对齐",dimsAlm:"尺寸和对齐方式",alTblL:"表格左对齐",tblC:"表格居中",alTblR:"表格右对齐",save:"保存",cancel:"取消",colorMsg:'无效颜色，请使用 "#FF0000" 或者 "rgb(255,0,0)" 或者 "red"',dimsMsg:'无效值， 请使用 "10px" 或者 "2em" 或者 "2"',colorPicker:"颜色选择器",removeColor:"删除颜色",black:"黑色",dimGrey:"暗灰色",grey:"灰色",lightGrey:"浅灰色",white:"白色",red:"红色",orange:"橙色",yellow:"黄色",lightGreen:"浅绿色",green:"绿色",aquamarine:"海蓝色",turquoise:"青绿色",lightBlue:"浅蓝色",blue:"蓝色",purple:"紫色"},eu={col:"Colonne",insColL:"Ins\xe9rer colonne \xe0 gauche",insColR:"Ins\xe9rer colonne \xe0 droite",delCol:"Supprimer la colonne",row:"Ligne",insRowAbv:"Ins\xe9rer ligne au-dessus",insRowBlw:"Ins\xe9rer ligne en dessous",delRow:"Supprimer la ligne",mCells:"Fusionner les cellules",sCell:"Diviser la cellule",tblProps:"Propri\xe9t\xe9s du tableau",cellProps:"Propri\xe9t\xe9s de la cellule",insParaOTbl:"Ins\xe9rer paragraphe en dehors du tableau",insB4:"Ins\xe9rer avant",insAft:"Ins\xe9rer apr\xe8s",copyTable:"Copier le tableau",delTable:"Supprimer le tableau",border:"Bordure",color:"Couleur",width:"Largeur",background:"Arri\xe8re-plan",dims:"Dimensions",height:"Hauteur",padding:"Marge int\xe9rieure",tblCellTxtAlm:"Alignement du texte de la cellule du tableau",alCellTxtL:"Aligner le texte de la cellule \xe0 gauche",alCellTxtC:"Aligner le texte de la cellule au centre",alCellTxtR:"Aligner le texte de la cellule \xe0 droite",jusfCellTxt:"Justifier le texte de la cellule",alCellTxtT:"Aligner le texte de la cellule en haut",alCellTxtM:"Aligner le texte de la cellule au milieu",alCellTxtB:"Aligner le texte de la cellule en bas",dimsAlm:"Dimensions et alignement",alTblL:"Aligner le tableau \xe0 gauche",tblC:"Centrer le tableau",alTblR:"Aligner le tableau \xe0 droite",save:"Enregistrer",cancel:"Annuler",colorMsg:'La couleur est invalide. Essayez "#FF0000" ou "rgb(255,0,0)" ou "rouge".',dimsMsg:'La valeur est invalide. Essayez "10px" ou "2em" ou simplement "2".',colorPicker:"S\xe9lecteur de couleur",removeColor:"Supprimer la couleur",black:"Noir",dimGrey:"Gris fonc\xe9",grey:"Gris",lightGrey:"Gris clair",white:"Blanc",red:"Rouge",orange:"Orange",yellow:"Jaune",lightGreen:"Vert clair",green:"Vert",aquamarine:"Aigue-marine",turquoise:"Turquoise",lightBlue:"Bleu clair",blue:"Bleu",purple:"Violet"},ed={col:"Kolumna",insColL:"Wstaw kolumnę z lewej",insColR:"Wstaw kolumnę z prawej",delCol:"Usuń kolumnę",row:"Wiersz",insRowAbv:"Wstaw wiersz powyżej",insRowBlw:"Wstaw wiersz poniżej",delRow:"Usuń wiersz",mCells:"Scal kom\xf3rki",sCell:"Podziel kom\xf3rkę",tblProps:"Właściwości tabeli",cellProps:"Właściwości kom\xf3rki",insParaOTbl:"Wstaw akapit poza tabelą",insB4:"Wstaw przed",insAft:"Wstaw po",copyTable:"Kopiuj tabelę",delTable:"Usuń tabelę",border:"Obramowanie",color:"Kolor",width:"Szerokość",background:"Tło",dims:"Wymiary",height:"Wysokość",padding:"Margines wewnętrzny",tblCellTxtAlm:"Wyr\xf3wnanie tekstu w kom\xf3rce tabeli",alCellTxtL:"Wyr\xf3wnaj tekst w kom\xf3rce do lewej",alCellTxtC:"Wyr\xf3wnaj tekst w kom\xf3rce do środka",alCellTxtR:"Wyr\xf3wnaj tekst w kom\xf3rce do prawej",jusfCellTxt:"Wyjustuj tekst w kom\xf3rce",alCellTxtT:"Wyr\xf3wnaj tekst w kom\xf3rce do g\xf3ry",alCellTxtM:"Wyr\xf3wnaj tekst w kom\xf3rce do środka",alCellTxtB:"Wyr\xf3wnaj tekst w kom\xf3rce do dołu",dimsAlm:"Wymiary i wyr\xf3wnanie",alTblL:"Wyr\xf3wnaj tabelę do lewej",tblC:"Wyśrodkuj tabelę",alTblR:"Wyr\xf3wnaj tabelę do prawej",save:"Zapisz",cancel:"Anuluj",colorMsg:'Kolor jest nieprawidłowy. Spr\xf3buj "#FF0000" lub "rgb(255,0,0)" lub "red".',dimsMsg:'Wartość jest nieprawidłowa. Spr\xf3buj "10px" lub "2em" lub po prostu "2".',colorPicker:"Wyb\xf3r koloru",removeColor:"Usuń kolor",black:"Czarny",dimGrey:"Przyciemniony szary",grey:"Szary",lightGrey:"Jasnoszary",white:"Biały",red:"Czerwony",orange:"Pomarańczowy",yellow:"Ż\xf3łty",lightGreen:"Jasnozielony",green:"Zielony",aquamarine:"Akwamaryna",turquoise:"Turkusowy",lightBlue:"Jasnoniebieski",blue:"Niebieski",purple:"Fioletowy"},ep={col:"Spalte",insColL:"Spalte links einf\xfcgen",insColR:"Spalte rechts einf\xfcgen",delCol:"Spalte l\xf6schen",row:"Zeile",insRowAbv:"Zeile oberhalb einf\xfcgen",insRowBlw:"Zeile unterhalb einf\xfcgen",delRow:"Zeile l\xf6schen",mCells:"Zellen verbinden",sCell:"Zelle teilen",tblProps:"Tabelleneingenschaften",cellProps:"Zelleneigenschaften",insParaOTbl:"Absatz au\xdferhalb der Tabelle einf\xfcgen",insB4:"Davor einf\xfcgen",insAft:"Danach einf\xfcgen",copyTable:"Tabelle kopieren",delTable:"Tabelle l\xf6schen",border:"Rahmen",color:"Farbe",width:"Breite",background:"Schattierung",dims:"Ma\xdfe",height:"H\xf6he",padding:"Abstand",tblCellTxtAlm:"Ausrichtung",alCellTxtL:"Zellentext links ausrichten",alCellTxtC:"Zellentext mittig ausrichten",alCellTxtR:"Zellentext rechts ausrichten",jusfCellTxt:"Zellentext Blocksatz",alCellTxtT:"Zellentext oben ausrichten",alCellTxtM:"Zellentext mittig ausrichten",alCellTxtB:"Zellentext unten ausrichten",dimsAlm:"Ma\xdfe und Ausrichtung",alTblL:"Tabelle links ausrichten",tblC:"Tabelle mittig ausrichten",alTblR:"Tabelle rechts ausrichten",save:"Speichern",cancel:"Abbrechen",colorMsg:'Die Farbe ist ung\xfcltig. Probiere "#FF0000", "rgb(255,0,0)" oder "red".',dimsMsg:'Der Wert ist ung\xfcltig. Probiere "10px", "2em" oder einfach "2".',colorPicker:"Farbw\xe4hler",removeColor:"Farbe entfernen",black:"Schwarz",dimGrey:"Dunkelgrau",grey:"Grau",lightGrey:"Hellgrau",white:"Wei\xdf",red:"Rot",orange:"Orange",yellow:"Gelb",lightGreen:"Hellgr\xfcn",green:"Gr\xfcn",aquamarine:"Aquamarin",turquoise:"T\xfcrkis",lightBlue:"Hellblau",blue:"Blau",purple:"Lila"},ef={col:"Столбец",insColL:"Вставить столбец слева",insColR:"Вставить столбец справа",delCol:"Удалить столбец",row:"Строка",insRowAbv:"Вставить строку сверху",insRowBlw:"Вставить строку снизу",delRow:"Удалить строку",mCells:"Объединить ячейки",sCell:"Разбить ячейку",tblProps:"Свойства таблицы",cellProps:"Свойства ячейки",insParaOTbl:"Вставить абзац за пределами таблицы",insB4:"Вставить абзац перед",insAft:"Вставить абзац после",copyTable:"Копировать таблицу",delTable:"Удалить таблицу",border:"Обводка",color:"Цвет",width:"Ширина",background:"Фон",dims:"Размеры",height:"Высота",padding:"Отступ",tblCellTxtAlm:"Выравнивание текста в ячейке таблицы",alCellTxtL:"Выровнять текст в ячейке по левому краю",alCellTxtC:"Выровнять текст в ячейке по центру",alCellTxtR:"Выровнять текст в ячейке по правому краю",jusfCellTxt:"Выровнять текст в ячейке по ширине",alCellTxtT:"Выровнять текст в ячейке по верху",alCellTxtM:"Выровнять текст в ячейке по середине",alCellTxtB:"Выровнять текст в ячейке по низу",dimsAlm:"Размеры и выравнивание",alTblL:"Выровнять таблицу по левому краю",tblC:"Центрировать таблицу",alTblR:"Выровнять таблицу по правому краю",save:"Сохранить",cancel:"Отменить",colorMsg:'Неверный цвет. Попробуйте "#FF0000", "rgb(255,0,0)" или "red".',dimsMsg:'Недопустимое значение. Попробуйте "10px", "2em" или просто "2".',colorPicker:"Выбор цвета",removeColor:"Удалить цвет",black:"Черный",dimGrey:"Темно-серый",grey:"Серый",lightGrey:"Светло-серый",white:"Белый",red:"Красный",orange:"Оранжевый",yellow:"Желтый",lightGreen:"Светло-зеленый",green:"Зеленый",aquamarine:"Аквамарин",turquoise:"Бирюзовый",lightBlue:"Светло-голубой",blue:"Синий",purple:"Фиолетовый"},eg={col:"S\xfctun",insColL:"Sola s\xfctun ekle",insColR:"Sağa s\xfctun ekle",delCol:"S\xfctunu sil",row:"Satır",insRowAbv:"\xdcst\xfcne satır ekle",insRowBlw:"Altına satır ekle",delRow:"Satırı sil",mCells:"H\xfccreleri birleştir",sCell:"H\xfccreyi b\xf6l",tblProps:"Tablo \xf6zellikleri",cellProps:"H\xfccre \xf6zellikleri",insParaOTbl:"Tablo dışında paragraf ekle",insB4:"\xd6ncesine ekle",insAft:"Sonrasına ekle",copyTable:"Tabloyu kopyala",delTable:"Tabloyu sil",border:"Kenarlık",color:"Renk",width:"Genişlik",background:"Arka plan",dims:"Boyutlar",height:"Y\xfckseklik",padding:"Dolgu",tblCellTxtAlm:"Tablo h\xfccresi metin hizalaması",alCellTxtL:"H\xfccre metnini sola hizala",alCellTxtC:"H\xfccre metnini ortaya hizala",alCellTxtR:"H\xfccre metnini sağa hizala",jusfCellTxt:"H\xfccre metnini yasla",alCellTxtT:"H\xfccre metnini \xfcste hizala",alCellTxtM:"H\xfccre metnini ortaya hizala",alCellTxtB:"H\xfccre metnini alta hizala",dimsAlm:"Boyutlar ve hizalama",alTblL:"Tabloyu sola hizala",tblC:"Tabloyu ortala",alTblR:"Tabloyu sağa hizala",save:"Kaydet",cancel:"İptal",colorMsg:'Renk ge\xe7ersiz. "#FF0000", "rgb(255,0,0)" veya "red" deneyin.',dimsMsg:'Değer ge\xe7ersiz. "10px", "2em" veya sadece "2" deneyin.',colorPicker:"Renk se\xe7ici",removeColor:"Rengi kaldır",black:"Siyah",dimGrey:"Koyu gri",grey:"Gri",lightGrey:"A\xe7ık gri",white:"Beyaz",red:"Kırmızı",orange:"Turuncu",yellow:"Sarı",lightGreen:"A\xe7ık yeşil",green:"Yeşil",aquamarine:"Akuamarin",turquoise:"Turkuaz",lightBlue:"A\xe7ık mavi",blue:"Mavi",purple:"Mor"},eb=class{constructor(e){this.config={en_US:ec,zh_CN:eh,fr_FR:eu,pl_PL:ed,de_DE:ep,ru_RU:ef,tr_TR:eg},this.init(e)}changeLanguage(e){this.name=e}init(e){if(void 0===e||"string"==typeof e)this.changeLanguage(e||"en_US");else{let{name:t,content:r}=e;r&&this.registry(t,r),t&&this.changeLanguage(t)}}registry(e,t){this.config=Object.assign(Object.assign({},this.config),{[e]:t})}useLanguage(e){return this.config[this.name][e]}},em=((e=em||{})[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY",e);class ev{constructor(e,t,r={}){this.attrName=e,this.keyName=t;let i=em.TYPE&em.ATTRIBUTE;this.scope=null!=r.scope?r.scope&em.LEVEL|i:em.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(e=>e.name)}add(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)}canAdd(e,t){return null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1)}remove(e){e.removeAttribute(this.keyName)}value(e){let t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}}class ey extends Error{constructor(e){super(e="[Parchment] "+e),this.message=e,this.name=this.constructor.name}}let ew=class e{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(null==e)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,t)}return null}create(t,r,i){let l=this.query(r);if(null==l)throw new ey(`Unable to create ${r} blot`);let n=r instanceof Node||r.nodeType===Node.TEXT_NODE?r:l.create(i),s=new l(t,n,i);return e.blots.set(s.domNode,s),s}find(t,r=!1){return e.find(t,r)}query(e,t=em.ANY){let r;return"string"==typeof e?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:"number"==typeof e?e&em.LEVEL&em.BLOCK?r=this.types.block:e&em.LEVEL&em.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(e=>!!(r=this.classes[e])),r=r||this.tags[e.tagName]),null==r?null:"scope"in r&&t&em.LEVEL&r.scope&&t&em.TYPE&r.scope?r:null}register(...e){return e.map(e=>{let t="blotName"in e,r="attrName"in e;if(!t&&!r)throw new ey("Invalid definition");if(t&&"abstract"===e.blotName)throw new ey("Cannot register abstract class");let i=t?e.blotName:r?e.attrName:void 0;return this.types[i]=e,r?"string"==typeof e.keyName&&(this.attributes[e.keyName]=e):t&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(e=>e.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(t=>{(null==this.tags[t]||null==e.className)&&(this.tags[t]=e)}))),e})}};function ex(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(e=>0===e.indexOf(`${t}-`))}ew.blots=new WeakMap;let ek=class extends ev{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0)}remove(e){ex(e,this.keyName).forEach(t=>{e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")}value(e){let t=(ex(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}};function eC(e){let t=e.split("-"),r=t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("");return t[0]+r}let e_=class extends ev{static keys(e){return(e.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(e,t){return!!this.canAdd(e,t)&&(e.style[eC(this.keyName)]=t,!0)}remove(e){e.style[eC(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){let t=e.style[eC(this.keyName)];return this.canAdd(e,t)?t:""}},eT=class{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};let e=ew.find(this.domNode);if(null==e)return;let t=ev.keys(this.domNode),r=ek.keys(this.domNode),i=e_.keys(this.domNode);t.concat(r).concat(i).forEach(t=>{let r=e.scroll.query(t,em.ATTRIBUTE);r instanceof ev&&(this.attributes[r.attrName]=r)})}copy(e){Object.keys(this.attributes).forEach(t=>{let r=this.attributes[t].value(this.domNode);e.format(t,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}},eN=class{constructor(e,t){this.scroll=e,this.domNode=t,ew.blots.set(t,this),this.prev=null,this.next=null}static create(e){let t,r;if(null==this.tagName)throw new ey("Blot definition missing tagName");return Array.isArray(this.tagName)?("string"==typeof e?parseInt(r=e.toUpperCase(),10).toString()===r&&(r=parseInt(r,10)):"number"==typeof e&&(r=e),t="number"==typeof r?document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?document.createElement(r):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){let e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){null!=this.parent&&this.parent.removeChild(this),ew.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,r,i){let l=this.isolate(e,t);if(null!=this.scroll.query(r,em.BLOT)&&i)l.wrap(r,i);else if(null!=this.scroll.query(r,em.ATTRIBUTE)){let e=this.scroll.create(this.statics.scope);l.wrap(e),e.format(r,i)}}insertAt(e,t,r){let i=null==r?this.scroll.create("text",t):this.scroll.create(t,r),l=this.split(e);this.parent.insertBefore(i,l||void 0)}isolate(e,t){let r=this.split(e);if(null==r)throw Error("Attempt to isolate at end");return r.split(t),r}length(){return 1}offset(e=this.parent){return null==this.parent||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){let r="string"==typeof e?this.scroll.create(e,t):e;return null!=this.parent&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,t){return 0===e?this:this.next}update(e,t){}wrap(e,t){let r="string"==typeof e?this.scroll.create(e,t):e;if(null!=this.parent&&this.parent.insertBefore(r,this.next||void 0),"function"!=typeof r.appendChild)throw new ey(`Cannot wrap ${e}`);return r.appendChild(this),r}};eN.blotName="abstract";let eA=eN,eL=class extends eA{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};eL.scope=em.INLINE_BLOT;let eS=eL;class eE{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){let t=e.slice(1);this.append(...t)}}at(e){let t=this.iterator(),r=t();for(;r&&e>0;)e-=1,r=t();return r}contains(e){let t=this.iterator(),r=t();for(;r;){if(r===e)return!0;r=t()}return!1}indexOf(e){let t=this.iterator(),r=t(),i=0;for(;r;){if(r===e)return i;i+=1,r=t()}return -1}insertBefore(e,t){null!=e&&(this.remove(e),e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,r=this.head;for(;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return -1}remove(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{let t=e;return null!=e&&(e=e.next),t}}find(e,t=!1){let r=this.iterator(),i=r();for(;i;){let l=i.length();if(e<l||t&&e===l&&(null==i.next||0!==i.next.length()))return[i,e];e-=l,i=r()}return[null,0]}forEach(e){let t=this.iterator(),r=t();for(;r;)e(r),r=t()}forEachAt(e,t,r){if(t<=0)return;let[i,l]=this.find(e),n=e-l,s=this.iterator(i),o=s();for(;o&&n<e+t;){let i=o.length();e>n?r(o,e-n,Math.min(t,n+i-e)):r(o,0,Math.min(i,e+t-n)),n+=i,o=s()}}map(e){return this.reduce((t,r)=>(t.push(e(r)),t),[])}reduce(e,t){let r=this.iterator(),i=r();for(;i;)t=e(t,i),i=r();return t}}function ej(e,t){let r=t.find(e);if(r)return r;try{return t.create(e)}catch{let r=t.create(em.INLINE);return Array.from(e.childNodes).forEach(e=>{r.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(r.domNode,e),r.attach(),r}}let eM=class e extends eA{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,e.uiClass&&this.uiNode.classList.add(e.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new eE,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{let t=ej(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(e){if(e instanceof ey)return;throw e}})}deleteAt(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(e,t,r)=>{e.deleteAt(t,r)})}descendant(t,r=0){let[i,l]=this.children.find(r);return null==t.blotName&&t(i)||null!=t.blotName&&i instanceof t?[i,l]:i instanceof e?i.descendant(t,l):[null,-1]}descendants(t,r=0,i=Number.MAX_VALUE){let l=[],n=i;return this.children.forEachAt(r,i,(r,i,s)=>{(null==t.blotName&&t(r)||null!=t.blotName&&r instanceof t)&&l.push(r),r instanceof e&&(l=l.concat(r.descendants(t,i,n))),n-=s}),l}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(r=>{t||this.statics.allowedChildren.some(e=>r instanceof e)||(r.statics.scope===em.BLOCK_BLOT?(null!=r.next&&this.splitAfter(r),null!=r.prev&&this.splitAfter(r.prev),r.parent.unwrap(),t=!0):r instanceof e?r.unwrap():r.remove())})}formatAt(e,t,r,i){this.children.forEachAt(e,t,(e,t,l)=>{e.formatAt(t,l,r,i)})}insertAt(e,t,r){let[i,l]=this.children.find(e);if(i)i.insertAt(l,t,r);else{let e=null==r?this.scroll.create("text",t):this.scroll.create(t,r);this.appendChild(e)}}insertBefore(e,t){null!=e.parent&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,t||null),e.parent=this,null!=t&&(r=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(r=>{e.insertBefore(r,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,r=!1){let[i,l]=this.children.find(t,r),n=[[this,t]];return i instanceof e?n.concat(i.path(l,r)):(null!=i&&n.push([i,l]),n)}removeChild(e){this.children.remove(e)}replaceWith(t,r){let i="string"==typeof t?this.scroll.create(t,r):t;return i instanceof e&&this.moveChildren(i),super.replaceWith(i)}split(e,t=!1){if(!t){if(0===e)return this;if(e===this.length())return this.next}let r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(e,i,l)=>{let n=e.split(i,t);null!=n&&r.appendChild(n)}),r}splitAfter(e){let t=this.clone();for(;null!=e.next;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){let r=[],i=[];e.forEach(e=>{e.target===this.domNode&&"childList"===e.type&&(r.push(...e.addedNodes),i.push(...e.removedNodes))}),i.forEach(e=>{if(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let t=this.scroll.find(e);null!=t&&(null==t.domNode.parentNode||t.domNode.parentNode===this.domNode)&&t.detach()}),r.filter(e=>e.parentNode===this.domNode&&e!==this.uiNode).sort((e,t)=>e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(e=>{let t=null;null!=e.nextSibling&&(t=this.scroll.find(e.nextSibling));let r=ej(e,this.scroll);(r.next!==t||null==r.next)&&(null!=r.parent&&r.parent.removeChild(this),this.insertBefore(r,t||void 0))}),this.enforceAllowedChildren()}};eM.uiClass="";let eq=eM,eB=class e extends eq{static create(e){return super.create(e)}static formats(t,r){let i=r.query(e.blotName);if(null==i||t.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new eT(this.domNode)}format(t,r){if(t!==this.statics.blotName||r){let e=this.scroll.query(t,em.INLINE);null!=e&&(e instanceof ev?this.attributes.attribute(e,r):r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r))}else this.children.forEach(t=>{t instanceof e||(t=t.wrap(e.blotName,!0)),this.attributes.copy(t)}),this.unwrap()}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,i){null!=this.formats()[r]||this.scroll.query(r,em.ATTRIBUTE)?this.isolate(e,t).format(r,i):super.formatAt(e,t,r,i)}optimize(t){super.optimize(t);let r=this.formats();if(0===Object.keys(r).length)return this.unwrap();let i=this.next;i instanceof e&&i.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}(r,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(e,t){let r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(e=>e.target===this.domNode&&"attributes"===e.type)&&this.attributes.build()}wrap(t,r){let i=super.wrap(t,r);return i instanceof e&&this.attributes.move(i),i}};eB.allowedChildren=[eB,eS],eB.blotName="inline",eB.scope=em.INLINE_BLOT,eB.tagName="SPAN";let eO=class e extends eq{static create(e){return super.create(e)}static formats(t,r){let i=r.query(e.blotName);if(null==i||t.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new eT(this.domNode)}format(t,r){let i=this.scroll.query(t,em.BLOCK);null!=i&&(i instanceof ev?this.attributes.attribute(i,r):t!==this.statics.blotName||r?r&&(t!==this.statics.blotName||this.formats()[t]!==r)&&this.replaceWith(t,r):this.replaceWith(e.blotName))}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e}formatAt(e,t,r,i){null!=this.scroll.query(r,em.BLOCK)?this.format(r,i):super.formatAt(e,t,r,i)}insertAt(e,t,r){if(null==r||null!=this.scroll.query(t,em.INLINE))super.insertAt(e,t,r);else{let i=this.split(e);if(null==i)throw Error("Attempt to insertAt after block boundaries");{let e=this.scroll.create(t,r);i.parent.insertBefore(e,i)}}}replaceWith(e,t){let r=super.replaceWith(e,t);return this.attributes.copy(r),r}update(e,t){super.update(e,t),e.some(e=>e.target===this.domNode&&"attributes"===e.type)&&this.attributes.build()}};eO.blotName="block",eO.scope=em.BLOCK_BLOT,eO.tagName="P",eO.allowedChildren=[eB,eO,eS];let eR=class extends eq{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,r,i){super.formatAt(e,t,r,i),this.enforceAllowedChildren()}insertAt(e,t,r){super.insertAt(e,t,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};eR.blotName="container",eR.scope=em.BLOCK_BLOT;let eP=class extends eS{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,r,i){0===e&&t===this.length()?this.format(r,i):super.formatAt(e,t,r,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},eI={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},eD=class extends eq{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(e=>{this.update(e)}),this.observer.observe(this.domNode,eI),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){let r=this.registry.find(e,t);return r?r.scroll===this?r:t?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,t=em.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),0===e&&t===this.length()?this.children.forEach(e=>{e.remove()}):super.deleteAt(e,t)}formatAt(e,t,r,i){this.update(),super.formatAt(e,t,r,i)}insertAt(e,t,r){this.update(),super.insertAt(e,t,r)}optimize(e=[],t={}){super.optimize(t);let r=t.mutationsMap||new WeakMap,i=Array.from(this.observer.takeRecords());for(;i.length>0;)e.push(i.pop());let l=(e,t=!0)=>{null==e||e===this||null!=e.domNode.parentNode&&(r.has(e.domNode)||r.set(e.domNode,[]),t&&l(e.parent))},n=e=>{r.has(e.domNode)&&(e instanceof eq&&e.children.forEach(n),r.delete(e.domNode),e.optimize(t))},s=e;for(let t=0;s.length>0;t+=1){if(t>=100)throw Error("[Parchment] Maximum optimize iterations reached");for(s.forEach(e=>{let t=this.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(l(this.find(e.previousSibling,!1)),Array.from(e.addedNodes).forEach(e=>{let t=this.find(e,!1);l(t,!1),t instanceof eq&&t.children.forEach(e=>{l(e,!1)})})):"attributes"===e.type&&l(t.prev)),l(t))}),this.children.forEach(n),i=(s=Array.from(this.observer.takeRecords())).slice();i.length>0;)e.push(i.pop())}}update(e,t={}){e=e||this.observer.takeRecords();let r=new WeakMap;e.map(e=>{let t=this.find(e.target,!0);return null==t?null:r.has(t.domNode)?(r.get(t.domNode).push(e),null):(r.set(t.domNode,[e]),t)}).forEach(e=>{null!=e&&e!==this&&r.has(e.domNode)&&e.update(r.get(e.domNode)||[],t)}),t.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),t),this.optimize(e,t)}};eD.blotName="scroll",eD.defaultChild=eO,eD.allowedChildren=[eO,eR],eD.scope=em.BLOCK_BLOT,eD.tagName="DIV";let ez=class e extends eS{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,r){null==r?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,r)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(0===e)return this;if(e===this.length())return this.next}let r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,t){e.some(e=>"characterData"===e.type&&e.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};ez.blotName="text",ez.scope=em.INLINE_BLOT;let eH=["bold","italic","underline","strike","size","color","background","font","list","header","align","link","image"],eF=["link","image"];var eU,eV,eW,e$,eG=class{constructor(e,t){this.quill=e,this.selectedTds=[],this.startTd=null,this.endTd=null,this.disabledList=[],this.singleList=[],this.tableBetter=t,this.quill.root.addEventListener("click",this.handleClick.bind(this)),this.initDocumentListener(),this.initWhiteList()}attach(e){let t=Array.from(e.classList).find(e=>0===e.indexOf("ql-"));if(!t)return;let[r,i]=this.getButtonsWhiteList(),l=this.getCorrectDisabled(e,t);t=t.slice(3),r.includes(t)||this.disabledList.push(...l),i.includes(t)&&this.singleList.push(...l)}clearSelected(){for(let e of this.selectedTds)e.classList&&e.classList.remove("ql-cell-focused","ql-cell-selected");this.selectedTds=[],this.startTd=null,this.endTd=null}exitTableFocus(e,t){let r=B(e).table(),i=t?-1:r.length(),l=r.offset(this.quill.scroll)+i;this.tableBetter.hideTools(),this.quill.setSelection(l,0,n().sources.USER)}getButtonsWhiteList(){let{options:e={}}=this.tableBetter,{toolbarButtons:t={}}=e,{whiteList:r=eH,singleWhiteList:i=eF}=t;return[r,i]}getCopyColumns(e){return Array.from(e.querySelector("tr").querySelectorAll("td")).reduce((e,t)=>e+(~~t.getAttribute("colspan")||1),0)}getCopyData(){let e=n().find(this.selectedTds[0]).table();if(e.descendants($).length===this.selectedTds.length){let t=e.getCopyTable();return{html:t,text:this.getText(t)}}let t="",r={};for(let e of this.selectedTds){let t=e.getAttribute("data-row");r[t]||(r[t]=[]),r[t].push(e)}for(let e of Object.values(r)){let r="";for(let t of e)r+=M(t.outerHTML);t+=r=`<tr>${r}</tr>`}return{html:t=`<table><tbody>${t}</tbody></table>`,text:this.getText(t)}}getCorrectDisabled(e,t){if("SELECT"!==e.tagName)return[e];let r=e.closest("span.ql-formats");return r?[...r.querySelectorAll(`span.${t}.ql-picker`),e]:[e]}getCorrectRow(e,t){let r=(~~e.getAttribute("rowspan")||1)+("next"===t?0:-1)||1,i=n().find(e).parent;for(;i&&r;)i=i[t],r--;return null==i?void 0:i.domNode}getCorrectValue(e,t){for(let r of this.selectedTds){let i=n().find(r).html()||r.outerHTML;for(let r of this.quill.clipboard.convert({html:i,text:"\n"}).ops)if(!this.isContinue(r)&&(t=this.getListCorrectValue(e,t,null==r?void 0:r.attributes))!=((null==r?void 0:r.attributes)&&(null==r?void 0:r.attributes[e])||!1))return t}return!t}getListCorrectValue(e,t,r={}){return"list"!==e?t:"check"===t?"checked"!==r[e]&&"unchecked"!==r[e]&&"unchecked":t}getPasteComputeBounds(e,t,r){let i=e.getBoundingClientRect(),l=t.getBoundingClientRect(),n=r.domNode.getBoundingClientRect(),s=this.quill.container.getBoundingClientRect(),o=this.quill.container.scrollLeft,a=this.quill.container.scrollTop;return{left:i.left-s.left-o,right:l.right-s.left-o,top:i.top-s.top-a,bottom:n.bottom-s.top-a}}getPasteInfo(e,t,r){let i=0,l=null,n=null,s=e.parentElement;for(;e;){if((i+=~~e.getAttribute("colspan")||1)>=t){i=t,l=e;break}e=e.nextElementSibling}for(;--r;){if(!s.nextElementSibling){n=s.firstElementChild;break}s=s.nextElementSibling}return[{clospan:Math.abs(t-i),cloTd:l},{rowspan:r,rowTd:n}]}getPasteLastRow(e,t){for(;--t&&e;)e=e.next;return e}getPasteTds(e){let t={};for(let r of e){let e=r.getAttribute("data-row");t[e]||(t[e]=[]),t[e].push(r)}return Object.values(t)}getText(e){return this.quill.clipboard.convert({html:e}).filter(e=>"string"==typeof e.insert).map(e=>e.insert).join("")}handleClick(e){if(e.detail<3||!this.selectedTds.length)return;let{index:t,length:r}=this.quill.getSelection(!0);this.quill.setSelection(t,r-1,n().sources.SILENT),this.quill.scrollSelectionIntoView()}handleDeleteKeyup(e){var t;(null==(t=this.selectedTds)?void 0:t.length)<2||"Backspace"!==e.key&&"Delete"!==e.key||(e.ctrlKey?(this.tableBetter.tableMenus.deleteColumn(!0),this.tableBetter.tableMenus.deleteRow(!0)):this.removeSelectedTdsContent())}handleKeyup(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this.makeTableArrowLevelHandler(e.key);break;case"ArrowUp":case"ArrowDown":this.makeTableArrowVerticalHandler(e.key)}}handleMousedown(e){this.clearSelected();let t=e.target.closest("table");if(!t)return;this.tableBetter.tableMenus.destroyTablePropertiesForm();let r=e.target.closest("td");this.startTd=r,this.endTd=r,this.selectedTds=[r],r.classList.add("ql-cell-focused");let i=e=>{let i=e.target.closest("td");if(!i)return;let l=r.isEqualNode(i);if(l)return;this.clearSelected(),this.startTd=r,this.endTd=i;let n=S(q(r,this.quill.container),q(i,this.quill.container));for(let e of(this.selectedTds=j(n,t,this.quill.container),this.selectedTds))e.classList&&e.classList.add("ql-cell-selected");l||this.quill.blur()},l=e=>{this.setSingleDisabled(),this.setCorrectPositionTds(this.startTd,this.endTd,this.selectedTds),this.quill.root.removeEventListener("mousemove",i),this.quill.root.removeEventListener("mouseup",l)};this.quill.root.addEventListener("mousemove",i),this.quill.root.addEventListener("mouseup",l)}initDocumentListener(){document.addEventListener("copy",e=>this.onCaptureCopy(e,!1)),document.addEventListener("cut",e=>this.onCaptureCopy(e,!0)),document.addEventListener("keyup",this.handleDeleteKeyup.bind(this)),document.addEventListener("paste",this.onCapturePaste.bind(this))}initWhiteList(){Array.from(this.quill.getModule("toolbar").container.querySelectorAll("button, select")).forEach(e=>{this.attach(e)})}insertColumnCell(e,t){let r=e.tbody();r&&r.children.forEach(r=>{let i=r.children.tail.domNode.getAttribute("data-row");for(let l=0;l<t;l++)e.insertColumnCell(r,i,null)})}insertRow(e,t,r){let i=n().find(r).rowOffset();for(;t--;)e.insertRow(i+1,1)}insertWith(e){return"string"==typeof e&&e.startsWith("\n")&&e.endsWith("\n")}isContinue(e){return!(!this.insertWith(e.insert)||e.attributes&&!e.attributes["table-list"]&&!e.attributes["table-header"])}lines(e){let t=e=>{let r=[];return e.children.forEach(e=>{e instanceof eR?r=r.concat(t(e)):(e instanceof eO||e instanceof eP)&&r.push(e)}),r};return t(e)}makeTableArrowLevelHandler(e){let t="ArrowLeft"===e?this.startTd:this.endTd,r=this.quill.getSelection();if(!r)return;let[i]=this.quill.getLine(r.index),l=B(i);if(!l)return this.tableBetter.hideTools();!l||t&&t.isEqualNode(l.domNode)||(this.setSelected(l.domNode,!1),this.tableBetter.showTools(!1))}makeTableArrowVerticalHandler(e){let t="ArrowUp"===e,r=this.quill.getSelection();if(!r)return;let[i,l]=this.quill.getLine(r.index),s=t?"prev":"next";if(i[s]&&this.selectedTds.length){let e=i[s].offset(this.quill.scroll)+Math.min(l,i[s].length()-1);this.quill.setSelection(e,0,n().sources.USER)}else{if(!this.selectedTds.length){let e=B(i);if(!e)return;return this.tableArrowSelection(t,e),void this.tableBetter.showTools(!1)}let e=t?this.startTd:this.endTd,r=n().find(e).parent[s],{left:l,right:o}=e.getBoundingClientRect();if(r){let e=null,n=r;for(;n&&!e;){let t=n.children.head;for(;t;){let{left:r,right:i}=t.domNode.getBoundingClientRect();if(2>=Math.abs(r-l)||2>=Math.abs(i-o)){e=t;break}t=t.next}n=n[s]}e?this.tableArrowSelection(t,e):this.exitTableFocus(i,t)}else this.exitTableFocus(i,t)}}onCaptureCopy(e,t=!1){var r,i,l;if((null==(r=this.selectedTds)?void 0:r.length)<2||e.defaultPrevented)return;e.preventDefault();let{html:n,text:s}=this.getCopyData();null==(i=e.clipboardData)||i.setData("text/plain",s),null==(l=e.clipboardData)||l.setData("text/html",n),t&&this.removeSelectedTdsContent()}onCapturePaste(e){var t,r,i;if(!(null==(t=this.selectedTds)?void 0:t.length))return;e.preventDefault();let l=null==(r=e.clipboardData)?void 0:r.getData("text/html"),s=(null==(i=e.clipboardData)||i.getData("text/plain"),document.createElement("div"));s.innerHTML=l;let o=Array.from(s.querySelectorAll("tr"));if(!o.length)return;let a=n().find(this.startTd),c=a.row(),h=a.table();this.quill.history.cutoff();let u=this.getCopyColumns(s),[d,p]=this.getPasteInfo(this.startTd,u,o.length),{clospan:f,cloTd:g}=d,{rowspan:b,rowTd:m}=p;f&&this.insertColumnCell(h,f),b&&this.insertRow(h,b,m);let v=f?c.children.tail.domNode:g,y=this.getPasteLastRow(c,o.length),w=this.getPasteComputeBounds(this.startTd,v,y),x=this.getPasteTds(j(w,h.domNode,this.quill.container)),k=o.reduce((e,t)=>(e.push(Array.from(t.querySelectorAll("td"))),e),[]),C=[];for(;k.length;){let e=k.shift(),t=x.shift(),r=null,i=null;for(;e.length;){let l=e.shift(),s=t.shift();if(s)r=s,i=this.pasteSelectedTd(s,l);else{let e=r.getAttribute("data-row"),t=n().find(r);i=h.insertColumnCell(t.parent,e,t.next),r=(i=this.pasteSelectedTd(i.domNode,l)).domNode}i&&C.push(i.domNode)}for(;t.length;)t.shift().remove()}this.quill.blur(),this.setSelectedTds(C),this.tableBetter.tableMenus.updateMenus(),this.quill.scrollSelectionIntoView()}pasteSelectedTd(e,t){let r=e.getAttribute("data-row"),i=$.formats(t);Object.assign(i,{"data-row":r});let l=n().find(e),s=l.replaceWith(l.statics.blotName,i);this.quill.setSelection(s.offset(this.quill.scroll)+s.length()-1,0,n().sources.USER);let a=this.quill.getSelection(!0),c=this.quill.getFormat(a.index),h=t.innerHTML,u=this.getText(h),d=this.quill.clipboard.convert({text:u,html:h}),p=(new(o())).retain(a.index).delete(a.length).concat(el(d,c));return this.quill.updateContents(p,n().sources.USER),s}removeCursor(){let e=this.quill.getSelection(!0);e&&0===e.length&&(this.quill.selection.cursor.remove(),this.quill.blur())}removeSelectedTdContent(e){let t=n().find(e),r=t.children.head,i=r.formats()[W.blotName],l=this.quill.scroll.create(W.blotName,i);for(t.insertBefore(l,r);r;)r.remove(),r=r.next}removeSelectedTdsContent(){if(!(this.selectedTds.length<2)){for(let e of this.selectedTds)this.removeSelectedTdContent(e);this.tableBetter.tableMenus.updateMenus()}}setCorrectPositionTds(e,t,r){if(!e||!t||r.length<2)return;let i=[...new Set([e,t,r[0],r[r.length-1]])];i.sort((e,t)=>{let r=e.getBoundingClientRect(),i=t.getBoundingClientRect();return(r.top<=i.top||r.bottom<=i.bottom)&&(r.left<=i.left||r.right<=i.right)?-1:1}),this.startTd=i[0],this.endTd=i[i.length-1]}setDisabled(e){for(let t of this.disabledList)e?t.classList.add("ql-table-button-disabled"):t.classList.remove("ql-table-button-disabled");this.setSingleDisabled()}setSelected(e,t=!0){let r=n().find(e);this.clearSelected(),this.startTd=e,this.endTd=e,this.selectedTds=[e],e.classList.add("ql-cell-focused"),t&&this.quill.setSelection(r.offset(this.quill.scroll)+r.length()-1,0,n().sources.USER)}setSelectedTds(e){for(let t of(this.clearSelected(),this.startTd=e[0],this.endTd=e[e.length-1],this.selectedTds=e,this.selectedTds))t.classList&&t.classList.add("ql-cell-selected")}setSelectedTdsFormat(e,t){let r=[],i=this.quill.getModule("toolbar");for(let l of this.selectedTds)if(null!=i.handlers[e]){let s=n().find(l),o=this.lines(s),a=i.handlers[e].call(i,t,o);a&&r.push(B(a).domNode)}else{let r=window.getSelection();r.selectAllChildren(l),this.quill.format(e,t,n().sources.USER),r.removeAllRanges()}this.quill.blur(),r.length&&this.setSelectedTds(r)}setSingleDisabled(){for(let e of this.singleList)this.selectedTds.length>1?e.classList.add("ql-table-button-disabled"):e.classList.remove("ql-table-button-disabled")}tableArrowSelection(e,t){let r=e?"tail":"head",i=e?t.children[r].length()-1:0;this.setSelected(t.domNode,!1);let l=t.children[r].offset(this.quill.scroll)+i;this.quill.setSelection(l,0,n().sources.USER)}updateSelected(e){switch(e){case"column":{let e=this.endTd.nextElementSibling||this.startTd.previousElementSibling;if(!e)return;this.setSelected(e)}break;case"row":{let e=this.getCorrectRow(this.endTd,"next")||this.getCorrectRow(this.startTd,"prev");if(!e)return;let t=q(this.startTd,this.quill.container),r=e.firstElementChild;for(;r;){let e=q(r,this.quill.container);if(e.left+2>=t.left||e.right-2>=t.left)return void this.setSelected(r);r=r.nextElementSibling}this.setSelected(e.firstElementChild)}}}},eK=class{constructor(e,t){this.quill=e,this.options=null,this.drag=!1,this.line=null,this.dragBlock=null,this.dragTable=null,this.direction=null,this.tableBetter=t,this.quill.root.addEventListener("mousemove",this.handleMouseMove.bind(this))}createDragBlock(){let e=document.createElement("div");e.classList.add("ql-operate-block");let{dragBlockProps:t}=this.getProperty(this.options);D(e,t),this.dragBlock=e,this.quill.container.appendChild(e),this.updateCell(e)}createDragTable(e){let t=document.createElement("div"),r=this.getDragTableProperty(e);t.classList.add("ql-operate-drag-table"),D(t,r),this.dragTable=t,this.quill.container.appendChild(t)}createOperateLine(){let e=document.createElement("div"),t=document.createElement("div");e.classList.add("ql-operate-line-container");let{containerProps:r,lineProps:i}=this.getProperty(this.options);D(e,r),D(t,i),e.appendChild(t),this.quill.container.appendChild(e),this.line=e,this.updateCell(e)}getCorrectCol(e,t){let r=e.children.head;for(;r&&--t;)r=r.next;return r}getDragTableProperty(e){let{left:t,top:r,width:i,height:l}=e.getBoundingClientRect(),n=this.quill.container.getBoundingClientRect();return{left:t-n.left+"px",top:r-n.top+"px",width:`${i}px`,height:`${l}px`,display:"block"}}getLevelColSum(e){let t=e,r=0;for(;t;)r+=~~t.getAttribute("colspan")||1,t=t.previousSibling;return r}getMaxColNum(e){let t=e.parentElement.children,r=0;for(let e of t)r+=~~e.getAttribute("colspan")||1;return r}getProperty(e){let t=this.quill.container.getBoundingClientRect(),{tableNode:r,cellNode:i,mousePosition:l}=e,{clientX:n,clientY:s}=l,o=r.getBoundingClientRect(),a=i.getBoundingClientRect(),c=a.left+a.width,h=a.top+a.height,u={width:"8px",height:"8px",top:o.bottom-t.top+"px",left:o.right-t.left+"px",display:o.bottom>t.bottom?"none":"block"};return 5>=Math.abs(c-n)?(this.direction="level",{dragBlockProps:u,containerProps:{width:"5px",height:`${t.height}px`,top:"0",left:c-t.left-2.5+"px",display:"flex",cursor:"col-resize"},lineProps:{width:"1px",height:"100%"}}):5>=Math.abs(h-s)?(this.direction="vertical",{dragBlockProps:u,containerProps:{width:`${t.width}px`,height:"5px",top:h-t.top-2.5+"px",left:"0",display:"flex",cursor:"row-resize"},lineProps:{width:"100%",height:"1px"}}):(this.hideLine(),{dragBlockProps:u})}getVerticalCells(e,t){let r=e.parentElement;for(;t>1&&r;)r=r.nextSibling,t--;return r.children}handleMouseMove(e){let t=e.target.closest("table"),r=e.target.closest("td"),i={clientX:e.clientX,clientY:e.clientY};if(!t||!r)return void(this.line&&!this.drag&&(this.hideLine(),this.hideDragBlock()));let l={tableNode:t,cellNode:r,mousePosition:i};if(this.line){if(this.drag||!r)return;this.updateProperty(l)}else this.options=l,this.createOperateLine(),this.createDragBlock()}hideDragBlock(){this.dragBlock&&D(this.dragBlock,{display:"none"})}hideDragTable(){this.dragTable&&D(this.dragTable,{display:"none"})}hideLine(){this.line&&D(this.line,{display:"none"})}isLine(e){return e.classList.contains("ql-operate-line-container")}setCellLevelRect(e,t){let{right:r}=e.getBoundingClientRect(),i=~~(t-r),l=this.getLevelColSum(e),s=n().find(e).table(),o=s.colgroup(),a=s.domNode.getBoundingClientRect();if(o){let e=this.getCorrectCol(o,l),t=e.next,r=e.formats()[e.statics.blotName];if(e.domNode.setAttribute("width",`${parseFloat(r.width)+i}`),t){let e=t.formats()[t.statics.blotName];t.domNode.setAttribute("width",""+(parseFloat(e.width)-i))}}else{let t=null==e.nextElementSibling,r=e.parentElement.parentElement.children,n=[];for(let e of r){let r=e.children;if(t){let e=r[r.length-1],{width:t}=e.getBoundingClientRect();n.push([e,""+~~(t+i)]);continue}let s=0;for(let e of r){if((s+=~~e.getAttribute("colspan")||1)>l)break;if(s===l){let{width:t}=e.getBoundingClientRect(),r=e.nextElementSibling;if(!r)continue;let{width:l}=r.getBoundingClientRect();n.push([e,""+~~(t+i)],[r,""+~~(l-i)])}}}for(let[e,t]of n)I(e,{width:t}),D(e,{width:`${t}px`})}null==e.nextElementSibling&&z(s.domNode,a,i)}setCellRect(e,t,r){"level"===this.direction?this.setCellLevelRect(e,t):"vertical"===this.direction&&this.setCellVerticalRect(e,r)}setCellsRect(e,t,r){let i=e.parentElement.parentElement.children,l=t/this.getMaxColNum(e),s=r/i.length,o=[],a=n().find(e).table(),c=a.colgroup(),h=a.domNode.getBoundingClientRect();for(let e of i)for(let t of e.children){let e=~~t.getAttribute("colspan")||1,{width:r,height:i}=t.getBoundingClientRect();o.push([t,`${Math.ceil(r+l*e)}`,`${Math.ceil(i+s)}`])}if(c){let e=c.children.head;for(let[e,,t]of o)I(e,{height:t}),D(e,{height:`${t}px`});for(;e;){let{width:t}=e.domNode.getBoundingClientRect();I(e.domNode,{width:`${Math.ceil(t+l)}`}),e=e.next}}else for(let[e,t,r]of o)I(e,{width:t,height:r}),D(e,{width:`${t}px`,height:`${r}px`});z(a.domNode,h,t)}setCellVerticalRect(e,t){let r=~~e.getAttribute("rowspan")||1;for(let i of r>1?this.getVerticalCells(e,r):e.parentElement.children){let{top:e}=i.getBoundingClientRect(),r=""+~~(t-e);I(i,{height:r}),D(i,{height:`${r}px`})}}toggleLineChildClass(e){let t=this.line.firstElementChild;e?t.classList.add("ql-operate-line"):t.classList.remove("ql-operate-line")}updateCell(e){if(!e)return;let t=this.isLine(e),r=e=>{e.preventDefault(),this.drag&&(t?(this.updateDragLine(e.clientX,e.clientY),this.hideDragBlock()):(this.updateDragBlock(e.clientX,e.clientY),this.hideLine()))},i=e=>{e.preventDefault();let{cellNode:l,tableNode:n}=this.options;if(t)this.setCellRect(l,e.clientX,e.clientY),this.toggleLineChildClass(!1);else{let{right:t,bottom:r}=n.getBoundingClientRect(),i=e.clientX-t,s=e.clientY-r;this.setCellsRect(l,i,s),this.dragBlock.classList.remove("ql-operate-block-move"),this.hideDragBlock(),this.hideDragTable()}this.drag=!1,document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",i,!1),this.tableBetter.tableMenus.updateMenus(n)};e.addEventListener("mousedown",e=>{e.preventDefault();let{tableNode:l}=this.options;if(t)this.toggleLineChildClass(!0);else if(this.dragTable){let e=this.getDragTableProperty(l);D(this.dragTable,e)}else this.createDragTable(l);this.drag=!0,document.addEventListener("mousemove",r),document.addEventListener("mouseup",i)})}updateDragBlock(e,t){let r=this.quill.container.getBoundingClientRect();this.dragBlock.classList.add("ql-operate-block-move"),D(this.dragBlock,{top:~~(t-r.top-4)+"px",left:~~(e-r.left-4)+"px"}),this.updateDragTable(e,t)}updateDragLine(e,t){let r=this.quill.container.getBoundingClientRect();"level"===this.direction?D(this.line,{left:~~(e-r.left-2.5)+"px"}):"vertical"===this.direction&&D(this.line,{top:~~t-r.top-2.5+"px"})}updateDragTable(e,t){let{top:r,left:i}=this.dragTable.getBoundingClientRect();D(this.dragTable,{width:`${e-i}px`,height:`${t-r}px`,display:"block"})}updateProperty(e){let{containerProps:t,lineProps:r,dragBlockProps:i}=this.getProperty(e);t&&r&&(this.options=e,D(this.line,t),D(this.line.firstChild,r),D(this.dragBlock,i))}},eY='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084293475" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2632" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M1012.62222223 944.76190506a78.01904747 78.01904747 0 0 1-78.01904747 78.01904747H76.3936505a78.01904747 78.01904747 0 0 1-78.01904747-78.01904747V86.55238079a78.01904747 78.01904747 0 0 1 78.01904747-78.01904746h858.20952426a78.01904747 78.01904747 0 0 1 78.01904747 78.01904746v858.20952427zM466.4888889 554.66666666H76.3936505v390.0952384h390.0952384V554.66666666z m468.11428586 0H544.50793636v390.0952384h390.0952384V554.66666666zM466.4888889 86.55238079H76.3936505v390.0952384h390.0952384V86.55238079z m468.11428586 0H544.50793636v390.0952384h390.0952384V86.55238079z" fill="#515151" p-id="2633"></path></svg>',eZ='<?xml version="1.0" encoding="UTF-8"?><svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M36 18L24 30L12 18" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',eX={},eJ=[],eQ=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function e0(e,t){for(var r in t)e[r]=t[r];return e}function e1(e){var t=e.parentNode;t&&t.removeChild(e)}function e3(e,t,r){var i,l,n,s,o=arguments;if(t=e0({},t),arguments.length>3)for(r=[r],i=3;i<arguments.length;i++)r.push(o[i]);if(null!=r&&(t.children=r),null!=e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===t[l]&&(t[l]=e.defaultProps[l]);return s=t.key,null!=(n=t.ref)&&delete t.ref,null!=s&&delete t.key,e2(e,t,s,n)}function e2(e,t,r,i){var l={type:e,props:t,key:r,ref:i,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return eU.vnode&&eU.vnode(l),l}function e4(e){return e.children}function e6(e,t){this.props=e,this.context=t}function e5(e,t){if(null==t)return e.__p?e5(e.__p,e.__p.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?e5(e):null}function e7(e){(!e.__d&&(e.__d=!0)&&1===eV.push(e)||e$!==eU.debounceRendering)&&(e$=eU.debounceRendering,(eU.debounceRendering||eW)(e9))}function e9(){var e,t,r,i,l,n,s,o;for(eV.sort(function(e,t){return t.__v.__b-e.__v.__b});e=eV.pop();)e.__d&&(r=void 0,i=void 0,n=(l=(t=e).__v).__e,s=t.__P,o=t.u,t.u=!1,s&&(r=[],i=tl(s,l,e0({},l),t.__n,void 0!==s.ownerSVGElement,null,r,o,null==n?e5(l):n),tn(r,l),i!=n&&function e(t){var r,i;if(null!=(t=t.__p)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(i=t.__k[r])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(l)))}function e8(e,t,r,i,l,n,s,o,a){var c,h,u,d,p,f,g,b=r&&r.__k||eJ,m=b.length;if(o==eX&&(o=null!=n?n[0]:m?e5(r,0):null),c=0,t.__k=te(t.__k,function(r){if(null!=r){if(r.__p=t,r.__b=t.__b+1,null===(u=b[c])||u&&r.key==u.key&&r.type===u.type)b[c]=void 0;else for(h=0;h<m;h++){if((u=b[h])&&r.key==u.key&&r.type===u.type){b[h]=void 0;break}u=null}if(d=tl(e,r,u=u||eX,i,l,n,s,null,o,a),(h=r.ref)&&u.ref!=h&&(g||(g=[])).push(h,r.__c||d,r),null!=d){if(null==f&&(f=d),null!=r.l)d=r.l,r.l=null;else if(n==u||d!=o||null==d.parentNode){e:if(null==o||o.parentNode!==e)e.appendChild(d);else{for(p=o,h=0;(p=p.nextSibling)&&h<m;h+=2)if(p==d)break e;e.insertBefore(d,o)}"option"==t.type&&(e.value="")}o=d.nextSibling,"function"==typeof t.type&&(t.l=d)}}return c++,r}),t.__e=f,null!=n&&"function"!=typeof t.type)for(c=n.length;c--;)null!=n[c]&&e1(n[c]);for(c=m;c--;)null!=b[c]&&function e(t,r,i){var l,n,s;if(eU.unmount&&eU.unmount(t),(l=t.ref)&&ts(l,null,r),i||"function"==typeof t.type||(i=null!=(n=t.__e)),t.__e=t.l=null,null!=(l=t.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(e){eU.__e(e,r)}l.base=l.__P=null}if(l=t.__k)for(s=0;s<l.length;s++)l[s]&&e(l[s],r,i);null!=n&&e1(n)}(b[c],b[c]);if(g)for(c=0;c<g.length;c++)ts(g[c],g[++c],g[++c])}function te(e,t,r){if(null==r&&(r=[]),null==e||"boolean"==typeof e)t&&r.push(t(null));else if(Array.isArray(e))for(var i=0;i<e.length;i++)te(e[i],t,r);else r.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return e2(null,e,null,null);if(null!=e.__e||null!=e.__c){var t=e2(e.type,e.props,e.key,null);return t.__e=e.__e,t}return e}(e)):e);return r}function tt(e,t,r){"-"===t[0]?e.setProperty(t,r):e[t]="number"==typeof r&&!1===eQ.test(t)?r+"px":null==r?"":r}function tr(e,t,r,i,l){var n,s,o,a,c;if("key"===(t=l?"className"===t?"class":t:"class"===t?"className":t)||"children"===t);else if("style"===t)if(n=e.style,"string"==typeof r)n.cssText=r;else{if("string"==typeof i&&(n.cssText="",i=null),i)for(s in i)r&&s in r||tt(n,s,"");if(r)for(o in r)i&&r[o]===i[o]||tt(n,o,r[o])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),t=((c=t.toLowerCase())in e?c:t).slice(2),r?(i||e.addEventListener(t,ti,a),(e.t||(e.t={}))[t]=r):e.removeEventListener(t,ti,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&!l&&t in e?e[t]=null==r?"":r:"function"!=typeof r&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==r||!1===r?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):null==r||!1===r?e.removeAttribute(t):e.setAttribute(t,r))}function ti(e){return this.t[e.type](eU.event?eU.event(e):e)}function tl(e,t,r,i,l,n,s,o,a,c){var h,u,d,p,f,g,b,m,v,y,w=t.type;if(void 0!==t.constructor)return null;(h=eU.__b)&&h(t);try{e:if("function"==typeof w){if(m=t.props,v=(h=w.contextType)&&i[h.__c],y=h?v?v.props.value:h.__p:i,r.__c?b=(u=t.__c=r.__c).__p=u.__E:("prototype"in w&&w.prototype.render?t.__c=u=new w(m,y):(t.__c=u=new e6(m,y),u.constructor=w,u.render=to),v&&v.sub(u),u.props=m,u.state||(u.state={}),u.context=y,u.__n=i,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=w.getDerivedStateFromProps&&e0(u.__s==u.state?u.__s=e0({},u.__s):u.__s,w.getDerivedStateFromProps(m,u.__s)),d)null==w.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&s.push(u);else{if(null==w.getDerivedStateFromProps&&null==o&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(m,y),!o&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(m,u.__s,y)){for(u.props=m,u.state=u.__s,u.__d=!1,u.__v=t,t.__e=null!=a?a!==r.__e?a:r.__e:null,t.__k=r.__k,h=0;h<t.__k.length;h++)t.__k[h]&&(t.__k[h].__p=t);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(m,u.__s,y)}for(p=u.props,f=u.state,u.context=y,u.props=m,u.state=u.__s,(h=eU.__r)&&h(t),u.__d=!1,u.__v=t,u.__P=e,h=u.render(u.props,u.state,u.context),t.__k=te(null!=h&&h.type==e4&&null==h.key?h.props.children:h),null!=u.getChildContext&&(i=e0(e0({},i),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(g=u.getSnapshotBeforeUpdate(p,f)),e8(e,t,r,i,l,n,s,a,c),u.base=t.__e;h=u.__h.pop();)u.__s&&(u.state=u.__s),h.call(u);d||null==p||null==u.componentDidUpdate||u.componentDidUpdate(p,f,g),b&&(u.__E=u.__p=null)}else t.__e=function(e,t,r,i,l,n,s,o){var a,c,h,u,d=r.props,p=t.props;if(l="svg"===t.type||l,null==e&&null!=n){for(a=0;a<n.length;a++)if(null!=(c=n[a])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,n[a]=null;break}}if(null==e){if(null===t.type)return document.createTextNode(p);e=l?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),n=null}return null===t.type?d!==p&&(null!=n&&(n[n.indexOf(e)]=null),e.data=p):t!==r&&(null!=n&&(n=eJ.slice.call(e.childNodes)),h=(d=r.props||eX).dangerouslySetInnerHTML,u=p.dangerouslySetInnerHTML,o||(u||h)&&(u&&h&&u.__html==h.__html||(e.innerHTML=u&&u.__html||"")),function(e,t,r,i,l){var n;for(n in r)n in t||tr(e,n,null,r[n],i);for(n in t)l&&"function"!=typeof t[n]||"value"===n||"checked"===n||r[n]===t[n]||tr(e,n,t[n],r[n],i)}(e,p,d,l,o),t.__k=t.props.children,u||e8(e,t,r,i,"foreignObject"!==t.type&&l,n,s,eX,o),o||("value"in p&&void 0!==p.value&&p.value!==e.value&&(e.value=null==p.value?"":p.value),"checked"in p&&void 0!==p.checked&&p.checked!==e.checked&&(e.checked=p.checked))),e}(r.__e,t,r,i,l,n,s,c);(h=eU.diffed)&&h(t)}catch(e){eU.__e(e,t,r)}return t.__e}function tn(e,t){for(var r;r=e.pop();)try{r.componentDidMount()}catch(e){eU.__e(e,r.__v)}eU.__c&&eU.__c(t)}function ts(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){eU.__e(e,r)}}function to(e,t,r){return this.constructor(e,r)}function ta(){return(ta=Object.assign||function(e){for(var t=arguments,r=1;r<arguments.length;r++){var i=t[r];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e}).apply(this,arguments)}eU={},e6.prototype.setState=function(e,t){var r=this.__s!==this.state&&this.__s||(this.__s=e0({},this.state));("function"!=typeof e||(e=e(r,this.props)))&&e0(r,e),null!=e&&this.__v&&(this.u=!1,t&&this.__h.push(t),e7(this))},e6.prototype.forceUpdate=function(e){this.__v&&(e&&this.__h.push(e),this.u=!0,e7(this))},e6.prototype.render=e4,eV=[],eW="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,e$=eU.debounceRendering,eU.__e=function(e,t,r){for(var i;t=t.__p;)if((i=t.__c)&&!i.__p)try{if(i.constructor&&null!=i.constructor.getDerivedStateFromError)i.setState(i.constructor.getDerivedStateFromError(e));else{if(null==i.componentDidCatch)continue;i.componentDidCatch(e)}return e7(i.__E=i)}catch(t){e=t}throw e};var tc="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",th="[\\s|\\(]+("+tc+")[,|\\s]+("+tc+")[,|\\s]+("+tc+")\\s*\\)?",tu="[\\s|\\(]+("+tc+")[,|\\s]+("+tc+")[,|\\s]+("+tc+")[,|\\s]+("+tc+")\\s*\\)?",td=RegExp("rgb"+th),tp=RegExp("rgba"+tu),tf=RegExp("hsl"+th),tg=RegExp("hsla"+tu),tb="^(?:#?|0x?)",tm="([0-9a-fA-F]{1})",tv="([0-9a-fA-F]{2})",ty=RegExp(tb+tm+tm+tm+"$"),tw=RegExp(tb+tm+tm+tm+tm+"$"),tx=RegExp(tb+tv+tv+tv+"$"),tk=RegExp(tb+tv+tv+tv+tv+"$"),tC=Math.log,t_=Math.round,tT=Math.floor;function tN(e,t,r){return Math.min(Math.max(e,t),r)}function tA(e,t){var r=e.indexOf("%")>-1,i=parseFloat(e);return r?t/100*i:i}function tL(e){return parseInt(e,16)}function tS(e){return e.toString(16).padStart(2,"0")}var tE=function(){function e(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=ta({},this.$)}var t,r=e.prototype;return r.set=function(t){if("string"==typeof t)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(t)?this.hexString=t:/^rgba?/.test(t)?this.rgbString=t:/^hsla?/.test(t)&&(this.hslString=t);else{if("object"!=typeof t)throw Error("Invalid color value");t instanceof e?this.hsva=t.hsva:"r"in t&&"g"in t&&"b"in t?this.rgb=t:"h"in t&&"s"in t&&"v"in t?this.hsv=t:"h"in t&&"s"in t&&"l"in t?this.hsl=t:"kelvin"in t&&(this.kelvin=t.kelvin)}},r.setChannel=function(e,t,r){var i;this[e]=ta({},this[e],((i={})[t]=r,i))},r.reset=function(){this.hsva=this.initialValue},r.clone=function(){return new e(this)},r.unbind=function(){this.onChange=void 0},e.hsvToRgb=function(e){var t=e.h/60,r=e.s/100,i=e.v/100,l=tT(t),n=t-l,s=i*(1-r),o=i*(1-n*r),a=i*(1-(1-n)*r),c=l%6,h=[a,i,i,o,s,s][c],u=[s,s,a,i,i,o][c];return{r:tN(255*[i,o,s,s,a,i][c],0,255),g:tN(255*h,0,255),b:tN(255*u,0,255)}},e.rgbToHsv=function(e){var t=e.r/255,r=e.g/255,i=e.b/255,l=Math.max(t,r,i),n=Math.min(t,r,i),s=l-n,o=0;switch(l){case n:o=0;break;case t:o=(r-i)/s+6*(r<i);break;case r:o=(i-t)/s+2;break;case i:o=(t-r)/s+4}return{h:60*o%360,s:tN(100*(0===l?0:s/l),0,100),v:tN(100*l,0,100)}},e.hsvToHsl=function(e){var t=e.s/100,r=e.v/100,i=(2-t)*r,l=i<=1?i:2-i;return{h:e.h,s:tN(100*(l<1e-9?0:t*r/l),0,100),l:tN(50*i,0,100)}},e.hslToHsv=function(e){var t=2*e.l,r=e.s*(t<=100?t:200-t)/100;return{h:e.h,s:tN(100*(t+r<1e-9?0:2*r/(t+r)),0,100),v:tN((t+r)/2,0,100)}},e.kelvinToRgb=function(e){var t,r,i,l=e/100;return l<66?(t=255,r=-155.25485562709179-.44596950469579133*(r=l-2)+104.49216199393888*tC(r),i=l<20?0:.8274096064007395*(i=l-10)-254.76935184120902+115.67994401066147*tC(i)):(t=351.97690566805693+.114206453784165*(t=l-55)-40.25366309332127*tC(t),r=325.4494125711974+.07943456536662342*(r=l-50)-28.0852963507957*tC(r),i=255),{r:tN(tT(t),0,255),g:tN(tT(r),0,255),b:tN(tT(i),0,255)}},e.rgbToKelvin=function(t){for(var r,i=t.r,l=t.b,n=2e3,s=4e4;s-n>.4;){r=.5*(s+n);var o=e.kelvinToRgb(r);o.b/o.r>=l/i?s=r:n=r}return r},t=[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var t=this.$;if(e=ta({},t,e),this.onChange){var r={h:!1,v:!1,s:!1,a:!1};for(var i in t)r[i]=e[i]!=t[i];this.$=e,(r.h||r.s||r.v||r.a)&&this.onChange(this,r)}else this.$=e}},{key:"hsva",get:function(){return ta({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=ta({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return e.rgbToKelvin(this.rgb)},set:function(t){this.rgb=e.kelvinToRgb(t)}},{key:"red",get:function(){return this.rgb.r},set:function(e){this.rgb=ta({},this.rgb,{r:e})}},{key:"green",get:function(){return this.rgb.g},set:function(e){this.rgb=ta({},this.rgb,{g:e})}},{key:"blue",get:function(){return this.rgb.b},set:function(e){this.rgb=ta({},this.rgb,{b:e})}},{key:"rgb",get:function(){var t=e.hsvToRgb(this.$),r=t.r,i=t.g,l=t.b;return{r:t_(r),g:t_(i),b:t_(l)}},set:function(t){this.hsv=ta({},e.rgbToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"rgba",get:function(){return ta({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var t=e.hsvToHsl(this.$),r=t.h,i=t.s,l=t.l;return{h:t_(r),s:t_(i),l:t_(l)}},set:function(t){this.hsv=ta({},e.hslToHsv(t),{a:void 0===t.a?1:t.a})}},{key:"hsla",get:function(){return ta({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var t,r,i,l,n=1;if((t=td.exec(e))?(r=tA(t[1],255),i=tA(t[2],255),l=tA(t[3],255)):(t=tp.exec(e))&&(r=tA(t[1],255),i=tA(t[2],255),l=tA(t[3],255),n=tA(t[4],1)),!t)throw Error("Invalid rgb string");this.rgb={r:r,g:i,b:l,a:n}}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+tS(e.r)+tS(e.g)+tS(e.b)},set:function(e){var t,r,i,l,n=255;if((t=ty.exec(e))?(r=17*tL(t[1]),i=17*tL(t[2]),l=17*tL(t[3])):(t=tw.exec(e))?(r=17*tL(t[1]),i=17*tL(t[2]),l=17*tL(t[3]),n=17*tL(t[4])):(t=tx.exec(e))?(r=tL(t[1]),i=tL(t[2]),l=tL(t[3])):(t=tk.exec(e))&&(r=tL(t[1]),i=tL(t[2]),l=tL(t[3]),n=tL(t[4])),!t)throw Error("Invalid hex string");this.rgb={r:r,g:i,b:l,a:n/255}}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+tS(e.r)+tS(e.g)+tS(e.b)+tS(tT(255*e.a))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var t,r,i,l,n=1;if((t=tf.exec(e))?(r=tA(t[1],360),i=tA(t[2],100),l=tA(t[3],100)):(t=tg.exec(e))&&(r=tA(t[1],360),i=tA(t[2],100),l=tA(t[3],100),n=tA(t[4],1)),!t)throw Error("Invalid hsl string");this.hsl={h:r,s:i,l:l,a:n}}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();function tj(e){var t,r=e.width,i=e.sliderSize,l=e.borderWidth,n=e.handleRadius,s=e.padding,o=e.sliderShape,a="horizontal"===e.layoutDirection;return i=null!=(t=i)?t:2*s+2*n,"circle"===o?{handleStart:e.padding+e.handleRadius,handleRange:r-2*s-2*n,width:r,height:r,cx:r/2,cy:r/2,radius:r/2-l/2}:{handleStart:i/2,handleRange:r-i,radius:i/2,x:0,y:0,width:a?i:r,height:a?r:i}}var tM,tq=2*Math.PI,tB=function(e,t){return Math.sqrt(e*e+t*t)};function tO(e){return e.width/2-e.padding-e.handleRadius-e.borderWidth}function tR(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function tP(e,t,r){var i=e.wheelAngle,l=e.wheelDirection;return r&&"clockwise"===l?t=i+t:"clockwise"===l?t=360-i+t:r&&"anticlockwise"===l?t=i+180-t:"anticlockwise"===l&&(t=i-t),(t%360+360)%360}function tI(e,t,r){var i=tR(e),l=i.cx,n=i.cy,s=tO(e);t=l-t;var o=tP(e,360/tq*Math.atan2(-(r=n-r),-t)),a=Math.min(tB(t,r),s);return{h:Math.round(o),s:Math.round(100/s*a)}}function tD(e){var t=e.width,r=e.boxHeight;return{width:t,height:null!=r?r:t,radius:e.padding+e.handleRadius}}function tz(e,t,r){var i=tD(e),l=i.width,n=i.height,s=i.radius;return{s:Math.max(0,Math.min((t-s)/(l-2*s)*100,100)),v:Math.max(0,Math.min(100-(r-s)/(n-2*s)*100,100))}}function tH(e,t,r,i){for(var l=0;l<i.length;l++){var n=i[l].x-t,s=i[l].y-r;if(Math.sqrt(n*n+s*s)<e.handleRadius)return l}return null}function tF(e){return{boxSizing:"border-box",border:e.borderWidth+"px solid "+e.borderColor}}function tU(e,t,r){return e+"-gradient("+t+", "+r.map(function(e){var t=e[0];return e[1]+" "+t+"%"}).join(",")+")"}function tV(e){return"string"==typeof e?e:e+"px"}var tW=["mousemove","touchmove","mouseup","touchend"],t$=function(e){function t(t){e.call(this,t),this.uid=(Math.random()+1).toString(36).substring(5)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(e){var t=this.handleEvent.bind(this),r="horizontal"===e.layoutDirection,i=null===e.margin?e.sliderMargin:e.margin,l={overflow:"visible",display:r?"inline-block":"block"};return e.index>0&&(l[r?"marginLeft":"marginTop"]=i),e3(e4,null,e.children(this.uid,{onMouseDown:t,ontouchstart:t},l))},t.prototype.handleEvent=function(e){var t=this,r=this.props.onInput,i=this.base.getBoundingClientRect();e.preventDefault();var l=e.touches?e.changedTouches[0]:e,n=l.clientX-i.left,s=l.clientY-i.top;switch(e.type){case"mousedown":case"touchstart":!1!==r(n,s,0)&&tW.forEach(function(e){document.addEventListener(e,t,{passive:!1})});break;case"mousemove":case"touchmove":r(n,s,1);break;case"mouseup":case"touchend":r(n,s,2),tW.forEach(function(e){document.removeEventListener(e,t,{passive:!1})})}},t}(e6);function tG(e){var t,r,i,l,n=e.r,s=e.url;return e3("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+tV(e.x)+", "+tV(e.y)+")",willChange:"transform",top:tV(-n),left:tV(-n),width:tV(2*n),height:tV(2*n),position:"absolute",overflow:"visible"}},s&&e3("use",Object.assign({xlinkHref:(tM||(tM=document.getElementsByTagName("base")),t=window.navigator.userAgent,r=/^((?!chrome|android).)*safari/i.test(t),i=/iPhone|iPod|iPad/i.test(t),l=window.location,(r||i)&&tM.length>0?l.protocol+"//"+l.host+l.pathname+l.search+s:s)},e.props)),!s&&e3("circle",{cx:n,cy:n,r:n,fill:"none","stroke-width":2,stroke:"#000"}),!s&&e3("circle",{cx:n,cy:n,r:n-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function tK(e){var t,r,i,l,n,s,o,a,c,h=e.activeIndex,u=void 0!==h&&h<e.colors.length?e.colors[h]:e.color,d=tj(e),p=d.width,f=d.height,g=d.radius,b=(r=(t=tj(e)).width,i=t.height,l=t.handleRange,n=t.handleStart,s="horizontal"===e.layoutDirection,o=function(e,t){var r=t.hsva,i=t.rgb;switch(e.sliderType){case"red":return i.r/2.55;case"green":return i.g/2.55;case"blue":return i.b/2.55;case"alpha":return 100*r.a;case"kelvin":var l=e.minTemperature,n=e.maxTemperature-l;return Math.max(0,Math.min((t.kelvin-l)/n*100,100));case"hue":return r.h/=3.6;case"saturation":return r.s;default:return r.v}}(e,u),a=s?r/2:i/2,c=n+o/100*l,s&&(c=-1*c+l+2*n),{x:s?a:c,y:s?c:a}),m=function(e,t){var r=t.hsv,i=t.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+i.g+","+i.b+")"],[100,"rgb(255,"+i.g+","+i.b+")"]];case"green":return[[0,"rgb("+i.r+",0,"+i.b+")"],[100,"rgb("+i.r+",255,"+i.b+")"]];case"blue":return[[0,"rgb("+i.r+","+i.g+",0)"],[100,"rgb("+i.r+","+i.g+",255)"]];case"alpha":return[[0,"rgba("+i.r+","+i.g+","+i.b+",0)"],[100,"rgb("+i.r+","+i.g+","+i.b+")"]];case"kelvin":for(var l=[],n=e.minTemperature,s=e.maxTemperature,o=s-n,a=n,c=0;a<s;a+=o/8,c+=1){var h=tE.kelvinToRgb(a),u=h.r,d=h.g,p=h.b;l.push([12.5*c,"rgb("+u+","+d+","+p+")"])}return l;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var f=tE.hsvToHsl({h:r.h,s:0,v:r.v}),g=tE.hsvToHsl({h:r.h,s:100,v:r.v});return[[0,"hsl("+f.h+","+f.s+"%,"+f.l+"%)"],[100,"hsl("+g.h+","+g.s+"%,"+g.l+"%)"]];default:var b=tE.hsvToHsl({h:r.h,s:r.s,v:100});return[[0,"#000"],[100,"hsl("+b.h+","+b.s+"%,"+b.l+"%)"]]}}(e,u);return e3(t$,Object.assign({},e,{onInput:function(t,r,i){var l=function(e,t,r){var i,l=tj(e),n=l.handleRange,s=l.handleStart;i=Math.max(Math.min(i="horizontal"===e.layoutDirection?-1*r+n+s:t-s,n),0);var o=Math.round(100/n*i);switch(e.sliderType){case"kelvin":var a=e.minTemperature;return a+(e.maxTemperature-a)*(o/100);case"alpha":return o/100;case"hue":return 3.6*o;case"red":case"blue":case"green":return 2.55*o;default:return o}}(e,t,r);e.parent.inputActive=!0,u[e.sliderType]=l,e.onInput(i,e.id)}}),function(t,r,i){return e3("div",Object.assign({},r,{className:"IroSlider",style:Object.assign({},{position:"relative",width:tV(p),height:tV(f),borderRadius:tV(g),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},i)}),e3("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:tV(g),background:tU("linear","horizontal"===e.layoutDirection?"to top":"to right",m)},tF(e))}),e3(tG,{isActive:!0,index:u.index,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:b.x,y:b.y}))})}function tY(e){var t=tR(e).width,r=e.colors,i=(e.borderWidth,e.parent),l=e.color,n=l.hsv,s=r.map(function(t){var r,i,l,n,s,o,a,c;return r=t.hsv,l=(i=tR(e)).cx,n=i.cy,s=tO(e),o=(180+tP(e,r.h,!0))*(tq/360),{x:l+(a=r.s/100*s)*Math.cos(o)*(c="clockwise"===e.wheelDirection?-1:1),y:n+a*Math.sin(o)*c}}),o={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return e3(t$,Object.assign({},e,{onInput:function(t,r,n){if(0===n){if(a=(o=tR(e)).cx,c=o.cy,h=e.width/2,!(tB(a-t,c-r)<h))return!1;var o,a,c,h,u=tH(e,t,r,s);null!==u?i.setActiveColor(u):(i.inputActive=!0,l.hsv=tI(e,t,r),e.onInput(n,e.id))}else 1===n&&(i.inputActive=!0,l.hsv=tI(e,t,r));e.onInput(n,e.id)}}),function(i,a,c){return e3("div",Object.assign({},a,{className:"IroWheel",style:Object.assign({},{width:tV(t),height:tV(t),position:"relative"},c)}),e3("div",{className:"IroWheelHue",style:Object.assign({},o,{transform:"rotateZ("+(e.wheelAngle+90)+"deg)",background:"clockwise"===e.wheelDirection?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)"})}),e3("div",{className:"IroWheelSaturation",style:Object.assign({},o,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),e.wheelLightness&&e3("div",{className:"IroWheelLightness",style:Object.assign({},o,{background:"#000",opacity:1-n.v/100})}),e3("div",{className:"IroWheelBorder",style:Object.assign({},o,tF(e))}),r.filter(function(e){return e!==l}).map(function(t){return e3(tG,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:s[t.index].x,y:s[t.index].y})}),e3(tG,{isActive:!0,index:l.index,fill:l.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:s[l.index].x,y:s[l.index].y}))})}tG.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},tK.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var tZ=function(e){function t(t){var r=this;e.call(this,t),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=t.id,(t.colors.length>0?t.colors:[t.color]).forEach(function(e){return r.addColor(e)}),this.setActiveColor(0),this.state=Object.assign({},t,{color:this.color,colors:this.colors,layout:t.layout})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);var r=new tE(e,this.onColorChange.bind(this));this.colors.splice(t,0,r),this.colors.forEach(function(e,t){return e.index=t}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",r)},t.prototype.removeColor=function(e){var t=this.colors.splice(e,1)[0];t.unbind(),this.colors.forEach(function(e,t){return e.index=t}),this.state&&this.setState({colors:this.colors}),t.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",t)},t.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},t.prototype.setColors=function(e,t){var r=this;void 0===t&&(t=0),this.colors.forEach(function(e){return e.unbind()}),this.colors=[],e.forEach(function(e){return r.addColor(e)}),this.setActiveColor(t),this.emit("color:setAll",this.colors)},t.prototype.on=function(e,t){var r=this,i=this.events;(Array.isArray(e)?e:[e]).forEach(function(e){(i[e]||(i[e]=[])).push(t),r.deferredEvents[e]&&(r.deferredEvents[e].forEach(function(e){t.apply(null,e)}),r.deferredEvents[e]=[])})},t.prototype.off=function(e,t){var r=this;(Array.isArray(e)?e:[e]).forEach(function(e){var i=r.events[e];i&&i.splice(i.indexOf(t),1)})},t.prototype.emit=function(e){for(var t=this,r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var l=this.activeEvents;l.hasOwnProperty(e)&&l[e]||(l[e]=!0,(this.events[e]||[]).forEach(function(e){return e.apply(t,r)}),l[e]=!1)},t.prototype.deferredEmit=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var i=this.deferredEvents;this.emit.apply(this,[e].concat(t)),(i[e]||(i[e]=[])).push(t)},t.prototype.setOptions=function(e){this.setState(e)},t.prototype.resize=function(e){this.setOptions({width:e})},t.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},t.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},t.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},t.prototype.emitInputEvent=function(e,t){0===e?this.emit("input:start",this.color,t):1===e?this.emit("input:move",this.color,t):2===e&&this.emit("input:end",this.color,t)},t.prototype.render=function(e,t){var r=this,i=t.layout;return Array.isArray(i)||(i=[{component:tY},{component:tK}],t.transparency&&i.push({component:tK,options:{sliderType:"alpha"}})),e3("div",{class:"IroColorPicker",id:t.id,style:{display:t.display}},i.map(function(e,i){return e3(e.component,Object.assign({},t,e.options,{ref:void 0,onInput:r.emitInputEvent.bind(r),parent:r,index:i}))}))},t}(e6);tZ.defaultProps=Object.assign({},{width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},{colors:[],display:"block",id:null,layout:"default",margin:null});var tX,tJ,tQ,t0=((tJ=function(e,t){var r,i,l,n,s,o=document.createElement("div");function a(){var t=e instanceof Element?e:document.querySelector(e);t.appendChild(s.base),s.onMount(t)}return r=e3(tX,Object.assign({},{ref:function(e){return s=e}},t)),eU.__p&&eU.__p(r,o),l=(i=void 0===eX)?null:o.__k,r=e3(e4,null,[r]),n=[],tl(o,o.__k=r,l||eX,eX,void 0!==o.ownerSVGElement,l?null:eJ.slice.call(o.childNodes),n,!1,eX,i),tn(n,r),"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a),s}).prototype=(tX=tZ).prototype,Object.assign(tJ,tX),tJ.__component=tX,tJ);(t4=tQ||(tQ={})).version="5.5.2",t4.Color=tE,t4.ColorPicker=t0,(t6=t4.ui||(t4.ui={})).h=e3,t6.ComponentBase=t$,t6.Handle=tG,t6.Slider=tK,t6.Wheel=tY,t6.Box=function(e){var t=tD(e),r=t.width,i=t.height,l=t.radius,n=e.colors,s=e.parent,o=e.activeIndex,a=void 0!==o&&o<e.colors.length?e.colors[o]:e.color,c=[[[0,"#fff"],[100,"hsl("+a.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]],h=n.map(function(t){var r,i,l,n,s,o;return i=(r=tD(e)).width,l=r.height,n=r.radius,s=t.hsv,o=l-2*n,{x:n+s.s/100*(i-2*n),y:n+(o-s.v/100*o)}});return e3(t$,Object.assign({},e,{onInput:function(t,r,i){if(0===i){var l=tH(e,t,r,h);null!==l?s.setActiveColor(l):(s.inputActive=!0,a.hsv=tz(e,t,r),e.onInput(i,e.id))}else 1===i&&(s.inputActive=!0,a.hsv=tz(e,t,r));e.onInput(i,e.id)}}),function(t,s,o){return e3("div",Object.assign({},s,{className:"IroBox",style:Object.assign({},{width:tV(r),height:tV(i),position:"relative"},o)}),e3("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:tV(l)},tF(e),{background:tU("linear","to bottom",c[1])+","+tU("linear","to right",c[0])})}),n.filter(function(e){return e!==a}).map(function(t){return e3(tG,{isActive:!1,index:t.index,fill:t.hslString,r:e.handleRadius,url:e.handleSvg,props:e.handleProps,x:h[t.index].x,y:h[t.index].y})}),e3(tG,{isActive:!0,index:a.index,fill:a.hslString,r:e.activeHandleRadius||e.handleRadius,url:e.handleSvg,props:e.handleProps,x:h[a.index].x,y:h[a.index].y}))})};var t1=tQ;let t3=[{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M43 11L16.875 37L5 25.1818" stroke="#008a00" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"save"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 8L40 40" stroke="#db3700" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 40L40 8" stroke="#db3700" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"cancel"}],t2=[{value:"#000000",describe:"black"},{value:"#4d4d4d",describe:"dimGrey"},{value:"#808080",describe:"grey"},{value:"#e6e6e6",describe:"lightGrey"},{value:"#ffffff",describe:"white"},{value:"#ff0000",describe:"red"},{value:"#ffa500",describe:"orange"},{value:"#ffff00",describe:"yellow"},{value:"#99e64d",describe:"lightGreen"},{value:"#008000",describe:"green"},{value:"#7fffd4",describe:"aquamarine"},{value:"#40e0d0",describe:"turquoise"},{value:"#4d99e6",describe:"lightBlue"},{value:"#0000ff",describe:"blue"},{value:"#800080",describe:"purple"}];var t4,t6,t5,t7=class{constructor(e,t){this.tableMenus=e,this.options=t,this.attrs=Object.assign({},t.attribute),this.borderForm=[],this.saveButton=null,this.form=this.createPropertiesForm(t)}checkBtnsAction(e){"save"===e&&this.saveAction(this.options.type),this.removePropertiesForm(),this.tableMenus.showMenus(),this.tableMenus.updateMenus()}createActionBtns(e,t){let r=this.getUseLanguage(),i=document.createElement("div"),l=document.createDocumentFragment();for(let{icon:e,label:n}of(i.classList.add("properties-form-action-row"),t3)){let i=document.createElement("button"),s=document.createElement("span");if(s.innerHTML=e,i.appendChild(s),I(i,{label:n}),t){let e=document.createElement("span");e.innerText=r(n),i.appendChild(e)}l.appendChild(i)}return i.addEventListener("click",t=>e(t)),i.appendChild(l),i}createCheckBtns(e){let{menus:t,propertyName:r}=e,i=document.createElement("div"),l=document.createDocumentFragment();for(let{icon:e,describe:i,align:n}of t){let t=document.createElement("span");t.innerHTML=e,t.setAttribute("data-align",n),t.classList.add("ql-table-tooltip-hover"),this.options.attribute[r]===n&&t.classList.add("ql-table-btns-checked");let s=_(i);t.appendChild(s),l.appendChild(t)}return i.classList.add("ql-table-check-container"),i.appendChild(l),i.addEventListener("click",e=>{let t=e.target.closest("span.ql-table-tooltip-hover"),l=t.getAttribute("data-align");this.switchButton(i,t),this.setAttribute(r,l)}),i}createColorContainer(e){let t=document.createElement("div");t.classList.add("ql-table-color-container");let r=this.createColorInput(e),i=this.createColorPicker(e);return t.appendChild(r),t.appendChild(i),t}createColorInput(e){let t=this.createInput(e);return t.classList.add("label-field-view-color"),t}createColorList(e){let t=this.getUseLanguage(),r=document.createElement("ul"),i=document.createDocumentFragment();for(let{value:e,describe:l}of(r.classList.add("color-list"),t2)){let r=document.createElement("li"),n=_(t(l));r.setAttribute("data-color",e),r.classList.add("ql-table-tooltip-hover"),D(r,{"background-color":e}),r.appendChild(n),i.appendChild(r)}return r.appendChild(i),r.addEventListener("click",t=>{let i=t.target,l=("DIV"===i.tagName?i.parentElement:i).getAttribute("data-color");this.setAttribute(e,l,r),this.updateInputStatus(r,!1,!0)}),r}createColorPicker(e){let{propertyName:t,value:r}=e,i=document.createElement("span"),l=document.createElement("span");i.classList.add("color-picker"),l.classList.add("color-button"),r?D(l,{"background-color":r}):l.classList.add("color-unselected");let n=this.createColorPickerSelect(t);return l.addEventListener("click",()=>{this.toggleHidden(n);let e=this.getColorClosest(i),t=null==e?void 0:e.querySelector(".property-input");this.updateSelectedStatus(n,null==t?void 0:t.value,"color")}),i.appendChild(l),i.appendChild(n),i}createColorPickerIcon(e,t,r){let i=document.createElement("div"),l=document.createElement("span"),n=document.createElement("button");return l.innerHTML=e,n.innerText=t,i.classList.add("erase-container"),i.appendChild(l),i.appendChild(n),i.addEventListener("click",r),i}createColorPickerSelect(e){let t=this.getUseLanguage(),r=document.createElement("div"),i=this.createColorPickerIcon('<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 42H44" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M31 4L7 28L13 34H21L41 14L31 4Z" fill="none" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',t("removeColor"),()=>{this.setAttribute(e,"",r),this.updateInputStatus(r,!1,!0)}),l=this.createColorList(e),n=this.createPalette(e,t,r);return r.classList.add("color-picker-select","ql-hidden"),r.appendChild(i),r.appendChild(l),r.appendChild(n),r}createDropdown(e,t){let r=document.createElement("div"),i=document.createElement("span"),l=document.createElement("span");return"dropdown"===t&&(l.innerHTML=eZ,l.classList.add("ql-table-dropdown-icon")),e&&(i.innerText=e),r.classList.add("ql-table-dropdown-properties"),i.classList.add("ql-table-dropdown-text"),r.appendChild(i),"dropdown"===t&&r.appendChild(l),{dropdown:r,dropText:i}}createInput(e){let{attribute:t,message:r,propertyName:i,value:l,valid:n}=e,{placeholder:s=""}=t,o=document.createElement("div"),a=document.createElement("div"),c=document.createElement("label"),h=document.createElement("input"),u=document.createElement("div");return o.classList.add("label-field-view"),a.classList.add("label-field-view-input-wrapper"),c.innerText=s,I(h,t),h.classList.add("property-input"),h.value=l,h.addEventListener("input",e=>{let t=e.target.value;n&&this.switchHidden(u,n(t)),this.updateInputStatus(a,n&&!n(t)),this.setAttribute(i,t,o)}),u.classList.add("label-field-view-status","ql-hidden"),r&&(u.innerText=r),a.appendChild(h),a.appendChild(c),o.appendChild(a),n&&o.appendChild(u),o}createList(e,t){let{options:r,propertyName:i}=e;if(!r.length)return null;let l=document.createElement("ul");for(let e of r){let t=document.createElement("li");t.innerText=e,l.appendChild(t)}return l.classList.add("ql-table-dropdown-list","ql-hidden"),l.addEventListener("click",e=>{let r=e.target.innerText;t.innerText=r,this.toggleBorderDisabled(r),this.setAttribute(i,r)}),l}createPalette(e,t,r){let i=document.createElement("div"),l=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=new t1.ColorPicker(s,{width:110,layout:[{component:t1.ui.Wheel,options:{}}]}),a=this.createColorPickerIcon('<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 44C29.9601 44 26.3359 35.136 30 31C33.1264 27.4709 44 29.0856 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M28 17C29.6569 17 31 15.6569 31 14C31 12.3431 29.6569 11 28 11C26.3431 11 25 12.3431 25 14C25 15.6569 26.3431 17 28 17Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M16 21C17.6569 21 19 19.6569 19 18C19 16.3431 17.6569 15 16 15C14.3431 15 13 16.3431 13 18C13 19.6569 14.3431 21 16 21Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M17 34C18.6569 34 20 32.6569 20 31C20 29.3431 18.6569 28 17 28C15.3431 28 14 29.3431 14 31C14 32.6569 15.3431 34 17 34Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/></svg>',t("colorPicker"),()=>this.toggleHidden(l)),c=this.createActionBtns(t=>{let n=t.target.closest("button");n&&("save"===n.getAttribute("label")&&(this.setAttribute(e,o.color.hexString,r),this.updateInputStatus(i,!1,!0)),l.classList.add("ql-hidden"),r.classList.add("ql-hidden"))},!1);return l.classList.add("color-picker-palette","ql-hidden"),n.classList.add("color-picker-wrap"),s.classList.add("iro-container"),n.appendChild(s),n.appendChild(c),l.appendChild(n),i.appendChild(a),i.appendChild(l),i}createProperty(e){let{content:t,children:r}=e,i=this.getUseLanguage(),l=document.createElement("div"),n=document.createElement("label");for(let e of(n.innerText=t,n.classList.add("ql-table-dropdown-label"),l.classList.add("properties-form-row"),1===r.length&&l.classList.add("properties-form-row-full"),l.appendChild(n),r)){let r=this.createPropertyChild(e);r&&l.appendChild(r),r&&t===i("border")&&this.borderForm.push(r)}return l}createPropertyChild(e){let{category:t,value:r}=e;switch(t){case"dropdown":let{dropdown:i,dropText:l}=this.createDropdown(r,t),n=this.createList(e,l);return i.appendChild(n),i.addEventListener("click",()=>{this.toggleHidden(n),this.updateSelectedStatus(i,l.innerText,"dropdown")}),i;case"color":return this.createColorContainer(e);case"menus":return this.createCheckBtns(e);case"input":return this.createInput(e)}}createPropertiesForm(e){let{title:t,properties:r}=function({type:e,attribute:t},r){return"table"===e?{title:r("tblProps"),properties:[{content:r("border"),children:[{category:"dropdown",propertyName:"border-style",value:t["border-style"],options:["dashed","dotted","double","groove","inset","none","outset","ridge","solid"]},{category:"color",propertyName:"border-color",value:t["border-color"],attribute:{type:"text",placeholder:r("color")},valid:R,message:r("colorMsg")},{category:"input",propertyName:"border-width",value:C(t["border-width"]),attribute:{type:"text",placeholder:r("width")},valid:P,message:r("dimsMsg")}]},{content:r("background"),children:[{category:"color",propertyName:"background-color",value:t["background-color"],attribute:{type:"text",placeholder:r("color")},valid:R,message:r("colorMsg")}]},{content:r("dimsAlm"),children:[{category:"input",propertyName:"width",value:C(t.width),attribute:{type:"text",placeholder:r("width")},valid:P,message:r("dimsMsg")},{category:"input",propertyName:"height",value:C(t.height),attribute:{type:"text",placeholder:r("height")},valid:P,message:r("dimsMsg")},{category:"menus",propertyName:"align",value:t.align,menus:[{icon:c,describe:r("alTblL"),align:"left"},{icon:a,describe:r("tblC"),align:"center"},{icon:h,describe:r("alTblR"),align:"right"}]}]}]}:{title:r("cellProps"),properties:[{content:r("border"),children:[{category:"dropdown",propertyName:"border-style",value:t["border-style"],options:["dashed","dotted","double","groove","inset","none","outset","ridge","solid"]},{category:"color",propertyName:"border-color",value:t["border-color"],attribute:{type:"text",placeholder:r("color")},valid:R,message:r("colorMsg")},{category:"input",propertyName:"border-width",value:C(t["border-width"]),attribute:{type:"text",placeholder:r("width")},valid:P,message:r("dimsMsg")}]},{content:r("background"),children:[{category:"color",propertyName:"background-color",value:t["background-color"],attribute:{type:"text",placeholder:r("color")},valid:R,message:r("colorMsg")}]},{content:r("dims"),children:[{category:"input",propertyName:"width",value:C(t.width),attribute:{type:"text",placeholder:r("width")},valid:P,message:r("dimsMsg")},{category:"input",propertyName:"height",value:C(t.height),attribute:{type:"text",placeholder:r("height")},valid:P,message:r("dimsMsg")},{category:"input",propertyName:"padding",value:C(t.padding),attribute:{type:"text",placeholder:r("padding")},valid:P,message:r("dimsMsg")}]},{content:r("tblCellTxtAlm"),children:[{category:"menus",propertyName:"text-align",value:t["text-align"],menus:[{icon:c,describe:r("alCellTxtL"),align:"left"},{icon:a,describe:r("alCellTxtC"),align:"center"},{icon:h,describe:r("alCellTxtR"),align:"right"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42 19H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 9H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 29H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M42 39H6" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:r("jusfCellTxt"),align:"justify"}]},{category:"menus",propertyName:"vertical-align",value:t["vertical-align"],menus:[{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 36.3056H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 42H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 12L24 6L18 12V12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 6V29" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:r("alCellTxtT"),align:"top"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 36L24 30L30 36" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M23.9999 30.9998V43.9998" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 12L24 18L30 12" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M23.9999 17.0002V4.00022" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 24.0004H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:r("alCellTxtM"),align:"middle"},{icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 36.3056H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 42H42" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M30 23L24 29L18 23V23" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 6V29" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>',describe:r("alCellTxtB"),align:"bottom"}]}]}]}}(e,this.getUseLanguage()),i=document.createElement("div");i.classList.add("ql-table-properties-form");let l=document.createElement("h2"),n=this.createActionBtns(e=>{let t=e.target.closest("button");t&&this.checkBtnsAction(t.getAttribute("label"))},!0);for(let e of(l.innerText=t,l.classList.add("properties-form-header"),i.appendChild(l),r)){let t=this.createProperty(e);i.appendChild(t)}return i.appendChild(n),this.setBorderDisabled(),this.tableMenus.quill.container.appendChild(i),this.updatePropertiesForm(i,e.type),this.setSaveButton(n),i.addEventListener("click",e=>{let t=e.target;this.hiddenSelectList(t)}),i}getCellStyle(e,t){let r=(e.getAttribute("style")||"").split(";").filter(e=>e.trim()).reduce((e,t)=>{let r=t.split(":");return Object.assign(Object.assign({},e),{[r[0].trim()]:r[1].trim()})},{});return Object.assign(r,t),Object.keys(r).reduce((e,t)=>e+`${t}: ${r[t]}; `,"")}getColorClosest(e){var t;return t=".ql-table-color-container",e.closest(t)}getComputeBounds(e){if("table"===e){let{table:e}=this.tableMenus,[t,r]=this.tableMenus.getCorrectBounds(e);return t.bottom>r.bottom?Object.assign(Object.assign({},t),{bottom:r.height}):t}{let{computeBounds:e}=this.tableMenus.getSelectedTdsInfo();return e}}getDiffProperties(){let e=this.attrs,t=this.options.attribute;return Object.keys(e).reduce((r,i)=>(e[i]!==t[i]&&(r[i]=i.endsWith("width")||i.endsWith("height")?function(e){if(!e)return e;let t=e.slice(-2);return"px"!==t&&"em"!==t?e+"px":e}(e[i]):e[i]),r),{})}getUseLanguage(){let{language:e}=this.tableMenus.tableBetter;return e.useLanguage.bind(e)}getViewportSize(){return{viewWidth:document.documentElement.clientWidth,viewHeight:document.documentElement.clientHeight}}hiddenSelectList(e){var t,r;let i=".ql-table-dropdown-properties",l=".color-picker";for(let n of[...this.form.querySelectorAll(".ql-table-dropdown-list"),...this.form.querySelectorAll(".color-picker-select")])(null==(t=n.closest(i))?void 0:t.isEqualNode(e.closest(i)))||(null==(r=n.closest(l))?void 0:r.isEqualNode(e.closest(l)))||n.classList.add("ql-hidden")}removePropertiesForm(){this.form.remove(),this.borderForm=[]}saveAction(e){"table"===e?this.saveTableAction():this.saveCellAction()}saveCellAction(){let{selectedTds:e}=this.tableMenus.tableBetter.cellSelection,{quill:t,table:r}=this.tableMenus,i=n().find(r).colgroup(),l=this.getDiffProperties(),s=parseFloat(l.width),o=l["text-align"];o&&delete l["text-align"];let a=[];if(i&&s){delete l.width;let{computeBounds:e}=this.tableMenus.getSelectedTdsInfo();for(let i of E(e,r,t.container))i.setAttribute("width",`${s}`)}for(let t of e){let e=n().find(t),r=e.statics.blotName,i=e.formats()[r],s=this.getCellStyle(t,l);if(o){let t="left"===o?"":o;e.children.forEach(e=>{e.statics.blotName===y.blotName?e.children.forEach(e=>{e.format&&e.format("align",t)}):e.format("align",t)})}let c=e.replaceWith(r,Object.assign(Object.assign({},i),{style:s}));a.push(c.domNode)}this.tableMenus.tableBetter.cellSelection.setSelectedTds(a)}saveTableAction(){var e;let{table:t,tableBetter:r}=this.tableMenus,i=null==(e=n().find(t).temporary())?void 0:e.domNode,l=t.querySelector("td"),s=this.getDiffProperties(),o=s.align;switch(delete s.align,o){case"center":Object.assign(s,{margin:"0 auto"});break;case"left":Object.assign(s,{margin:""});break;case"right":Object.assign(s,{"margin-left":"auto","margin-right":""})}D(i||t,s),r.cellSelection.setSelected(l)}setAttribute(e,t,r){this.attrs[e]=t,e.includes("-color")&&this.updateSelectColor(this.getColorClosest(r),t)}setBorderDisabled(){let[e]=this.borderForm,t=e.querySelector(".ql-table-dropdown-text").innerText;this.toggleBorderDisabled(t)}setSaveButton(e){let t=e.querySelector('button[label="save"]');this.saveButton=t}setSaveButtonDisabled(e){this.saveButton&&(e?this.saveButton.setAttribute("disabled","true"):this.saveButton.removeAttribute("disabled"))}switchButton(e,t){for(let t of e.querySelectorAll("span.ql-table-tooltip-hover"))t.classList.remove("ql-table-btns-checked");t.classList.add("ql-table-btns-checked")}switchHidden(e,t){t?e.classList.add("ql-hidden"):e.classList.remove("ql-hidden")}toggleBorderDisabled(e){let[,t,r]=this.borderForm;"none"!==e&&e?(t.classList.remove("ql-table-disabled"),r.classList.remove("ql-table-disabled")):(this.attrs["border-color"]="",this.attrs["border-width"]="",this.updateSelectColor(t,""),this.updateInputValue(r,""),t.classList.add("ql-table-disabled"),r.classList.add("ql-table-disabled"))}toggleHidden(e){e.classList.toggle("ql-hidden")}updateInputValue(e,t){e.querySelector(".property-input").value=t}updateInputStatus(e,t,r){var i;let l=(r?this.getColorClosest(e):(i=".label-field-view",e.closest(i))).querySelector(".label-field-view-input-wrapper");t?(l.classList.add("label-field-view-error"),this.setSaveButtonDisabled(!0)):(l.classList.remove("label-field-view-error"),this.form.querySelectorAll(".label-field-view-error").length||this.setSaveButtonDisabled(!1))}updatePropertiesForm(e,t){e.classList.remove("ql-table-triangle-none");let{height:r,width:i}=e.getBoundingClientRect(),l=this.tableMenus.quill.container.getBoundingClientRect(),{top:n,left:s,right:o,bottom:a}=this.getComputeBounds(t),{viewHeight:c}=this.getViewportSize(),h=a+10,u=s+o-i>>1;h+l.top+r>c?(h=n-r-10)<0?(h=l.height-r>>1,e.classList.add("ql-table-triangle-none")):(e.classList.add("ql-table-triangle-up"),e.classList.remove("ql-table-triangle-down")):(e.classList.add("ql-table-triangle-down"),e.classList.remove("ql-table-triangle-up")),u<l.left?(u=0,e.classList.add("ql-table-triangle-none")):u+i>l.right&&(u=l.right-i,e.classList.add("ql-table-triangle-none")),D(e,{left:`${u}px`,top:`${h}px`})}updateSelectColor(e,t){let r=e.querySelector(".property-input"),i=e.querySelector(".color-button"),l=e.querySelector(".color-picker-select"),n=e.querySelector(".label-field-view-status");t?i.classList.remove("color-unselected"):i.classList.add("color-unselected"),r.value=t,D(i,{"background-color":t}),l.classList.add("ql-hidden"),this.switchHidden(n,R(t))}updateSelectedStatus(e,t,r){let i=e.querySelector("color"===r?".color-list":".ql-table-dropdown-list");if(!i)return;let l=Array.from(i.querySelectorAll("li"));for(let e of l)e.classList.remove(`ql-table-${r}-selected`);let n=l.find(e=>("color"===r?e.getAttribute("data-color"):e.innerText)===t);n&&n.classList.add(`ql-table-${r}-selected`)}};(t=t5||(t5={})).left="margin-left",t.right="margin-right";var t9=class{constructor(e,t){this.quill=e,this.table=null,this.prevList=null,this.prevTooltip=null,this.scroll=!1,this.tableBetter=t,this.tablePropertiesForm=null,this.quill.root.addEventListener("click",this.handleClick.bind(this)),this.root=this.createMenus()}copyTable(){var e,t,r,i;return e=this,t=void 0,r=void 0,i=function*(){if(!this.table)return;let e=n().find(this.table);if(!e)return;let t="<p><br></p>"+e.getCopyTable(),r=this.tableBetter.cellSelection.getText(t),i=new ClipboardItem({"text/html":new Blob([t],{type:"text/html"}),"text/plain":new Blob([r],{type:"text/plain"})});try{yield navigator.clipboard.write([i]);let t=this.quill.getIndex(e),r=e.length();this.quill.setSelection(t+r,n().sources.SILENT),this.tableBetter.hideTools(),this.quill.scrollSelectionIntoView()}catch(e){console.error("Failed to copy table:",e)}},new(r||(r=Promise))(function(l,n){function s(e){try{a(i.next(e))}catch(e){n(e)}}function o(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?l(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,o)}a((i=i.apply(e,t||[])).next())})}createList(e){if(!e)return null;let t=document.createElement("ul");for(let[,r]of Object.entries(e)){let{content:e,handler:i}=r,l=document.createElement("li");l.innerText=e,l.addEventListener("click",i.bind(this)),t.appendChild(l)}return t.classList.add("ql-table-dropdown-list","ql-hidden"),t}createMenu(e,t,r){let i=document.createElement("div"),l=document.createElement("span");return l.innerHTML=r?e+t:e,i.classList.add("ql-table-dropdown"),l.classList.add("ql-table-tooltip-hover"),i.appendChild(l),i}createMenus(){let{language:e,options:t={}}=this.tableBetter,{menus:r}=t,i=e.useLanguage.bind(e),l=document.createElement("div");for(let[,e]of(l.classList.add("ql-table-menus-container","ql-hidden"),Object.entries(function(e,t){let r={column:{content:e("col"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084271333" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2200" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M9.14372835 1039.20071111L1020.26808889 1039.20071111l0-1048.576L9.14372835-9.37528889 9.14372835 1039.20071111z m252.77672107-711.53454649l1e-8-262.144 175.00150897 0 0 262.144L261.92044942 327.66616462zM942.48705138 702.1592576l0 262.14400001-178.89289103-1e-8 1e-8-262.144 178.89289102 0z m-256.66810311 0l0 262.144-171.11595236 0 0-262.144 171.11595236 0z m-248.89698987 0l0 262.144L261.92044943 964.3032576l-1e-8-262.144 175.00150898 0z m505.56509298-299.59563948L942.48705139 627.26180409l-178.89289104 0 0-224.69818596 178.89289103-1e-8z m-256.66810311 1e-8L685.81894827 627.26180409l-171.11595236 0 0-224.69818596 171.11595236 0z m-248.89698987 0L436.9219584 627.26180409 261.92044943 627.26180409l0-224.69818596 175.00150897 0z m505.56509298-337.04145352l0 262.14400001-178.89289102 0-1e-8-262.144 178.89289103-1e-8z m-256.66810311 1e-8l0 262.144-171.11595236 0 0-262.144 171.11595236 0z" fill="#515151" p-id="2201"></path></svg>',handler(e,t){this.toggleAttribute(e,t)},children:{left:{content:e("insColL"),handler(){let{leftTd:e}=this.getSelectedTdsInfo(),t=this.table.getBoundingClientRect();this.insertColumn(e,0),z(this.table,t,72),this.updateMenus()}},right:{content:e("insColR"),handler(){let{rightTd:e}=this.getSelectedTdsInfo(),t=this.table.getBoundingClientRect();this.insertColumn(e,1),z(this.table,t,72),this.updateMenus()}},delete:{content:e("delCol"),handler(){this.deleteColumn()}}}},row:{content:e("row"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084279720" class="icon" viewBox="0 0 1181 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2344" xmlns:xlink="http://www.w3.org/1999/xlink" width="18.453125" height="16"><path d="M1142.15367111 0H39.38417778C7.99630222 0 0 8.27050667 0 39.38531555v945.2293689C0 1015.72949333 7.99516445 1024 39.38531555 1024h1102.76835556c31.39128889 0 39.38417778-8.27050667 39.38417778-39.38531555V39.38531555c0-31.11480889-7.99516445-39.38531555-39.38417778-39.38531555zM354.46328889 945.23050667l-276.992 3.26997333V749.568l276.992-1.25952v196.92202667z m0-275.69265778H78.76835555V472.61468445h275.69265778v196.92316444z m0-275.69152H78.76835555V236.30848h275.69265778v157.53671111z m393.84632889 551.38417778H433.23050667V748.30848h315.07683555v196.92202667z m0-275.69265778H433.23050667V472.61468445h315.07683555v196.92316444z m0-275.69152H433.23050667V236.30848h315.07683555v157.53671111z m354.46101333 551.38417778H827.07683555V748.30848h275.69265778v196.92202667z m0-275.69265778H827.07683555V472.61468445h275.69265778v196.92316444z m0-275.69152H827.07683555V236.30848h275.69265778v157.53671111z" fill="#515151" p-id="2345"></path></svg>',handler(e,t){this.toggleAttribute(e,t)},children:{above:{content:e("insRowAbv"),handler(){let{leftTd:e}=this.getSelectedTdsInfo();this.insertRow(e,0),this.updateMenus()}},below:{content:e("insRowBlw"),handler(){let{rightTd:e}=this.getSelectedTdsInfo();this.insertRow(e,1),this.updateMenus()}},delete:{content:e("delRow"),handler(){this.deleteRow()}}}},merge:{content:e("mCells"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084199654" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1975" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M776.08580741 364.42263703c-15.53445925-7.76722963-31.06891852-7.76722963-46.60337778 0L589.6722963 512l139.81013333 147.57736297c15.53445925 7.76722963 31.06891852 7.76722963 46.60337778 0 15.53445925-15.53445925 15.53445925-31.06891852 0-46.60337779L706.18074075 543.06891852h163.11182222c15.53445925 0 31.06891852-15.53445925 31.06891851-31.06891852s-15.53445925-31.06891852-31.06891851-31.06891852H706.18074075l69.90506666-69.90506666c7.76722963-15.53445925 7.76722963-31.06891852 0-46.60337779z m-528.17161482 0c-15.53445925 15.53445925-15.53445925 31.06891852 0 46.60337779l69.90506666 69.90506666H154.70743703c-15.53445925 0-31.06891852 15.53445925-31.06891851 31.06891852s15.53445925 31.06891852 31.06891851 31.06891852H317.81925925l-69.90506666 69.90506666c-15.53445925 15.53445925-15.53445925 31.06891852 0 46.60337779 15.53445925 7.76722963 31.06891852 7.76722963 46.60337778 0L434.3277037 512 294.51757037 364.42263703c-15.53445925-7.76722963-31.06891852-7.76722963-46.60337778 0z" fill="#515151" p-id="1976"></path><path d="M317.81925925 939.19762963H84.80237037V84.80237037h233.01688888v116.50844445h77.6722963V7.13007408H7.13007408v1009.73985184h388.36148147V822.68918518h-77.6722963zM628.50844445 7.13007408v194.18074074h77.6722963v-116.50844445h233.01688888v854.39525926H706.18074075v-116.50844445h-77.6722963v194.18074074h388.36148147V7.13007408z" fill="#515151" p-id="1977"></path></svg>',handler(e,t){this.toggleAttribute(e,t)},children:{merge:{content:e("mCells"),handler(){this.mergeCells(),this.updateMenus()}},split:{content:e("sCell"),handler(){this.splitCell(),this.updateMenus()}}}},table:{content:e("tblProps"),icon:eY,handler(e,t){let r=Object.assign(Object.assign({},O(this.table,g)),{align:this.getTableAlignment(this.table)});this.toggleAttribute(e,t),this.tablePropertiesForm=new t7(this,{attribute:r,type:"table"}),this.hideMenus()}},cell:{content:e("cellProps"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084286647" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2488" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M1058.13333333 0v1024H-34.13333333V0h1092.26666666zM460.8 563.2H68.26666667V921.6h392.53333333V563.2z m494.93333333 0H563.2V921.6h392.53333333V563.2zM460.8 102.4H68.26666667v358.4h392.53333333V102.4z" fill="#515151" p-id="2489"></path></svg>',handler(e,t){let{selectedTds:r}=this.tableBetter.cellSelection,i=r.length>1?this.getSelectedTdsAttrs(r):this.getSelectedTdAttrs(r[0]);this.toggleAttribute(e,t),this.tablePropertiesForm=new t7(this,{attribute:i,type:"cell"}),this.hideMenus()}},wrap:{content:e("insParaOTbl"),icon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1692084879007" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="968" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M512 332.57913685H49.39294151c-20.56031346 0-41.12062691-17.13359531-41.12062805-41.12062692V44.73474502c0-20.56031346 17.13359531-41.12062691 41.12062805-41.12062691H512c20.56031346 0 41.12062691 17.13359531 41.12062691 41.12062691v246.72376491c0 23.98703275-17.13359531 41.12062691-41.12062691 41.12062692zM90.51356843 250.33788188h380.36580466V85.85537308H90.51356843v164.4825088z m884.09349006 757.30488889h-925.21411698c-20.56031346 0-41.12062691-17.13359531-41.12062805-41.12062692v-246.72376491c0-20.56031346 17.13359531-41.12062691 41.12062805-41.12062691h921.78739883c20.56031346 0 41.12062691 17.13359531 41.12062691 41.12062691v246.72376491c0 23.98703275-17.13359531 41.12062691-37.69390876 41.12062692zM90.51356843 928.82823509h842.97286314v-164.48250994H90.51356843v164.48250994z" fill="#515151" p-id="969"></path><path d="M974.60705849 1017.92292864h-925.21411698c-27.41375203 0-47.97406549-20.56031346-47.97406549-47.97406549v-246.72376491c0-27.41375203 20.56031346-47.97406549 47.97406549-47.97406549h921.78739883c27.41375203 0 47.97406549 20.56031346 47.97406435 47.97406549v246.72376491c3.42671929 23.98703275-20.56031346 47.97406549-44.5473462 47.97406549z m-925.21411698-325.53830173c-17.13359531 0-30.84047019 13.70687602-30.84047132 30.84047133v246.72376491c0 17.13359531 13.70687602 30.84047019 30.84047132 30.84047018h921.78739883c17.13359531 0 30.84047019-13.70687602 30.84047019-30.84047018v-246.72376491c0-17.13359531-13.70687602-30.84047019-30.84047019-30.84047133H49.39294151z m890.9469275 243.29704675h-856.67973802v-181.61610523h860.10645731v181.61610523h-3.42671929zM100.79372515 921.97479765h825.83926784V774.62588188H100.79372515v147.34891577z m411.20627485-582.54222223H49.39294151c-27.41375203 0-47.97406549-20.56031346-47.97406549-47.97406549V44.73474502c0-27.41375203 20.56031346-47.97406549 47.97406549-47.97406549H512c27.41375203 0 47.97406549 20.56031346 47.97406549 47.97406549v246.72376491c0 27.41375203-20.56031346 47.97406549-47.97406549 47.97406549zM49.39294151 13.89427484c-17.13359531 0-30.84047019 13.70687602-30.84047132 30.84047018v246.72376491c0 17.13359531 13.70687602 30.84047019 30.84047132 30.84047019H512c17.13359531 0 30.84047019-13.70687602 30.84047019-30.84047019V44.73474502c0-17.13359531-13.70687602-30.84047019-30.84047019-30.84047018H49.39294151zM481.15952981 260.61803974H83.66013099V79.00193451h397.49939882V260.61803974zM100.79372515 243.48444444h363.23220936V96.13552981H100.79372515v147.34891463z" fill="#515151" p-id="970"></path><path d="M974.60705849 130.40271929H628.50844445c-6.85343744 0-10.28015673 3.42671929-10.28015674 10.28015672v58.25422223c0 6.85343744 3.42671929 10.28015673 10.28015674 10.28015673h304.97798712V466.2211766H546.26718947l27.41375204-20.56031345c3.42671929-3.42671929 6.85343744-10.28015673 6.85343744-17.13359531v-58.25422223c0-6.85343744-3.42671929-10.28015673-10.28015673-10.28015672-3.42671929 0-3.42671929 0-6.85343744 3.42671928L409.19843157 486.78149006c-10.28015673 6.85343744-10.28015673 20.56031346-3.42671928 27.41375203l3.42671928 3.42671816 157.62907136 130.21532045c3.42671929 3.42671929 10.28015673 3.42671929 13.70687602 0 0-3.42671929 3.42671929-3.42671929 3.42671929-6.85343744v-61.6809415c0-6.85343744-3.42671929-10.28015673-6.85343858-13.70687602l-20.56031345-17.13359417h421.48643157c20.56031346 0 41.12062691-17.13359531 41.12062691-41.12062805V168.09662691c-6.85343744-20.56031346-23.98703275-37.69390877-44.5473462-37.69390762z" fill="#515151" p-id="971"></path><path d="M573.68094151 661.54415673c-3.42671929 0-6.85343744 0-10.28015673-3.42671929l-157.62907249-130.21531933-3.4267193-3.42671928c-3.42671929-6.85343744-6.85343744-13.70687602-6.85343744-20.56031346 0-6.85343744 3.42671929-13.70687602 10.28015674-20.5603146l157.62907249-126.78860117c3.42671929-3.42671929 6.85343744-3.42671929 10.28015673-3.42671815 10.28015673 0 17.13359531 6.85343744 17.13359417 17.13359416v58.25422223c0 10.28015673-3.42671929 17.13359531-10.28015673 23.98703275l-10.28015673 6.85343744H923.20627485v-239.87032634h-294.6978304c-10.28015673 0-17.13359531-6.85343744-17.13359531-17.13359416V140.68287601c0-10.28015673 6.85343744-17.13359531 17.13359531-17.13359531h346.09861404c27.41375203 0 47.97406549 20.56031346 47.97406549 47.9740655v335.81845732c0 27.41375203-20.56031346 47.97406549-47.97406549 47.97406549H577.10765966l3.42671929 3.42671929c6.85343744 6.85343744 10.28015673 13.70687602 10.28015673 20.56031346v61.6809415c0 3.42671929 0 6.85343744-3.42671815 10.28015674-3.42671929 6.85343744-10.28015673 10.28015673-13.70687602 10.28015673z m0-291.27111112l-157.6290725 126.78860117c-3.42671929 3.42671929-3.42671929 3.42671929-3.42671815 6.85343859s0 6.85343744 3.42671815 10.28015672l157.6290725 130.21532047h3.42671815v-61.68094151c0-3.42671929 0-6.85343744-3.42671815-10.28015673l-41.12062805-34.26718948h442.04674503c17.13359531 0 30.84047019-13.70687602 30.84047132-30.84047132V168.09662691c0-17.13359531-13.70687602-30.84047019-30.84047132-30.84047018H628.50844445v61.68094151h311.83142456v274.1375158H522.28015673l47.97406549-37.69390763c3.42671929-3.42671929 3.42671929-6.85343744 3.42671929-10.28015787v-54.82750293z" fill="#515151" p-id="972"></path></svg>',handler(e,t){this.toggleAttribute(e,t)},children:{before:{content:e("insB4"),handler(){this.insertParagraph(-1)}},after:{content:e("insAft"),handler(){this.insertParagraph(1)}}}},delete:{content:e("delTable"),icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 10V44H39V10H9Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/><path d="M20 20V33" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M28 20V33" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 10H44" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 10L19.289 4H28.7771L32 10H16Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/></svg>',handler(){this.deleteTable()}}},i={copy:{content:e("copyTable"),icon:'<?xml version="1.0" encoding="UTF-8"?><svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 12.4316V7.8125C13 6.2592 14.2592 5 15.8125 5H40.1875C41.7408 5 43 6.2592 43 7.8125V32.1875C43 33.7408 41.7408 35 40.1875 35H35.5163" stroke="#333" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><path d="M32.1875 13H7.8125C6.2592 13 5 14.2592 5 15.8125V40.1875C5 41.7408 6.2592 43 7.8125 43H32.1875C33.7408 43 35 41.7408 35 40.1875V15.8125C35 14.2592 33.7408 13 32.1875 13Z" fill="none" stroke="#333" stroke-width="4" stroke-linejoin="round"/></svg>',handler(){this.copyTable()}}};return(null==t?void 0:t.length)?Object.values(t).reduce((e,t)=>(e[t]=Object.assign({},r,i)[t],e),{}):r}(i,r)))){let{content:t,icon:r,children:i,handler:n}=e,s=this.createList(i),o=_(t),a=this.createMenu(r,eZ,!!i);a.appendChild(o),s&&a.appendChild(s),l.appendChild(a),a.addEventListener("click",n.bind(this,s,o))}return this.quill.container.appendChild(l),l}deleteColumn(e=!1){let{computeBounds:t,leftTd:r,rightTd:i}=this.getSelectedTdsInfo(),l=this.table.getBoundingClientRect(),s=j(t,this.table,this.quill.container,"column"),o=E(t,this.table,this.quill.container),a=n().find(r).table(),{changeTds:c,delTds:h}=this.getCorrectTds(s,t,r,i);e&&h.length!==this.tableBetter.cellSelection.selectedTds.length||(this.tableBetter.cellSelection.updateSelected("column"),a.deleteColumn(c,h,this.deleteTable.bind(this),o),z(this.table,l,t.left-t.right),this.updateMenus())}deleteRow(e=!1){let t=this.tableBetter.cellSelection.selectedTds,r={};for(let e of t){let t=~~e.getAttribute("rowspan")||1,i=n().find(e.parentElement);if(t>1)for(;i&&t;){let e=i.children.head.domNode.getAttribute("data-row");r[e]||(r[e]=i),i=i.next,t--}else{let t=e.getAttribute("data-row");r[t]||(r[t]=i)}}let i=Object.values(r);e&&i.reduce((e,t)=>e+t.children.length,0)!==t.length||(this.tableBetter.cellSelection.updateSelected("row"),n().find(t[0]).table().deleteRow(i,this.deleteTable.bind(this)),this.updateMenus())}deleteTable(){let e=n().find(this.table);if(!e)return;let t=e.offset(this.quill.scroll);e.remove(),this.tableBetter.hideTools(),this.quill.setSelection(t-1,0,n().sources.USER)}destroyTablePropertiesForm(){this.tablePropertiesForm&&(this.tablePropertiesForm.removePropertiesForm(),this.tablePropertiesForm=null)}getCellsOffset(e,t,r,i){let l=n().find(this.table).descendants($),s=Math.max(t.left,e.left),o=Math.min(t.right,e.right),a=new Map,c=new Map,h=new Map;for(let r of l){let{left:i,right:l}=q(r.domNode,this.quill.container);i+2>=s&&l<=o+2?this.setCellsMap(r,a):i+2>=e.left&&l<=t.left+2?this.setCellsMap(r,c):i+2>=t.right&&l<=e.right+2&&this.setCellsMap(r,h)}return this.getDiffOffset(a)||this.getDiffOffset(c,r)+this.getDiffOffset(h,i)}getColsOffset(e,t,r){let i=e.children.head,l=Math.max(r.left,t.left),n=Math.min(r.right,t.right),s=null,o=null,a=0;for(;i;){let{width:e}=i.domNode.getBoundingClientRect();if(s||o?(s=o,o+=e):o=(s=q(i.domNode,this.quill.container).left)+e,s>n)break;s>=l&&o<=n&&a--,i=i.next}return a}getCorrectBounds(e){let t=this.quill.container.getBoundingClientRect(),r=q(e,this.quill.container);return r.width>=t.width?[Object.assign(Object.assign({},r),{left:0,right:t.width}),t]:[r,t]}getCorrectTds(e,t,r,i){let l=[],s=[],o=n().find(r).table().colgroup(),a=~~r.getAttribute("colspan")||1,c=~~i.getAttribute("colspan")||1;if(o)for(let r of e){let e=q(r,this.quill.container);if(e.left+2>=t.left&&e.right<=t.right+2)s.push(r);else{let i=this.getColsOffset(o,t,e);l.push([r,i])}}else for(let r of e){let e=q(r,this.quill.container);if(e.left+2>=t.left&&e.right<=t.right+2)s.push(r);else{let i=this.getCellsOffset(t,e,a,c);l.push([r,i])}}return{changeTds:l,delTds:s}}getDiffOffset(e,t){let r=0,i=this.getTdsFromMap(e);if(i.length)if(t){for(let e of i)r+=~~e.getAttribute("colspan")||1;r-=t}else for(let e of i)r-=~~e.getAttribute("colspan")||1;return r}getRefInfo(e,t){let r=null;if(!e)return{id:ee(),ref:r};let i=e.children.head,l=i.domNode.getAttribute("data-row");for(;i;){let{left:e}=i.domNode.getBoundingClientRect();if(2>=Math.abs(e-t))return{id:l,ref:i};Math.abs(e-t)>=2&&!r&&(r=i),i=i.next}return{id:l,ref:r}}getSelectedTdAttrs(e){let t=function(e){var t;let r="left",i=null,l=e.descendants(W),n=e.descendants(w);for(let s of[...l,...n,...e.descendants(k)]){let e=function(e){for(let t of e.domNode.classList)if(/ql-align-/.test(t))return t.split("ql-align-")[1];return r}(s);if(null!=(t=i)&&t!==e)return r;i=e}return null!=i?i:r}(n().find(e));return t?Object.assign(Object.assign({},O(e,p)),{"text-align":t}):O(e,p)}getSelectedTdsAttrs(e){let t=new Map,r=null;for(let i of e){let e=this.getSelectedTdAttrs(i);if(r)for(let i of Object.keys(r))t.has(i)||e[i]!==r[i]&&t.set(i,!1);else r=e}for(let e of Object.keys(r))t.has(e)&&(r[e]=d[e]);return r}getSelectedTdsInfo(){let{startTd:e,endTd:t}=this.tableBetter.cellSelection,r=q(e,this.quill.container),i=q(t,this.quill.container),l=S(r,i);return r.left<=i.left&&r.top<=i.top?{computeBounds:l,leftTd:e,rightTd:t}:{computeBounds:l,leftTd:t,rightTd:e}}getTableAlignment(e){let t=e.getAttribute("align");if(!t){let{[t5.left]:t,[t5.right]:r}=O(e,[t5.left,t5.right]);return"auto"===t?"auto"===r?"center":"right":"left"}return t||"center"}getTdsFromMap(e){return Object.values(Object.fromEntries(e)).reduce((e,t)=>e.length>t.length?e:t,[])}handleClick(e){let t=e.target.closest("table");if(this.prevList&&this.prevList.classList.add("ql-hidden"),this.prevTooltip&&this.prevTooltip.classList.remove("ql-table-tooltip-hidden"),this.prevList=null,this.prevTooltip=null,!t&&!this.tableBetter.cellSelection.selectedTds.length)return this.hideMenus(),void this.destroyTablePropertiesForm();this.tablePropertiesForm||(this.showMenus(),this.updateMenus(t),(t&&!t.isEqualNode(this.table)||this.scroll)&&this.updateScroll(!1),this.table=t)}hideMenus(){this.root.classList.add("ql-hidden")}insertColumn(e,t){let{left:r,right:i,width:l}=e.getBoundingClientRect(),s=n().find(e).table(),o=e.parentElement.lastChild.isEqualNode(e);s.insertColumn(t>0?i:r,o,l,t),this.quill.scrollSelectionIntoView()}insertParagraph(e){let t=n().find(this.table),r=this.quill.getIndex(t),i=e>0?t.length():0,l=(new(o())).retain(r+i).insert("\n");this.quill.updateContents(l,n().sources.USER),this.quill.setSelection(r+i,n().sources.SILENT),this.tableBetter.hideTools(),this.quill.scrollSelectionIntoView()}insertRow(e,t){let r=n().find(e),i=r.rowOffset(),l=r.table();if(t>0){let r=~~e.getAttribute("rowspan")||1;l.insertRow(i+t+r-1,t)}else l.insertRow(i+t,t);this.quill.scrollSelectionIntoView()}mergeCells(){var e,t;let{selectedTds:r}=this.tableBetter.cellSelection,{computeBounds:i,leftTd:l}=this.getSelectedTdsInfo(),s=n().find(l),[o,a]=A(s),c=s.children.head,h=s.table().tbody().children,u=s.row(),d=u.children.reduce((e,t)=>{let r=q(t.domNode,this.quill.container);return r.left>=i.left&&r.right<=i.right&&(e+=~~t.domNode.getAttribute("colspan")||1),e},0),p=h.reduce((e,t)=>{let r=q(t.domNode,this.quill.container);if(r.top>=i.top&&r.bottom<=i.bottom){let r=Number.MAX_VALUE;t.children.forEach(e=>{let t=~~e.domNode.getAttribute("rowspan")||1;r=Math.min(r,t)}),e+=r}return e},0),f=0;for(let i of r){if(l.isEqualNode(i))continue;let r=n().find(i);r.moveChildren(s),r.remove(),(null==(t=null==(e=r.parent)?void 0:e.children)?void 0:t.length)||f++}f&&u.children.forEach(e=>{if(e.domNode.isEqualNode(l))return;let t=e.domNode.getAttribute("rowspan"),[r]=A(e);e.replaceWith(e.statics.blotName,Object.assign(Object.assign({},r),{rowspan:t-f}))}),s.setChildrenId(a),c.format(s.statics.blotName,Object.assign(Object.assign({},o),{colspan:d,rowspan:p-f})),this.tableBetter.cellSelection.setSelected(c.parent.domNode),this.quill.scrollSelectionIntoView()}setCellsMap(e,t){let r=e.domNode.getAttribute("data-row");t.has(r)?t.set(r,[...t.get(r),e.domNode]):t.set(r,[e.domNode])}showMenus(){this.root.classList.remove("ql-hidden")}splitCell(){let{selectedTds:e}=this.tableBetter.cellSelection,{leftTd:t}=this.getSelectedTdsInfo(),r=n().find(t).children.head;for(let t of e){let e=~~t.getAttribute("colspan")||1,r=~~t.getAttribute("rowspan")||1;if(1===e&&1===r)continue;let i=[],{width:l,right:s}=t.getBoundingClientRect(),o=n().find(t),a=o.table(),c=o.next,h=o.row();if(r>1)if(e>1){let t=h.next;for(let l=1;l<r;l++){let{ref:r,id:l}=this.getRefInfo(t,s);for(let n=0;n<e;n++)i.push([t,l,r]);t&&(t=t.next)}}else{let e=h.next;for(let t=1;t<r;t++){let{ref:t,id:r}=this.getRefInfo(e,s);i.push([e,r,t]),e&&(e=e.next)}}if(e>1){let r=t.getAttribute("data-row");for(let t=1;t<e;t++)i.push([h,r,c])}for(let[e,t,r]of i)a.insertColumnCell(e,t,r);let[u]=A(o);o.replaceWith(o.statics.blotName,Object.assign(Object.assign({},u),{width:~~(l/e),colspan:null,rowspan:null}))}this.tableBetter.cellSelection.setSelected(r.parent.domNode),this.quill.scrollSelectionIntoView()}toggleAttribute(e,t){this.prevList&&!this.prevList.isEqualNode(e)&&(this.prevList.classList.add("ql-hidden"),this.prevTooltip.classList.remove("ql-table-tooltip-hidden")),e&&(e.classList.toggle("ql-hidden"),t.classList.toggle("ql-table-tooltip-hidden"),this.prevList=e,this.prevTooltip=t)}updateMenus(e=this.table){e&&requestAnimationFrame(()=>{this.root.classList.remove("ql-table-triangle-none");let[t,r]=this.getCorrectBounds(e),{left:i,right:l,top:n,bottom:s}=t,{height:o,width:a}=this.root.getBoundingClientRect(),c=getComputedStyle(this.quill.getModule("toolbar").container),h=n-o-10,u=i+l-a>>1;h>-parseInt(c.paddingBottom)?(this.root.classList.add("ql-table-triangle-up"),this.root.classList.remove("ql-table-triangle-down")):(h=s>r.height?r.height+10:s+10,this.root.classList.add("ql-table-triangle-down"),this.root.classList.remove("ql-table-triangle-up")),u<r.left?(u=0,this.root.classList.add("ql-table-triangle-none")):u+a>r.right&&(u=r.right-a,this.root.classList.add("ql-table-triangle-none")),D(this.root,{left:`${u}px`,top:`${h}px`})})}updateScroll(e){this.scroll=e}updateTable(e){this.table=e}};let t8=n().import("blots/inline");n().import("ui/icons")["table-better"]=eY;class re extends t8{}class rt{constructor(){this.computeChildren=[],this.root=this.createContainer()}clearSelected(e){for(let t of e)t.classList&&t.classList.remove("ql-cell-selected");this.computeChildren=[],this.root&&this.setLabelContent(this.root.lastElementChild,null)}createContainer(){let e=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),i=document.createDocumentFragment();for(let e=1;e<=10;e++)for(let t=1;t<=10;t++){let r=document.createElement("span");r.setAttribute("row",`${e}`),r.setAttribute("column",`${t}`),i.appendChild(r)}return r.innerHTML="0 x 0",e.classList.add("ql-table-select-container","ql-hidden"),t.classList.add("ql-table-select-list"),r.classList.add("ql-table-select-label"),t.appendChild(i),e.appendChild(t),e.appendChild(r),e.addEventListener("mousemove",t=>this.handleMouseMove(t,e)),e}getComputeChildren(e,t){let r=[],{clientX:i,clientY:l}=t;for(let t of e){let{left:e,top:n}=t.getBoundingClientRect();i>=e&&l>=n&&r.push(t)}return r}getSelectAttrs(e){return[~~e.getAttribute("row"),~~e.getAttribute("column")]}handleClick(e,t){this.toggle(this.root);let r=e.target.closest("span[row]");if(r)this.insertTable(r,t);else{let e=this.computeChildren[this.computeChildren.length-1];e&&this.insertTable(e,t)}}handleMouseMove(e,t){let r=t.firstElementChild.children;this.clearSelected(this.computeChildren);let i=this.getComputeChildren(r,e);for(let e of i)e.classList&&e.classList.add("ql-cell-selected");this.computeChildren=i,this.setLabelContent(t.lastElementChild,i[i.length-1])}hide(e){this.clearSelected(this.computeChildren),e&&e.classList.add("ql-hidden")}insertTable(e,t){let[r,i]=this.getSelectAttrs(e);t(r,i),this.hide(this.root)}setLabelContent(e,t){if(t){let[r,i]=this.getSelectAttrs(t);e.innerHTML=`${r} x ${i}`}else e.innerHTML="0 x 0"}show(e){this.clearSelected(this.computeChildren),e&&e.classList.remove("ql-hidden")}toggle(e){this.clearSelected(this.computeChildren),e&&e.classList.toggle("ql-hidden")}}n().import("core/module");let rr=n().import("blots/container"),ri=n().import("modules/toolbar");class rl extends ri{attach(e){let t=Array.from(e.classList).find(e=>0===e.indexOf("ql-"));if(!t)return;if(t=t.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[t]&&null==this.quill.scroll.query(t))return void console.warn("ignoring attaching to nonexistent format",t,e);let r="SELECT"===e.tagName?"change":"click";e.addEventListener(r,r=>{var i;let{cellSelection:l}=this.getTableBetter();(null==(i=null==l?void 0:l.selectedTds)?void 0:i.length)>1?this.cellSelectionAttach(e,t,r,l):this.toolbarAttach(e,t,r)}),this.controls.push([t,e])}cellSelectionAttach(e,t,r,i){if("SELECT"===e.tagName){if(e.selectedIndex<0)return;let r=e.options[e.selectedIndex],l="string"!=typeof(null==r?void 0:r.value)||(null==r?void 0:r.value),n=i.getCorrectValue(t,l);i.setSelectedTdsFormat(t,n)}else{let l=(null==e?void 0:e.value)||!0,n=i.getCorrectValue(t,l);i.setSelectedTdsFormat(t,n),r.preventDefault()}}getTableBetter(){return this.quill.getModule("table-better")}setTableFormat(e,t,r,i,l){let s=null,{cellSelection:o,tableMenus:a}=this.getTableBetter(),c=1===t.length?rn(function(e,t=0,r=Number.MAX_VALUE){let i=(e,t,r)=>{let l=[],n=r;return e.children.forEachAt(t,r,(e,t,r)=>{e instanceof rr&&(l.push(e),l=l.concat(i(e,t,n))),n-=r}),l};return i(e,t,r)}(n().find(t[0]),e.index,e.length))===rn(l):t.length>1;for(let e of l){var h,u,d,p;let l=(h=t,u=i,d=e,p=c,1===h.length&&"list"===u&&d.statics.blotName===k.blotName||p);s=e.format(i,r,l)}if(t.length<2){if(c||1===l.length){let e=B(s);Promise.resolve().then(()=>{e&&this.quill.root.contains(e.domNode)?o.setSelected(e.domNode,!1):o.setSelected(t[0],!1)})}else o.setSelected(t[0],!1);this.quill.setSelection(e,n().sources.SILENT)}return a.updateMenus(),s}toolbarAttach(e,t,r){let i;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;let t=e.options[e.selectedIndex];i=!t.hasAttribute("selected")&&(t.value||!1)}else i=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),r.preventDefault();this.quill.focus();let[l]=this.quill.selection.getRange();if(null!=this.handlers[t])this.handlers[t].call(this,i);else if(this.quill.scroll.query(t).prototype instanceof eP){if(!(i=prompt(`Enter ${t}`)))return;this.quill.updateContents((new(o())).retain(l.index).delete(l.length).insert({[t]:i}),n().sources.USER)}else this.quill.format(t,i,n().sources.USER);this.update(l)}}function rn(e){return e.reduce((e,t)=>e+t.length(),0)}function rs(e,t,r,i){let l=this.quill.getSelection();if(!i)if(l.length||1!==t.length)i=this.quill.getLines(l);else{let[e]=this.quill.getLine(l.index);i=[e]}return this.setTableFormat(l,t,e,r,i)}rl.DEFAULTS=er()({},ri.DEFAULTS,{handlers:{header(e,t){let{cellSelection:r}=this.getTableBetter(),i=null==r?void 0:r.selectedTds;if(null==i?void 0:i.length)return rs.call(this,e,i,"header",t);this.quill.format("header",e,n().sources.USER)},list(e,t){let{cellSelection:r}=this.getTableBetter(),i=null==r?void 0:r.selectedTds;if(null==i?void 0:i.length){if(1===i.length){let t=this.quill.getSelection(!0),i=this.quill.getFormat(t);e=r.getListCorrectValue("list",e,i)}return rs.call(this,e,i,"list",t)}let l=this.quill.getSelection(!0),s=this.quill.getFormat(l);"check"===e?"checked"===s.list||"unchecked"===s.list?this.quill.format("list",!1,n().sources.USER):this.quill.format("list","unchecked",n().sources.USER):this.quill.format("list",e,n().sources.USER)},"table-better"(){}}});let ro=["error","warn","log","info"],ra="warn";function rc(e){if(ra&&ro.indexOf(e)<=ro.indexOf(ra)){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];console[e](...r)}}function rh(e){return ro.reduce((t,r)=>(t[r]=rc.bind(console,r,e),t),{})}rh.level=e=>{ra=e},rc.level=rh.level,n().import("core/module");let ru=n().import("modules/clipboard"),rd=rh("quill:clipboard");var rp=class extends ru{onPaste(e,{text:t,html:r}){let i=this.quill.getFormat(e.index),l=this.getTableDelta({text:t,html:r},i);rd.log("onPaste",l,{text:t,html:r});let s=(new(o())).retain(e.index).delete(e.length).concat(l);this.quill.updateContents(s,n().sources.USER),this.quill.setSelection(s.length()-e.length,n().sources.SILENT),this.quill.scrollSelectionIntoView()}getTableDelta({html:e,text:t},r){var i,l,n;let s=this.convert({text:t,html:e},r);if(r[W.blotName])for(let e of s.ops){if((null==e?void 0:e.attributes)&&(e.attributes[Y.blotName]||e.attributes[W.blotName]))return new(o());((null==(i=null==e?void 0:e.attributes)?void 0:i.header)||(null==(l=null==e?void 0:e.attributes)?void 0:l.list)||!(null==(n=null==e?void 0:e.attributes)?void 0:n[W.blotName]))&&(e.attributes=Object.assign(Object.assign({},e.attributes),r))}return s}};let rf=n().import("core/module");class rg extends rf{constructor(e,t){super(e,t),e.clipboard.addMatcher("td, th",es),e.clipboard.addMatcher("tr",en),e.clipboard.addMatcher("col",eo),e.clipboard.addMatcher("table",ea),this.language=new eb(null==t?void 0:t.language),this.cellSelection=new eG(e,this),this.operateLine=new eK(e,this),this.tableMenus=new t9(e,this),this.tableSelect=new rt,e.root.addEventListener("keyup",this.handleKeyup.bind(this)),e.root.addEventListener("mousedown",this.handleMousedown.bind(this)),e.root.addEventListener("scroll",this.handleScroll.bind(this)),this.registerToolbarTable(null==t?void 0:t.toolbarTable)}static register(){n().register(W,!0),n().register($,!0),n().register(G,!0),n().register(K,!0),n().register(Y,!0),n().register(J,!0),n().register(Z,!0),n().register(X,!0),n().register({"modules/toolbar":rl,"modules/clipboard":rp},!0)}clearHistorySelected(){let[e]=this.getTable();if(e)for(let t of Array.from(e.domNode.querySelectorAll("td.ql-cell-focused, td.ql-cell-selected")))t.classList&&t.classList.remove("ql-cell-focused","ql-cell-selected")}deleteTable(){let[e]=this.getTable();if(null==e)return;let t=e.offset();e.remove(),this.hideTools(),this.quill.update(n().sources.USER),this.quill.setSelection(t,n().sources.SILENT)}deleteTableTemporary(e=n().sources.API){for(let e of this.quill.scroll.descendants(Y))e.remove();this.hideTools(),this.quill.update(e)}getTable(e=this.quill.getSelection()){if(null==e)return[null,null,null,-1];let[t,r]=this.quill.getLine(e.index);if(null==t||t.statics.blotName!==W.blotName)return[null,null,null,-1];let i=t.parent,l=i.parent;return[l.parent.parent,l,i,r]}handleKeyup(e){this.cellSelection.handleKeyup(e),e.ctrlKey&&("z"===e.key||"y"===e.key)&&(this.hideTools(),this.clearHistorySelected()),this.updateMenus(e)}handleMousedown(e){var t;if(null==(t=this.tableSelect)||t.hide(this.tableSelect.root),!e.target.closest("table"))return this.hideTools();this.cellSelection.handleMousedown(e),this.cellSelection.setDisabled(!0)}handleScroll(){var e;this.hideTools(),null==(e=this.tableMenus)||e.updateScroll(!0)}hideTools(){var e,t,r,i,l,n,s;null==(e=this.cellSelection)||e.clearSelected(),null==(t=this.cellSelection)||t.setDisabled(!1),null==(r=this.operateLine)||r.hideDragBlock(),null==(i=this.operateLine)||i.hideDragTable(),null==(l=this.operateLine)||l.hideLine(),null==(n=this.tableMenus)||n.hideMenus(),null==(s=this.tableMenus)||s.destroyTablePropertiesForm()}insertTable(e,t){let r=this.quill.getSelection(!0);if(null==r||this.isTable(r))return;let i=`width: ${72*t}px`,l=this.quill.getFormat(r.index-1),[,s]=this.quill.getLine(r.index),a=!!l[W.blotName]||0!==s,c=a?(new(o())).insert("\n"):new(o()),h=(new(o())).retain(r.index).delete(r.length).concat(c).insert("\n",{[Y.blotName]:{style:i}}),u=Array(e).fill(0).reduce(e=>{let r=ee();return Array(t).fill("\n").reduce((e,t)=>e.insert(t,{[W.blotName]:Q(),[$.blotName]:{"data-row":r,width:"72"}}),e)},h);this.quill.updateContents(u,n().sources.USER),this.quill.setSelection(r.index+(a?2:1),n().sources.SILENT),this.showTools()}isTable(e){return!!this.quill.getFormat(e.index)[W.blotName]}registerToolbarTable(e){if(!e)return;n().register({"formats/table-better":re},!0);let t=this.quill.getModule("toolbar").container.querySelector("button.ql-table-better");t&&this.tableSelect.root&&(t.appendChild(this.tableSelect.root),t.addEventListener("click",e=>{this.tableSelect.handleClick(e,this.insertTable.bind(this))}),document.addEventListener("click",e=>{e.composedPath().includes(t)||this.tableSelect.root.classList.contains("ql-hidden")||this.tableSelect.hide(this.tableSelect.root)}))}showTools(e){let[t,,r]=this.getTable();t&&r&&(this.cellSelection.setDisabled(!0),this.cellSelection.setSelected(r.domNode,e),this.tableMenus.showMenus(),this.tableMenus.updateMenus(t.domNode),this.tableMenus.updateTable(t.domNode))}updateMenus(e){this.cellSelection.selectedTds.length&&("Enter"===e.key||e.ctrlKey&&"v"===e.key)&&this.tableMenus.updateMenus()}}function rb(e){return{key:e,format:["table-cell-block"],collapsed:!0,handler(t,r){var i;let[l]=this.quill.getLine(t.index),{offset:n,suffix:s}=r;if(0===n&&!l.prev)return!1;let o=null==(i=l.prev)?void 0:i.statics.blotName;return 0!==n||o!==y.blotName&&o!==W.blotName&&o!==k.blotName?!(0!==n&&!s&&"Delete"===e):rw.call(this,l,t)}}}function rm(e){return{key:e?"ArrowUp":"ArrowDown",collapsed:!0,format:["table-cell"],handler:()=>!1}}function rv(e){return{key:e,format:["table-header"],collapsed:!0,empty:!0,handler(e,t){let[r]=this.quill.getLine(e.index);if(r.prev)return rw.call(this,r,e);{let e=L(r.formats()[r.statics.blotName]);r.replaceWith(W.blotName,e)}}}}function ry(e){return{key:e,format:["table-list"],collapsed:!0,empty:!0,handler(e,t){let[r]=this.quill.getLine(e.index),i=L(r.parent.formats()[r.parent.statics.blotName]);r.replaceWith(W.blotName,i)}}}function rw(e,t){let r=this.quill.getModule("table-better");return e.remove(),null==r||r.tableMenus.updateMenus(),this.quill.setSelection(t.index-1,n().sources.SILENT),!1}rg.keyboardBindings={"table-cell down":rm(!1),"table-cell up":rm(!0),"table-cell-block backspace":rb("Backspace"),"table-cell-block delete":rb("Delete"),"table-header backspace":rv("Backspace"),"table-header delete":rv("Delete"),"table-header enter":{key:"Enter",collapsed:!0,format:["table-header"],suffix:/^$/,handler(e,t){let[r,i]=this.quill.getLine(e.index),l=(new(o())).retain(e.index).insert("\n",t.format).retain(r.length()-i-1).retain(1,{header:null});this.quill.updateContents(l,n().sources.USER),this.quill.setSelection(e.index+1,n().sources.SILENT),this.quill.scrollSelectionIntoView()}},"table-list backspace":ry("Backspace"),"table-list delete":ry("Delete"),"table-list empty enter":{key:"Enter",collapsed:!0,format:["table-list"],empty:!0,handler(e,t){let{line:r}=t,{cellId:i}=r.parent.formats()[r.parent.statics.blotName],l=r.replaceWith(W.blotName,i),n=this.quill.getModule("table-better"),s=B(l);s&&n.cellSelection.setSelected(s.domNode,!1)}}};var rx=rg}(),l.default}(r(2244))}}]);